import{z as P,N as B,a as L,r as U,A as b,e as S,b as M,bU as T,B as q,o as m,i as E,j as t,t as d,q as n,w as i,m as H,k as Q,E as o,f as h,R as I,v as V,P as G,a4 as J,a2 as X,a3 as Y,$ as Z,a0 as ee,Q as te,O as ae}from"./index.14f36682.js";import{o as se,_ as oe}from"./VAvatar.vue_vue_type_style_index_0_lang.0de428ed.js";import{_ as ne}from"./VIconButton.vue_vue_type_script_lang.f0774c33.js";import{_ as le}from"./VFilePond.vue_vue_type_script_lang.eb25a933.js";import{u as ie}from"./viewWrapper.3b8defb9.js";const re=p=>(Z("data-v-e5634813"),p=p(),ee(),p),de={class:"account-box is-form is-footerless"},ce={class:"form-head-inner"},me={class:"left"},pe={class:"right"},ue={class:"buttons"},_e=["onSubmit"],fe={class:"fieldset"},ve={class:"fieldset-heading"},he=["src"],ge={class:"fieldset"},ye=re(()=>t("div",{class:"fieldset-heading"},null,-1)),be={class:"columns is-multiline"},Ve={class:"column is-6"},$e={class:"help has-text-danger"},we={class:"column is-6"},ke={class:"help has-text-danger"},xe={class:"column is-12"},Ue={class:"help has-text-danger"},Se={class:"column is-12"},Ee={class:"help has-text-danger"},Ie=P({setup(p){const{t:u,locale:C}=B(),{user:$,updateProfile:w}=L(),s=U({avatar:"",email:"",firstname:"",lastname:"",username:""}),g=b(),c=b(!1),y=b(!1),r=U({avatar:[],email:[],firstname:[],lastname:[],username:[]}),F=S(()=>s.avatar||"/images/avatars/svg/vuero-1.svg"),k=M(),{y:z}=T();q(()=>{Object.assign(s,$)});const N=S(()=>z.value>30);async function j(){try{D(),y.value=!0;const e=new FormData;e.append("avatar",g.value||""),e.append("username",s.username),e.append("email",s.email),e.append("firstname",s.firstname),e.append("lastname",s.lastname),await w(e),k.success(u("Updated_successfully"))}catch(e){k.error(u("Error_while_updating_data")),Object.assign(r,e.response?.data?.errors)}finally{y.value=!1}}const O=e=>{r.avatar?.length&&(r.avatar=[]),g.value=e.target.files[0]},A=(e,a)=>{if(e){console.error(e);return}g.value=void 0,s.avatar=""};function D(){Object.assign(r,{avatar:[],email:[],firstname:[],lastname:[],username:[]})}return(e,a)=>{const W=G,K=le,x=ne,R=oe,_=J,f=X,v=Y;return m(),E("div",de,[t("div",{class:Q(["form-head stuck-header",[o(N)&&"is-stuck"]])},[t("div",ce,[t("div",me,[t("h3",null,d(e.$t("Personal_Info")),1)]),t("div",pe,[t("div",ue,[n(W,{type:"submit",color:"primary",raised:"",loading:y.value,tabindex:"0",form:"profile-update-form"},{default:i(()=>[H(d(e.$t("Save_changes")),1)]),_:1},8,["loading"])])])])],2),t("form",{id:"profile-update-form",class:"form-body",onSubmit:V(j,["prevent"])},[t("div",fe,[t("div",ve,[t("h4",null,d(e.$t("Profile_Picture")),1),t("p",null,d(e.$t("Update_profile_picture")),1)]),n(R,{size:"xl",class:"profile-v-avatar"},{avatar:i(()=>[c.value?(m(),h(K,{key:1,class:"profile-filepond",name:"profile_filepond","chunk-retry-delays":[500,1e3,3e3],"label-idle":"<i class='lnil lnil-cloud-upload'></i>","accepted-file-types":["image/png","image/jpeg","image/gif"],"image-preview-height":140,"image-resize-target-width":140,"image-resize-target-height":140,"image-crop-aspect-ratio":"1:1","style-panel-layout":"compact circle","style-load-indicator-position":"center bottom","style-progress-indicator-position":"right bottom","style-button-remove-item-position":"left bottom","style-button-process-item-position":"right bottom",onChange:O,onRemovefile:A})):(m(),E("img",{key:0,class:"avatar",src:o(F),alt:"",onErrorOnce:a[0]||(a[0]=l=>o(se)(l,"150x150"))},null,40,he)),c.value?(m(),h(x,{key:3,icon:"feather:arrow-left",class:"edit-button is-back",circle:"",tabindex:"0",onKeydown:a[3]||(a[3]=I(V(l=>c.value=!1,["prevent"]),["space"])),onClick:a[4]||(a[4]=l=>c.value=!1)})):(m(),h(x,{key:2,icon:"feather:edit-2",class:"edit-button is-edit",circle:"",tabindex:"0",onKeydown:a[1]||(a[1]=I(V(l=>c.value=!0,["prevent"]),["space"])),onClick:a[2]||(a[2]=l=>c.value=!0)}))]),_:1})]),t("div",ge,[ye,t("div",be,[t("div",Ve,[n(v,null,{default:i(()=>[n(f,{icon:"feather:user"},{default:i(()=>[n(_,{type:"text",placeholder:e.$t("First_name"),autocomplete:"given-name",modelValue:o(s).firstname,"onUpdate:modelValue":a[5]||(a[5]=l=>o(s).firstname=l)},null,8,["placeholder","modelValue"]),t("p",$e,d(o(r).firstname[0]),1)]),_:1})]),_:1})]),t("div",we,[n(v,null,{default:i(()=>[n(f,{icon:"feather:user"},{default:i(()=>[n(_,{type:"text",placeholder:e.$t("Last_name"),autocomplete:"family-name",modelValue:o(s).lastname,"onUpdate:modelValue":a[6]||(a[6]=l=>o(s).lastname=l)},null,8,["placeholder","modelValue"]),t("p",ke,d(o(r).lastname[0]),1)]),_:1})]),_:1})]),t("div",xe,[n(v,null,{default:i(()=>[n(f,{icon:"feather:map-pin"},{default:i(()=>[n(_,{type:"text",placeholder:e.$t("Username"),autocomplete:"country-name",modelValue:o(s).username,"onUpdate:modelValue":a[7]||(a[7]=l=>o(s).username=l)},null,8,["placeholder","modelValue"]),t("p",Ue,d(o(r).username[0]),1)]),_:1})]),_:1})]),t("div",Se,[n(v,null,{default:i(()=>[n(f,{icon:"feather:mail"},{default:i(()=>[n(_,{type:"text",placeholder:e.$t("Email"),autocomplete:"organization-title",modelValue:o(s).email,"onUpdate:modelValue":a[8]||(a[8]=l=>o(s).email=l)},null,8,["placeholder","modelValue"]),t("p",Ee,d(o(r).email[0]),1)]),_:1})]),_:1})])])])],40,_e)])}}});const Pe=te(Ie,[["__scopeId","data-v-e5634813"]]),je=P({setup(p){const{t:u}=B();return ie().setPageTitle(u("Edit_profile")),ae({title:`${u("Edit_profile")} - Nefrit`}),($,w)=>{const s=Pe;return m(),h(s)}}});export{je as default};

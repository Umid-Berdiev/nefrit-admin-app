import{_ as X,a as Z}from"./VFlexTable.vue_vue_type_style_index_0_lang.c051e93d.js";import{_ as ee}from"./VFlexPagination.65c84f8f.js";import{_ as te}from"./ApplicantFlexTableDropdown.vue_vue_type_script_setup_true_lang.0d101205.js";import{_ as ae}from"./StatusTag.vue_vue_type_script_setup_true_lang.65f1d61d.js";import{_ as oe}from"./VPlaceholderSection.vue_vue_type_style_index_0_lang.bf0704b9.js";import{_ as se}from"./VCard.vue_vue_type_script_setup_true_lang.aa748e93.js";import{_ as ne}from"./VFlex.vue_vue_type_style_index_0_lang.99038368.js";import{_ as le}from"./VFlexItem.vue_vue_type_style_index_0_lang.9b335850.js";import{z as ie,V as re,Y as ce,bP as ue,b as _e,r as T,A as v,e as me,bu as pe,B as de,o as _,i as y,q as a,W as fe,bL as be,j as m,w as s,t as d,E as t,v as ye,m as E,l as p,f as x,G as ge,a3 as he,a1 as we,a2 as Ve,P as ve}from"./index.47e107ef.js";import{_ as xe}from"./CountrySelect.vue_vue_type_style_index_0_lang.ce97455e.js";import{_ as ke}from"./StatusSelect.vue_vue_type_script_setup_true_lang.6239eeaf.js";import{_ as $e}from"./TableActionsBlock.vue_vue_type_style_index_0_lang.6821dbde.js";import{u as Fe}from"./viewWrapper.45a25a95.js";import{f as Ce,a as L,e as Se}from"./index.fb653e00.js";import"./VDropdown.vue_vue_type_style_index_0_lang.f613d0d7.js";import"./VIcon.vue_vue_type_script_setup_true_lang.5076ccf0.js";import"./VTag.vue_vue_type_style_index_0_lang.4aa10b1e.js";import"./VOption.vue_vue_type_style_index_0_lang.f4a20f33.js";import"./lodash.73e73cb6.js";import"./VButtons.vue_vue_type_script_setup_true_lang.218887f4.js";const Ae={class:"applicant-list-wrapper"},Be={class:"mb-5"},Ne={class:"title is-5 mb-2"},Te=["onSubmit"],Ee={class:"columns is-desktop"},Le={class:"column"},Pe={class:"column"},Ue={class:"column"},je={class:"column"},We=["textContent"],De={key:0,class:"flex-list-inner"},Oe={key:0,style:{"overflow-wrap":"break-word"}},Re={key:2},pt=ie({async setup(Ie){let k,$;const{t:l,locale:qe}=re(),P=ce();ue({title:l("Applicants")+" - Nefrit"});const U=_e();Fe().setPageTitle(l("Applicants_List"));const i=T({pagination:{current_page:1,per_page:10,total:10},result:[]}),n=T({name:"",boss_name:"",country_id:"",status_id:""}),c=v(!1),h=v(!1),w=me({get:()=>i.pagination.current_page,set:async e=>{await V(e)}}),F=v([]),j={orderNumber:{format:(e,o,u)=>`${u+1}`,cellClass:"is-flex-grow-0"},name:{label:l("Applicant_name"),grow:!0,searchable:!0},boss_name:{label:l("Boss_name"),searchable:!0},phone:{label:l("Phone_number"),searchable:!0},status:{label:l("Status"),searchable:!0},country:{label:l("Country")},actions:{label:l("Actions"),align:"center"}};[k,$]=pe(()=>V()),await k,$(),de(async()=>{const e=await Ce();F.value=e});function W(e){P.push("/app/applicants/"+e)}async function V(e=1){const o=await L({page:e,...n});Object.assign(i,o)}async function D(){try{c.value=!0;const e=await L({page:1,...n});Object.assign(i,e)}catch(e){U.error("Error while fetching filtered data: ",e.message)}finally{c.value=!1}}async function O(){c.value=!0,Object.assign(n,{name:"",boss_name:"",country_id:"",status_id:""}),await V(),c.value=!1}async function R(){try{c.value=!0;const e=await Se(n),o=URL.createObjectURL(new Blob([e],{type:"application/vnd.ms-excel"})),u=document.createElement("a");u.href=o,u.setAttribute("download",`Worksheet_${Date.now()}.xlsx`),document.body.appendChild(u),u.click()}catch(e){console.log({error:e})}finally{c.value=!1}}return(e,o)=>{const u=$e,C=he,S=we,A=Ve,I=ke,q=xe,B=ve,N=le,M=ne,z=se,G=oe,H=ae,Y=te,J=X,K=ee,Q=Z;return _(),y("div",Ae,[a(u,{center:"",title:"","add-disabled":"","remove-disabled":"",onFilter:o[0]||(o[0]=r=>h.value=!h.value),onExport:R}),fe(m("div",Be,[a(z,{radius:"small"},{default:s(()=>[m("h3",Ne,d(t(l)("Filter_form")),1),m("form",{onSubmit:ye(D,["prevent"])},[m("div",Ee,[m("div",Le,[a(A,{label:e.$t("Name")},{default:s(()=>[a(S,null,{default:s(()=>[a(C,{modelValue:t(n).name,"onUpdate:modelValue":o[1]||(o[1]=r=>t(n).name=r),type:"text"},null,8,["modelValue"])]),_:1})]),_:1},8,["label"])]),m("div",Pe,[a(A,{label:e.$t("Boss_name")},{default:s(()=>[a(S,null,{default:s(()=>[a(C,{modelValue:t(n).boss_name,"onUpdate:modelValue":o[2]||(o[2]=r=>t(n).boss_name=r),type:"text"},null,8,["modelValue"])]),_:1})]),_:1},8,["label"])]),m("div",Ue,[a(I,{modelValue:t(n).status_id,"onUpdate:modelValue":o[3]||(o[3]=r=>t(n).status_id=r),list:F.value},null,8,["modelValue","list"])]),m("div",je,[a(q,{modelValue:t(n).country_id,"onUpdate:modelValue":o[4]||(o[4]=r=>t(n).country_id=r)},null,8,["modelValue"])])]),a(M,{"justify-content":"end","column-gap":"1rem"},{default:s(()=>[a(N,null,{default:s(()=>[a(B,{type:"button",disabled:c.value,outlined:"",color:"warning",icon:"feather:x",onClick:O},{default:s(()=>[E(d(t(l)("Clear")),1)]),_:1},8,["disabled"])]),_:1}),a(N,null,{default:s(()=>[a(B,{type:"submit",disabled:c.value,outlined:"",color:"success",icon:"feather:filter"},{default:s(()=>[E(d(t(l)("Filter")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})],40,Te)]),_:1})],512),[[be,h.value]]),a(Q,{columns:t(j),data:t(i).result,limit:t(i).pagination.per_page,total:t(i).pagination.total},{default:s(r=>[a(J,{rounded:""},{"header-column":s(({column:f})=>[f.key==="orderNumber"?(_(),y("span",{key:0,class:"is-flex-grow-0",textContent:d("#")},null,8,We)):p("",!0)]),body:s(()=>[t(i).result.length===0?(_(),y("div",De,[a(G,{title:e.$t("No_data"),subtitle:e.$t("There_is_no_data_that_match_your_query"),class:"my-6"},null,8,["title","subtitle"])])):p("",!0)]),"body-cell":s(({row:f,column:g,value:b,index:ze})=>[g.key==="name"?(_(),y("p",Oe,d(b),1)):p("",!0),g.key==="status"&&b?(_(),x(H,{key:1,status:b},null,8,["status"])):p("",!0),g.key==="country"&&b?(_(),y("span",Re,d(b.name),1)):p("",!0),g.key==="actions"?(_(),x(Y,{key:3,onView:Ge=>W(f.id)},null,8,["onView"])):p("",!0)]),_:1}),t(i).result.length?(_(),x(K,{key:0,"current-page":t(w),"onUpdate:current-page":o[5]||(o[5]=f=>ge(w)?w.value=f:null),class:"mt-6","item-per-page":t(i).pagination.per_page,"total-items":t(i).pagination.total},null,8,["current-page","item-per-page","total-items"])):p("",!0)]),_:1},8,["columns","data","limit","total"])])}}});export{pt as default};

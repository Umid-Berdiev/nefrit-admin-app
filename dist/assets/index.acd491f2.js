import{_ as Q}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang.3597d534.js";import{_ as X}from"./VModal.vue_vue_type_style_index_0_lang.bc609875.js";import{af as Y,z as F,V as P,A as S,r as A,D as Z,o as h,f as U,w as n,j as c,q as e,i as C,E as t,t as V,l as T,v as x,m as M,a3 as ee,a1 as te,a2 as oe,P as R,p as ne,b as ae,e as le,bP as se,bu as ie,G as re}from"./index.47e107ef.js";import{_ as ue}from"./VTabs.vue_vue_type_script_setup_true_lang.255ec5a6.js";import{_ as ce}from"./VTextarea.8835ff3a.js";import{_ as de,a as me}from"./VFlexTable.vue_vue_type_style_index_0_lang.c051e93d.js";import{_ as pe}from"./VFlexPagination.65c84f8f.js";import{_ as _e}from"./VDropdown.vue_vue_type_style_index_0_lang.f613d0d7.js";import{_ as fe}from"./VPlaceholderSection.vue_vue_type_style_index_0_lang.bf0704b9.js";import{_ as ye}from"./VFlex.vue_vue_type_style_index_0_lang.99038368.js";import{u as he}from"./viewWrapper.45a25a95.js";import{u as ge}from"./index.731bd9c9.js";import"./VIcon.vue_vue_type_script_setup_true_lang.5076ccf0.js";const I=Y();async function ve(d){try{const{data:o}=await I({url:`/api/admin/doc-category?page=${d}`});return o.data}catch(o){throw o}}async function be(d){try{const{data:o}=await I({url:`/api/admin/doc-category/${d}`});return o.data}catch(o){throw o}}async function $e(d){try{const{data:o}=await I({url:"/api/admin/doc-category",method:"POST",data:d})}catch(o){throw o}}async function Ve(d,o){try{const{data:m}=await I({url:`/api/admin/doc-category/${d}`,method:"PUT",data:o})}catch(m){throw m}}async function we(d){try{const{data:o}=await I({url:`/api/admin/doc-category/${d}`,method:"DELETE"})}catch(o){throw o}}const ze=["onSubmit"],Ce={key:0,class:"columns is-multiline pt-5"},ke={class:"column is-12"},Ne={class:"help has-text-danger"},De={class:"help has-text-danger"},Te={key:1,class:"columns is-multiline pt-5"},Ae={class:"column is-12"},Ie={key:2,class:"columns is-multiline pt-5"},Ee={class:"column is-12"},Se=F({props:{modelValue:Boolean,itemId:{type:Number,default:null}},emits:["update:modelValue","update:list"],setup(d,{emit:o}){const m=d,{t:f}=P(),p=S(f("Add")),$=S(!1),r=A({uz:"",ru:"",en:""}),a=A({uz:"",ru:"",en:""}),b=A({"name.uz":[],"name.en":[],"name.ru":[],"description.uz":[],"description.en":[],"description.ru":[]});Z(()=>m.itemId,async s=>{if(s){p.value=f("Edit");const l=await be(Number(m.itemId));Object.assign(r,l.name),Object.assign(a,l.description)}},{deep:!0,immediate:!0});async function k(s){try{$.value=!0,m.itemId?await Ve(m.itemId,{name:r,description:a}):await $e({name:r,description:a}),o("update:list"),g()}catch(l){Object.assign(b,l.response?.data?.errors)}finally{$.value=!1}}function g(){p.value=f("Add"),B(),O(),o("update:modelValue",!1)}function B(){Object.assign(r,{uz:"",ru:"",en:""}),Object.assign(a,{uz:"",ru:"",en:""})}function O(){Object.assign(b,{"name.uz":[],"name.en":[],"name.ru":[],"description.uz":[],"description.en":[],"description.ru":[]})}return(s,l)=>{const N=ee,y=te,v=oe,i=ce,u=ue,D=R,j=X;return h(),U(j,{open:d.modelValue,size:"large",title:p.value,actions:"right",onClose:g},{content:n(()=>[c("form",{id:"role-form",class:"modal-form",onSubmit:x(k,["prevent"])},[e(u,{type:"boxed",selected:"uz",tabs:[{label:s.$t("Uzbek"),value:"uz"},{label:s.$t("Russian"),value:"ru"},{label:s.$t("English"),value:"en"}]},{tab:n(({activeValue:w})=>[w==="uz"?(h(),C("div",Ce,[c("div",ke,[e(v,{label:s.$t("Name_uz"),required:""},{default:n(()=>[e(y,null,{default:n(()=>[e(N,{name:"name_uz",type:"text",placeholder:t(f)("Type_name_uz"),modelValue:t(r).uz,"onUpdate:modelValue":l[0]||(l[0]=_=>t(r).uz=_)},null,8,["placeholder","modelValue"]),c("p",Ne,V(t(b)["name.uz"][0]),1)]),_:1})]),_:1},8,["label"]),e(v,{label:s.$t("Description_uz"),required:""},{default:n(()=>[e(y,null,{default:n(()=>[e(i,{name:"description_uz",placeholder:t(f)("Add_description_uz"),modelValue:t(a).uz,"onUpdate:modelValue":l[1]||(l[1]=_=>t(a).uz=_)},null,8,["placeholder","modelValue"]),c("p",De,V(t(b)["description.uz"][0]),1)]),_:1})]),_:1},8,["label"])])])):w==="ru"?(h(),C("div",Te,[c("div",Ae,[e(v,{label:s.$t("Name_ru")},{default:n(()=>[e(y,null,{default:n(()=>[e(N,{name:"name_ru",type:"text",placeholder:t(f)("Type_name_ru"),modelValue:t(r).ru,"onUpdate:modelValue":l[2]||(l[2]=_=>t(r).ru=_)},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"]),e(v,{label:s.$t("Description_ru")},{default:n(()=>[e(y,null,{default:n(()=>[e(i,{name:"description_ru",placeholder:t(f)("Add_description_ru"),modelValue:t(a).ru,"onUpdate:modelValue":l[3]||(l[3]=_=>t(a).ru=_)},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"])])])):w==="en"?(h(),C("div",Ie,[c("div",Ee,[e(v,{label:s.$t("Name_en")},{default:n(()=>[e(y,null,{default:n(()=>[e(N,{name:"name_en",type:"text",placeholder:t(f)("Type_name_en"),modelValue:t(r).en,"onUpdate:modelValue":l[4]||(l[4]=_=>t(r).en=_)},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"]),e(v,{label:s.$t("Description_en")},{default:n(()=>[e(y,null,{default:n(()=>[e(i,{name:"description_en",placeholder:t(f)("Add_description_en"),modelValue:t(a).en,"onUpdate:modelValue":l[5]||(l[5]=_=>t(a).en=_)},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"])])])):T("",!0)]),_:1},8,["tabs"])],40,ze)]),action:n(({close:w})=>[e(D,{type:"submit",color:"primary",outlined:"",form:"role-form",loading:$.value,disabled:$.value},{default:n(()=>[M(V(s.$t("Save")),1)]),_:1},8,["loading","disabled"])]),_:1},8,["open","title"])}}}),Ue=["onClick"],xe={class:"icon"},Be={class:"meta"},je=c("hr",{class:"dropdown-divider"},null,-1),Fe=["onClick"],Oe={class:"icon"},Pe={class:"meta"},Me=F({emits:["edit","remove"],setup(d,{emit:o}){return(m,f)=>{const p=ne("VueIconify"),$=_e;return h(),U($,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:n(({close:r})=>[c("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:x(()=>{o("edit"),r()},["prevent"])},[c("div",xe,[e(p,{icon:"feather:edit-2"})]),c("div",Be,[c("span",null,V(m.$t("Edit")),1)])],8,Ue),je,c("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:x(()=>{o("remove"),r()},["prevent"])},[c("div",Oe,[e(p,{icon:"feather:trash"})]),c("div",Pe,[c("span",null,V(m.$t("Remove")),1)])],8,Fe)]),_:1})}}}),Re={class:"doc-category-list-wrapper"},qe=["textContent"],Le={key:0,class:"flex-list-inner"},st=F({async setup(d){let o,m;const f=ae(),{t:p,locale:$}=P(),r=ge(),a=A({pagination:{current_page:1,per_page:10,total:10},result:[]}),b=le({get:()=>a.pagination.current_page,set:async i=>{await y(i)}}),k=S(!1),g=S(null),B=A({orderNumber:{format:(i,u,D)=>`${D+1}`,cellClass:"is-flex-grow-0"},name:{label:p("Name"),searchable:!0},description:{label:p("Description")},actions:{label:p("Actions"),align:"center"}});he().setPageTitle(p("Doc_Category_List")),se({title:p("Doc_Category")+" - Nefrit"}),[o,m]=ie(()=>y()),await o,m();function s(i=null){k.value=!0,g.value=i}async function l(i){g.value=i,r.$patch({confirmModalState:!0})}async function N(){await we(g.value),await y(),v()}async function y(i=1){const u=await ve(i);Object.assign(a,u)}function v(){f.success(p("Success"))}return(i,u)=>{const D=R,j=ye,w=fe,_=Me,q=de,L=pe,W=me,G=Se,H=Q;return h(),C("div",Re,[e(j,{"justify-content":"end",class:"mb-4"},{default:n(()=>[e(D,{outlined:"",rounded:"",color:"info",icon:"feather:plus",onClick:u[0]||(u[0]=x(E=>s(),["prevent"]))},{default:n(()=>[M(V(i.$t("Add")),1)]),_:1})]),_:1}),e(W,{columns:t(B),data:t(a).result,limit:t(a).pagination.per_page,total:t(a).pagination.total},{default:n(E=>[e(q,{rounded:""},{"header-column":n(({column:z})=>[z.key==="orderNumber"?(h(),C("span",{key:0,class:"is-flex-grow-0",textContent:V("#")},null,8,qe)):T("",!0)]),body:n(()=>[t(a).result.length===0?(h(),C("div",Le,[e(w,{title:i.$t("No_data"),subtitle:i.$t("There_is_no_data_that_match_your_query"),class:"my-6"},null,8,["title","subtitle"])])):T("",!0)]),"body-cell":n(({row:z,column:J,value:We,index:Ge})=>[J.key==="actions"?(h(),U(_,{key:0,onEdit:K=>s(z.id),onRemove:K=>l(z.id)},null,8,["onEdit","onRemove"])):T("",!0)]),_:1}),t(a).result.length?(h(),U(L,{key:0,"current-page":t(b),"onUpdate:current-page":u[1]||(u[1]=z=>re(b)?b.value=z:null),class:"mt-6","item-per-page":t(a).pagination.per_page,"total-items":t(a).pagination.total},null,8,["current-page","item-per-page","total-items"])):T("",!0)]),_:1},8,["columns","data","limit","total"]),e(G,{modelValue:k.value,"onUpdate:modelValue":u[2]||(u[2]=E=>k.value=E),"item-id":g.value,"onUpdate:list":u[3]||(u[3]=()=>{y(),v(),g.value=null}),onClose:u[4]||(u[4]=E=>g.value=null)},null,8,["modelValue","item-id"]),e(H,{onConfirmAction:N})])}}});export{st as default};

import{_ as oe}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang.82e6fa1d.js";import{_ as ne}from"./VModal.vue_vue_type_style_index_0_lang.61b38c15.js";import{A as P,O as q,B as k,r as x,E as se,o as v,g as E,w as n,k as o,s as t,j as N,G as e,t as g,m as j,x as C,p as W,a5 as ae,a3 as le,a4 as ie,Q,q as re,b as ue,$ as de,f as U,P as ce,bv as me,H as pe}from"./index.bb4908f5.js";import{_ as _e}from"./VTabs.vue_vue_type_script_setup_true_lang.9d31ef9c.js";import{_ as fe}from"./VTextarea.a25adf21.js";import{a as ve,u as he,c as be,s as ge,b as $e,r as ye,d as Ve}from"./index.77baaab9.js";import{_ as we,a as ze}from"./VFlexTable.vue_vue_type_style_index_0_lang.e91991ed.js";import{_ as ke}from"./VFlexPagination.6f519b0d.js";import{_ as Ce}from"./VDropdown.vue_vue_type_style_index_0_lang.c6874a9c.js";import{_ as Ne}from"./VPlaceholderSection.vue_vue_type_style_index_0_lang.fc527a37.js";import{_ as Ie}from"./VFlex.vue_vue_type_style_index_0_lang.2810b5dd.js";import{u as Re}from"./viewWrapper.337e6d03.js";import{u as Se}from"./index.2a55e875.js";import"./VIcon.vue_vue_type_script_setup_true_lang.654e5aba.js";const Ae=["onSubmit"],je={key:0,class:"columns is-multiline pt-5"},Be={class:"column is-12"},Oe={class:"help has-text-danger"},Te={class:"help has-text-danger"},Ue={key:1,class:"columns is-multiline pt-5"},xe={class:"column is-12"},Ee={key:2,class:"columns is-multiline pt-5"},Fe={class:"column is-12"},De=P({props:{modelValue:Boolean,roleId:{type:Number,default:null}},emits:["update:modelValue","update:list"],setup(B,{emit:f}){const m=B,{t:p}=q(),h=k(p("Add")),c=k(!1),u=x({uz:"",ru:"",en:""}),_=x({uz:"",ru:"",en:""}),i=x({"name.uz":[],"name.en":[],"name.ru":[],"description.uz":[],"description.en":[],"description.ru":[]});se(()=>m.roleId,async r=>{if(r){h.value=p("Edit");const a=await ve(Number(m.roleId));Object.assign(u,a.name),Object.assign(_,a.description)}},{deep:!0,immediate:!0});async function I(r){try{c.value=!0,m.roleId?await he(m.roleId,{name:u,description:_}):await be({name:u,description:_}),f("update:list"),R()}catch(a){Object.assign(i,a.response?.data?.errors)}finally{c.value=!1}}function R(){h.value=p("Add"),$(),O(),f("update:modelValue",!1)}function $(){Object.assign(u,{uz:"",ru:"",en:""}),Object.assign(_,{uz:"",ru:"",en:""})}function O(){Object.assign(i,{"name.uz":[],"name.en":[],"name.ru":[],"description.uz":[],"description.en":[],"description.ru":[]})}return(r,a)=>{const T=ae,b=le,y=ie,S=fe,F=_e,A=Q,D=ne;return v(),E(D,{open:B.modelValue,size:"large",title:h.value,actions:"right",onClose:R},{content:n(()=>[o("form",{id:"role-form",class:"modal-form",onSubmit:C(I,["prevent"])},[t(F,{type:"boxed",selected:"uz",tabs:[{label:r.$t("Uzbek"),value:"uz"},{label:r.$t("Russian"),value:"ru"},{label:r.$t("English"),value:"en"}]},{tab:n(({activeValue:w})=>[w==="uz"?(v(),N("div",je,[o("div",Be,[t(y,{label:r.$t("Name_uz"),required:""},{default:n(()=>[t(b,null,{default:n(()=>[t(T,{name:"name_uz",type:"text",placeholder:e(p)("Type_name_uz"),modelValue:e(u).uz,"onUpdate:modelValue":a[0]||(a[0]=d=>e(u).uz=d)},null,8,["placeholder","modelValue"]),o("p",Oe,g(e(i)["name.uz"][0]),1)]),_:1})]),_:1},8,["label"]),t(y,{label:r.$t("Description_uz"),required:""},{default:n(()=>[t(b,null,{default:n(()=>[t(S,{name:"description_uz",placeholder:e(p)("Add_description_uz"),modelValue:e(_).uz,"onUpdate:modelValue":a[1]||(a[1]=d=>e(_).uz=d)},null,8,["placeholder","modelValue"]),o("p",Te,g(e(i)["description.uz"][0]),1)]),_:1})]),_:1},8,["label"])])])):w==="ru"?(v(),N("div",Ue,[o("div",xe,[t(y,{label:r.$t("Name_ru")},{default:n(()=>[t(b,null,{default:n(()=>[t(T,{name:"name_ru",type:"text",placeholder:e(p)("Type_name_ru"),modelValue:e(u).ru,"onUpdate:modelValue":a[2]||(a[2]=d=>e(u).ru=d)},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"]),t(y,{label:r.$t("Description_ru")},{default:n(()=>[t(b,null,{default:n(()=>[t(S,{name:"description_ru",placeholder:e(p)("Add_description_ru"),modelValue:e(_).ru,"onUpdate:modelValue":a[3]||(a[3]=d=>e(_).ru=d)},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"])])])):w==="en"?(v(),N("div",Ee,[o("div",Fe,[t(y,{label:r.$t("Name_en")},{default:n(()=>[t(b,null,{default:n(()=>[t(T,{name:"name_en",type:"text",placeholder:e(p)("Type_name_en"),modelValue:e(u).en,"onUpdate:modelValue":a[4]||(a[4]=d=>e(u).en=d)},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"]),t(y,{label:r.$t("Description_en")},{default:n(()=>[t(b,null,{default:n(()=>[t(S,{name:"description_en",placeholder:e(p)("Add_description_en"),modelValue:e(_).en,"onUpdate:modelValue":a[5]||(a[5]=d=>e(_).en=d)},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"])])])):j("",!0)]),_:1},8,["tabs"])],40,Ae)]),action:n(({close:w})=>[t(A,{loading:c.value,color:"primary",outlined:"",type:"submit",form:"role-form",disabled:c.value},{default:n(()=>[W(g(r.$t("Save")),1)]),_:1},8,["loading","disabled"])]),_:1},8,["open","title"])}}}),Me=["onClick"],Pe=o("div",{class:"icon"},[o("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),Le={class:"meta"},qe=["onClick"],We={class:"icon"},Qe={class:"meta"},He=["onClick"],Ge={class:"icon"},Je={class:"meta"},Ke=o("hr",{class:"dropdown-divider"},null,-1),Xe=["onClick"],Ye={class:"icon"},Ze={class:"meta"},et=P({emits:["view","edit","remove","permissions"],setup(B,{emit:f}){return(m,p)=>{const h=re("VueIconify"),c=Ce;return v(),E(c,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:n(({close:u})=>[o("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:C(()=>{f("view"),u()},["prevent"])},[Pe,o("div",Le,[o("span",null,g(m.$t("View")),1)])],8,Me),o("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:C(()=>{f("edit"),u()},["prevent"])},[o("div",We,[t(h,{icon:"feather:edit-2"})]),o("div",Qe,[o("span",null,g(m.$t("Edit")),1)])],8,qe),o("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:C(()=>{f("permissions"),u()},["prevent"])},[o("div",Ge,[t(h,{icon:"feather:shield"})]),o("div",Je,[o("span",null,g(m.$t("Role_permissions")),1)])],8,He),Ke,o("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:C(()=>{f("remove"),u()},["prevent"])},[o("div",Ye,[t(h,{icon:"feather:trash"})]),o("div",Ze,[o("span",null,g(m.$t("Remove")),1)])],8,Xe)]),_:1})}}}),tt={class:"applicant-list-wrapper"},ot=["textContent"],nt={key:0,class:"flex-list-inner"},$t=P({async setup(B){let f,m;const p=ue(),h=de(),{t:c,locale:u}=q(),_=Se(),i=x({pagination:{current_page:1,per_page:10,total:10},result:[]}),I=k(!1),R=k([]);U(()=>i.result.length===R.value.length&&R.value.length!==0);const $=k();U({get(){return""},async set(s){await D(s)}});const O=k(""),r=U({get:()=>O.value,async set(s){O.value=s??"",await w(s)}}),a=U(()=>({orderNumber:{format:(s,l,M)=>`${M+1}`,cellClass:"is-flex-grow-0"},name:{label:c("Name"),searchable:!0},description:{label:c("Description")},actions:{label:c("Actions"),align:"center"}}));Re().setPageTitle(c("Roles_List")),ce({title:c("Roles")+" - Nefrit"}),[f,m]=me(()=>A()),await f,m();function b(s){I.value=!0,$.value=s}async function y(s){$.value=s,_.$patch({confirmModalState:!0})}function S(s){h.push(`/app/roles/${s}/permissions`)}async function F(){await ye($.value),await A(),d()}async function A(s=1){const l=await Ve(s);Object.assign(i,l)}async function D(s){const l=await ge(s);Object.assign(i,l)}async function w(s){const l=await $e(s);Object.assign(i,l)}function d(){p.success(c("Success"))}return(s,l)=>{const M=Q,H=Ie,G=Ne,J=et,K=we,X=ke,Y=ze,Z=De,ee=oe;return v(),N("div",tt,[t(H,{"justify-content":"end",class:"mb-4"},{default:n(()=>[t(M,{outlined:"",rounded:"",color:"info",icon:"feather:plus",onClick:l[0]||(l[0]=C(z=>b(void 0),["prevent"]))},{default:n(()=>[W(g(s.$t("Add")),1)]),_:1})]),_:1}),t(Y,{columns:e(a),data:e(i).result,limit:e(i).pagination.per_page,total:e(i).pagination.total,sort:e(r),"onUpdate:sort":l[2]||(l[2]=z=>pe(r)?r.value=z:null)},{default:n(z=>[t(K,{rounded:""},{"header-column":n(({column:V})=>[V.key==="orderNumber"?(v(),N("span",{key:0,class:"is-flex-grow-0",textContent:g("#")},null,8,ot)):j("",!0)]),body:n(()=>[e(i).result.length===0?(v(),N("div",nt,[t(G,{title:s.$t("No_matches"),subtitle:s.$t("There_is_no_data_that_match_your_query"),class:"my-6"},null,8,["title","subtitle"])])):j("",!0)]),"body-cell":n(({row:V,column:te,value:st,index:at})=>[te.key==="actions"?(v(),E(J,{key:0,onEdit:L=>b(V.id),onRemove:L=>y(V.id),onPermissions:L=>S(V.id)},null,8,["onEdit","onRemove","onPermissions"])):j("",!0)]),_:1}),e(i).result.length?(v(),E(X,{key:0,"current-page":e(i).pagination.current_page,"onUpdate:current-page":l[1]||(l[1]=V=>e(i).pagination.current_page=V),class:"mt-6","item-per-page":e(i).pagination.per_page,"total-items":e(i).pagination.total},null,8,["current-page","item-per-page","total-items"])):j("",!0)]),_:1},8,["columns","data","limit","total","sort"]),t(Z,{modelValue:I.value,"onUpdate:modelValue":l[3]||(l[3]=z=>I.value=z),"role-id":$.value,"onUpdate:list":l[4]||(l[4]=()=>{A(),d(),$.value=void 0}),onClose:l[5]||(l[5]=z=>$.value=void 0)},null,8,["modelValue","role-id"]),t(ee,{onConfirmAction:F})])}}});export{$t as default};

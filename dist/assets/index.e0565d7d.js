import{A as C,O as E,a as L,r as U,B as b,f as S,b as M,bU as T,C as G,o as p,j as I,k as t,t as d,s as n,w as i,p as H,l as Q,G as o,g as h,U as P,x as V,Q as q,a5 as J,a3 as X,a4 as Y,a0 as Z,a1 as ee,R as te,P as ae}from"./index.bb4908f5.js";import{o as se,_ as oe}from"./VAvatar.vue_vue_type_style_index_0_lang.11c81cb4.js";import{_ as ne}from"./VIconButton.vue_vue_type_script_lang.5a82fe48.js";import{_ as le}from"./VFilePond.vue_vue_type_script_lang.362d4670.js";import{u as ie}from"./viewWrapper.337e6d03.js";const re=u=>(Z("data-v-e5634813"),u=u(),ee(),u),de={class:"account-box is-form is-footerless"},ce={class:"form-head-inner"},pe={class:"left"},ue={class:"right"},me={class:"buttons"},_e=["onSubmit"],fe={class:"fieldset"},ve={class:"fieldset-heading"},he=["src"],ge={class:"fieldset"},ye=re(()=>t("div",{class:"fieldset-heading"},null,-1)),be={class:"columns is-multiline"},Ve={class:"column is-6"},$e={class:"help has-text-danger"},we={class:"column is-6"},ke={class:"help has-text-danger"},xe={class:"column is-12"},Ue={class:"help has-text-danger"},Se={class:"column is-12"},Ie={class:"help has-text-danger"},Pe=C({setup(u){const{t:m,locale:B}=E(),{user:$,updateProfile:w}=L(),s=U({avatar:"",email:"",firstname:"",lastname:"",username:""}),g=b(),c=b(!1),y=b(!1),r=U({avatar:[],email:[],firstname:[],lastname:[],username:[]}),F=S(()=>s.avatar||"/images/avatars/svg/vuero-1.svg"),k=M(),{y:j}=T();G(()=>{Object.assign(s,$)});const z=S(()=>j.value>30);async function N(){try{D(),y.value=!0;const e=new FormData;e.append("avatar",g.value||""),e.append("username",s.username),e.append("email",s.email),e.append("firstname",s.firstname),e.append("lastname",s.lastname),await w(e),k.success(m("Updated_successfully"))}catch(e){k.error(m("Error_while_updating_data")),Object.assign(r,e.response?.data?.errors)}finally{y.value=!1}}const O=e=>{r.avatar?.length&&(r.avatar=[]),g.value=e.target.files[0]},A=(e,a)=>{if(e){console.error(e);return}g.value=void 0,s.avatar=""};function D(){Object.assign(r,{avatar:[],email:[],firstname:[],lastname:[],username:[]})}return(e,a)=>{const W=q,K=le,x=ne,R=oe,_=J,f=X,v=Y;return p(),I("div",de,[t("div",{class:Q(["form-head stuck-header",[o(z)&&"is-stuck"]])},[t("div",ce,[t("div",pe,[t("h3",null,d(e.$t("Personal_Info")),1)]),t("div",ue,[t("div",me,[n(W,{type:"submit",color:"primary",raised:"",loading:y.value,tabindex:"0",form:"profile-update-form"},{default:i(()=>[H(d(e.$t("Save_changes")),1)]),_:1},8,["loading"])])])])],2),t("form",{id:"profile-update-form",class:"form-body",onSubmit:V(N,["prevent"])},[t("div",fe,[t("div",ve,[t("h4",null,d(e.$t("Profile_Picture")),1),t("p",null,d(e.$t("Update_profile_picture")),1)]),n(R,{size:"xl",class:"profile-v-avatar"},{avatar:i(()=>[c.value?(p(),h(K,{key:1,class:"profile-filepond",name:"profile_filepond","chunk-retry-delays":[500,1e3,3e3],"label-idle":"<i class='lnil lnil-cloud-upload'></i>","accepted-file-types":["image/png","image/jpeg","image/gif"],"image-preview-height":140,"image-resize-target-width":140,"image-resize-target-height":140,"image-crop-aspect-ratio":"1:1","style-panel-layout":"compact circle","style-load-indicator-position":"center bottom","style-progress-indicator-position":"right bottom","style-button-remove-item-position":"left bottom","style-button-process-item-position":"right bottom",onChange:O,onRemovefile:A})):(p(),I("img",{key:0,class:"avatar",src:o(F),alt:"",onErrorOnce:a[0]||(a[0]=l=>o(se)(l,"150x150"))},null,40,he)),c.value?(p(),h(x,{key:3,icon:"feather:arrow-left",class:"edit-button is-back",circle:"",tabindex:"0",onKeydown:a[3]||(a[3]=P(V(l=>c.value=!1,["prevent"]),["space"])),onClick:a[4]||(a[4]=l=>c.value=!1)})):(p(),h(x,{key:2,icon:"feather:edit-2",class:"edit-button is-edit",circle:"",tabindex:"0",onKeydown:a[1]||(a[1]=P(V(l=>c.value=!0,["prevent"]),["space"])),onClick:a[2]||(a[2]=l=>c.value=!0)}))]),_:1})]),t("div",ge,[ye,t("div",be,[t("div",Ve,[n(v,null,{default:i(()=>[n(f,{icon:"feather:user"},{default:i(()=>[n(_,{type:"text",placeholder:e.$t("First_name"),autocomplete:"given-name",modelValue:o(s).firstname,"onUpdate:modelValue":a[5]||(a[5]=l=>o(s).firstname=l)},null,8,["placeholder","modelValue"]),t("p",$e,d(o(r).firstname[0]),1)]),_:1})]),_:1})]),t("div",we,[n(v,null,{default:i(()=>[n(f,{icon:"feather:user"},{default:i(()=>[n(_,{type:"text",placeholder:e.$t("Last_name"),autocomplete:"family-name",modelValue:o(s).lastname,"onUpdate:modelValue":a[6]||(a[6]=l=>o(s).lastname=l)},null,8,["placeholder","modelValue"]),t("p",ke,d(o(r).lastname[0]),1)]),_:1})]),_:1})]),t("div",xe,[n(v,null,{default:i(()=>[n(f,{icon:"feather:map-pin"},{default:i(()=>[n(_,{type:"text",placeholder:e.$t("Username"),autocomplete:"country-name",modelValue:o(s).username,"onUpdate:modelValue":a[7]||(a[7]=l=>o(s).username=l)},null,8,["placeholder","modelValue"]),t("p",Ue,d(o(r).username[0]),1)]),_:1})]),_:1})]),t("div",Se,[n(v,null,{default:i(()=>[n(f,{icon:"feather:mail"},{default:i(()=>[n(_,{type:"text",placeholder:e.$t("Email"),autocomplete:"organization-title",modelValue:o(s).email,"onUpdate:modelValue":a[8]||(a[8]=l=>o(s).email=l)},null,8,["placeholder","modelValue"]),t("p",Ie,d(o(r).email[0]),1)]),_:1})]),_:1})])])])],40,_e)])}}});const Ce=te(Pe,[["__scopeId","data-v-e5634813"]]),Ne=C({setup(u){const{t:m}=E();return ie().setPageTitle(m("Edit_profile")),ae({title:`${m("Edit_profile")} - Nefrit`}),($,w)=>{const s=Ce;return p(),h(s)}}});export{Ne as default};

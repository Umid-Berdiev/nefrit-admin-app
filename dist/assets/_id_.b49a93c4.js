import{_ as oe}from"./VTabs.vue_vue_type_script_setup_true_lang.9d31ef9c.js";import{_ as ne,a as le}from"./VFlexTable.vue_vue_type_style_index_0_lang.e91991ed.js";import{_ as ie}from"./VFlexPagination.6f519b0d.js";import{_ as G}from"./VTag.vue_vue_type_script_setup_true_lang.eb71c5fe.js";import{_ as ce}from"./StatusTag.vue_vue_type_script_setup_true_lang.412edb66.js";import{_ as de}from"./VPlaceholderSection.vue_vue_type_style_index_0_lang.fc527a37.js";import{A as O,N as Q,$ as re,a as ue,O as T,r as N,f as J,bv as me,q as K,o as i,j as V,s as a,w as o,G as t,m as g,t as l,g as k,p as S,H as _e,bP as pe,B,k as e,x as W,a3 as X,a4 as Z,Q as ee,b as fe,C as be,a5 as he,P as ve}from"./index.bb4908f5.js";import{f as ye,b as ge,a as ke,u as L,v as Ve,c as $e}from"./index.5f8856fe.js";import{_ as we}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang.82e6fa1d.js";import{_ as te}from"./VTextarea.a25adf21.js";import{_ as xe}from"./VBlock.vue_vue_type_style_index_0_lang.95e5660d.js";import{u as Ce}from"./index.2a55e875.js";import{_ as Se}from"./CountrySelect.vue_vue_type_style_index_0_lang.40d94ebb.js";import{_ as Ae}from"./VModal.vue_vue_type_style_index_0_lang.61b38c15.js";import{u as Be}from"./viewWrapper.337e6d03.js";import"./VIcon.vue_vue_type_script_setup_true_lang.654e5aba.js";import"./VFlex.vue_vue_type_style_index_0_lang.2810b5dd.js";import"./VOption.vue_vue_type_style_index_0_lang.98659e9a.js";import"./lodash.e3ec61d9.js";const Ue={key:0,class:"flex-list-inner"},Me={key:0},qe={key:1},Fe=["onClick"],De=O({props:{data:{type:Object,default:()=>({pagination:{},result:[]})}},emits:["update:data"],async setup(D,{emit:f}){let U,x;const $=D,s=Q(),u=re(),{userRoleID:p}=ue(),{t:r,locale:b}=T(),d=N($.data),_=J({get:()=>d.pagination.current_page,set:async h=>{await I(h)}}),M={uuid:{label:r("statement_code")},drug:{label:r("drug_name")},date:{label:r("applied_at")},status:r("Status"),stage:{label:r("Stage"),grow:!0},actions:{label:r("Actions"),align:"center"}},q=s.params?.id??null;[U,x]=me(()=>I()),await U,x();async function I(h=1){const w=await ye(q,h);Object.assign(d,w)}function j(h){const w=pe.gotoStatementPage(h,p);u.push(w)}return(h,w)=>{const Y=de,P=ce,z=G,E=K("VueIconify"),c=ne,n=ie,F=le;return i(),V("div",null,[a(F,{columns:t(M),data:t(d).result,limit:t(d).pagination.per_page,total:t(d).pagination.total},{default:o(H=>[a(c,{rounded:""},{body:o(()=>[t(d).result.length===0?(i(),V("div",Ue,[a(Y,{title:h.$t("No_data"),subtitle:h.$t("There_is_no_data_that_match_your_query"),class:"my-6"},null,8,["title","subtitle"])])):g("",!0)]),"body-cell":o(({row:A,column:v,value:y,index:C})=>[v.key==="drug"?(i(),V("span",Me,l(y.name),1)):v.key==="date"?(i(),V("span",qe,l(h.$h.formatDate(y,"HH:mm DD.MM.YYYY")),1)):v.key==="status"?(i(),k(P,{key:2,status:y},null,8,["status"])):v.key==="stage"?(i(),k(z,{key:3,class:"is-size-6",rounded:"",color:"info"},{default:o(()=>[S(l(y.name),1)]),_:2},1024)):v.key==="actions"?(i(),V("a",{key:4,href:"javascript:;",onClick:R=>j(A.id)},[a(E,{icon:"feather:eye",class:"has-text-primary",height:"1.5rem"})],8,Fe)):g("",!0)]),_:1}),t(d).result?.length?(i(),k(n,{key:0,class:"mt-6","current-page":t(_),"onUpdate:current-page":w[0]||(w[0]=A=>_e(_)?_.value=A:null),"item-per-page":t(d).pagination.per_page,"total-items":t(d).pagination.total},null,8,["current-page","item-per-page","total-items"])):g("",!0)]),_:1},8,["columns","data","limit","total"])])}}}),Ie=["onSubmit"],je={class:"columns is-multiline"},Ne={class:"column is-12"},Oe={class:"help has-text-danger"},Te=O({props:{modelValue:Boolean,itemId:{type:Number,default:null}},emits:["update:modelValue","update:list"],setup(D,{emit:f}){const U=D,{t:x}=T();let $=B(x("Block_applicant"));const s=B(""),u=N({block_reason:""});async function p(d){try{await ge(U.itemId,{block_reason:s.value}),f("update:list"),r()}catch(_){Object.assign(u,_.response?.data?.errors)}}function r(){s.value="",Object.assign(u,{block_reason:""}),f("update:modelValue",!1)}function b(d){u[d.target.name]=""}return(d,_)=>{const M=te,q=X,I=Z,j=ee,h=Ae;return i(),k(h,{open:D.modelValue,size:"large",title:t($),actions:"right",onClose:r},{content:o(()=>[e("form",{id:"block-applicant-form",class:"modal-form",onSubmit:W(p,["prevent"])},[e("div",je,[e("div",Ne,[a(I,{label:d.$t("block_reason"),required:""},{default:o(()=>[a(q,{"has-error":t(u).block_reason[0]},{default:o(()=>[a(M,{name:"block_reason",placeholder:d.$t("Add_text"),modelValue:s.value,"onUpdate:modelValue":_[0]||(_[0]=w=>s.value=w),onInput:b},null,8,["placeholder","modelValue"]),e("p",Oe,l(t(u).block_reason[0]),1)]),_:1},8,["has-error"])]),_:1},8,["label"])])])],40,Ie)]),action:o(({close:w})=>[a(j,{color:"danger",outlined:"",type:"submit",form:"block-applicant-form"},{default:o(()=>[S(l(d.$t("Block")),1)]),_:1})]),_:1},8,["open","title"])}}}),Ye={class:"form-layout is-separate"},Pe={class:"form-outer"},ze={class:"form-body"},Ee=["onSubmit"],We={class:"form-section-inner has-padding-bottom"},He={class:"has-text-centered"},Re={class:"columns is-multiline"},Le={class:"column is-12 mb-3"},Ge={class:"help has-text-danger"},Qe={class:"column is-12 mb-3"},Je={class:"help has-text-danger"},Ke={class:"column is-12 mb-3"},Xe={class:"help has-text-danger"},Ze={class:"column is-12 mb-3"},et={class:"help has-text-danger"},tt={class:"column is-12 is-flex"},st=["onSubmit"],at={class:"form-section-inner has-padding-bottom"},ot={class:"has-text-centered"},nt={class:"columns is-multiline"},lt={class:"column is-12 mb-3"},it={class:"help has-text-danger"},ct={class:"column is-6 mb-3"},dt={class:"help has-text-danger"},rt={class:"column is-6 mb-3"},ut={class:"column is-6 mb-3"},mt={class:"column is-12 mb-3"},_t={class:"help has-text-danger"},pt=e("div",{class:"column is-12"},null,-1),ft={class:"column is-12 is-flex"},bt={class:"form-section"},ht={class:"form-section-inner has-padding-bottom"},vt={class:"has-text-centered"},yt={class:"columns is-multiline"},gt={class:"column is-12 mb-3"},kt={class:"table is-hoverable is-bordered is-fullwidth"},Vt={key:0},$t={class:"has-text-weight-bold"},wt={class:"name dark-inverted"},xt={key:1},Ct={class:"has-text-weight-bold"},St={class:"name dark-inverted"},At=["textContent"],Bt={key:2},Ut={class:"has-text-weight-bold"},Mt={class:"name dark-inverted"},qt=["textContent"],Ft={key:3},Dt={class:"has-text-weight-bold"},It={class:"name dark-inverted"},jt=["textContent"],Nt=O({setup(D){const{t:f}=T(),U=Q(),x=Ce(),$=U.params?.id??"",s=N({}),u=B(!1),p=B(!1),r=N({boss_name:"",phone:"",fax:"",website:"",email:"",name:"",country:"",address:"",is_national:""}),b=B(!1),d=fe(),_=B(!1),M=B(Function);be(async()=>{await q()});async function q(){const c=await ke(Number($));Object.assign(s,c)}async function I(c){try{b.value=!0;const n=await L(Number($),s);Object.assign(s,n),u.value=!1,d.dismissAll(),d.success(f("Updated_successfully"))}catch(n){Object.assign(r,n.response?.data?.errors)}finally{b.value=!1}}async function j(c){try{b.value=!0;const n=await L(Number($),s);Object.assign(s,n),p.value=!1,d.dismissAll(),d.success(f("Updated_successfully"))}catch(n){Object.assign(r,n.response?.data?.errors)}finally{b.value=!1}}async function h(){await M.value(Number($)),await q()}async function w(){M.value=Ve,x.$patch({confirmModalState:!0,confirmModalOkButtonColor:"success"})}function Y(){u.value=!u.value}function P(){p.value=!p.value}function z(){_.value=!0}async function E(){M.value=$e,x.$patch({confirmModalState:!0,confirmModalOkButtonColor:"success"})}return(c,n)=>{const F=ee,H=xe,A=K("VueIconify"),v=he,y=X,C=Z,R=te,se=G,ae=we;return i(),V("div",null,[e("div",Ye,[a(H,{title:"",center:""},{action:o(()=>[t(s).blocked_at?g("",!0):(i(),k(F,{key:0,type:"button",class:"mr-3",outlined:"",color:"danger",icon:"fas fa-ban",onClick:z},{default:o(()=>[S(l(c.$t("Block")),1)]),_:1})),t(s).blocked_at?(i(),k(F,{key:1,type:"button",class:"mr-3",outlined:"",color:"warning",icon:"fas fa-ban",onClick:E},{default:o(()=>[S(l(c.$t("Unblock")),1)]),_:1})):g("",!0),t(s).verified_at?g("",!0):(i(),k(F,{key:2,type:"button",class:"mr-3",outlined:"",color:"primary",icon:"fas fa-check-double",onClick:w},{default:o(()=>[S(l(c.$t("Verify")),1)]),_:1}))]),_:1}),e("div",Pe,[e("div",ze,[e("form",{id:"first-block-form",class:"form-section",onSubmit:W(I,["prevent"])},[e("div",We,[e("h3",He,[S(l(t(f)("Applicant_details"))+" ",1),e("a",{href:"javascript:;",onClick:Y,class:"edit-btn ml-5"},[u.value?(i(),k(A,{key:1,icon:"feather:x"})):(i(),k(A,{key:0,icon:"feather:edit-2"}))])]),e("div",Re,[e("div",Le,[a(C,{required:"",label:c.$t("Boss_name")},{default:o(()=>[a(y,{icon:"feather:user"},{default:o(()=>[a(v,{disabled:!u.value,type:"text",name:"boss_name",modelValue:t(s).boss_name,"onUpdate:modelValue":n[0]||(n[0]=m=>t(s).boss_name=m),placeholder:"",autocomplete:"boss-name"},null,8,["disabled","modelValue"]),e("p",Ge,l(t(r).boss_name[0]),1)]),_:1})]),_:1},8,["label"])]),e("div",Qe,[a(C,{required:"",label:c.$t("Applicant_phone_number")},{default:o(()=>[a(y,{icon:"feather:phone",required:""},{default:o(()=>[a(v,{disabled:!u.value,type:"tel",name:"phone",modelValue:t(s).phone,"onUpdate:modelValue":n[1]||(n[1]=m=>t(s).phone=m),autocomplete:"applicant-name"},null,8,["disabled","modelValue"]),e("p",Je,l(t(r).phone[0]),1)]),_:1})]),_:1},8,["label"])]),e("div",Ke,[a(C,{required:"",label:c.$t("Website")},{default:o(()=>[a(y,{icon:"feather:globe",required:""},{default:o(()=>[a(v,{disabled:!u.value,type:"text",name:"website",modelValue:t(s).website,"onUpdate:modelValue":n[2]||(n[2]=m=>t(s).website=m),autocomplete:"website-name"},null,8,["disabled","modelValue"]),e("p",Xe,l(t(r).website[0]),1)]),_:1})]),_:1},8,["label"])]),e("div",Ze,[a(C,{required:"",label:c.$t("Email_address")},{default:o(()=>[a(y,{icon:"feather:mail",required:""},{default:o(()=>[a(v,{disabled:!u.value,type:"email",name:"email",modelValue:t(s).email,"onUpdate:modelValue":n[3]||(n[3]=m=>t(s).email=m),autocomplete:"email",inputmode:"email"},null,8,["disabled","modelValue"]),e("p",et,l(t(r).email[0]),1)]),_:1})]),_:1},8,["label"])]),e("div",tt,[u.value?(i(),k(F,{key:0,loading:b.value,class:"ml-auto",outlined:"",color:"success",icon:"fas fa-save",type:"submit",form:"first-block-form",disabled:b.value},{default:o(()=>[S(l(c.$t("Save")),1)]),_:1},8,["loading","disabled"])):g("",!0)])])])],40,Ee),e("form",{id:"second-block-form",class:"form-section",onSubmit:W(j,["prevent"])},[e("div",at,[e("h3",ot,[S(l(t(f)("Company_information"))+" ",1),e("a",{href:"javascript:;",onClick:P,class:"edit-btn ml-5"},[p.value?(i(),k(A,{key:1,icon:"feather:x"})):(i(),k(A,{key:0,icon:"feather:edit-2"}))])]),e("div",nt,[e("div",lt,[a(C,{required:"",label:c.$t("Company_name")},{default:o(()=>[a(y,{icon:"feather:briefcase",required:""},{default:o(()=>[a(v,{disabled:!p.value,modelValue:t(s).name,"onUpdate:modelValue":n[4]||(n[4]=m=>t(s).name=m),autocomplete:"company_name"},null,8,["disabled","modelValue"]),e("p",it,l(t(r).name[0]),1)]),_:1})]),_:1},8,["label"])]),e("div",ct,[a(C,{label:c.$t("Company_fax")},{default:o(()=>[a(y,{icon:"feather:printer",required:""},{default:o(()=>[a(v,{disabled:!p.value,modelValue:t(s).fax,"onUpdate:modelValue":n[5]||(n[5]=m=>t(s).fax=m),autocomplete:"tel",inputmode:"tel"},null,8,["disabled","modelValue"]),e("p",dt,l(t(r).fax[0]),1)]),_:1})]),_:1},8,["label"])]),e("div",rt,[a(Se,{disabled:!p.value,modelValue:t(s).country_id,"onUpdate:modelValue":n[6]||(n[6]=m=>t(s).country_id=m),required:""},null,8,["disabled","modelValue"])]),e("div",ut,[a(C,{label:c.$t("stir")},{default:o(()=>[a(y,{icon:"fas fa-hashtag"},{default:o(()=>[a(v,{disabled:"",value:t(s).inn},null,8,["value"])]),_:1})]),_:1},8,["label"])]),e("div",mt,[a(C,{required:"",label:c.$t("Address")},{default:o(()=>[a(y,null,{default:o(()=>[a(R,{modelValue:t(s).address,"onUpdate:modelValue":n[7]||(n[7]=m=>t(s).address=m),rows:2,disabled:!p.value},null,8,["modelValue","disabled"]),e("p",_t,l(t(r).address[0]),1)]),_:1})]),_:1},8,["label"])]),pt,e("div",ft,[p.value?(i(),k(F,{key:0,loading:b.value,class:"ml-auto",outlined:"",color:"success",icon:"fas fa-save",type:"submit",form:"second-block-form",disabled:b.value},{default:o(()=>[S(l(c.$t("Save")),1)]),_:1},8,["loading","disabled"])):g("",!0)])])])],40,st),e("div",bt,[e("div",ht,[e("h3",vt,l(t(f)("Applicant_status")),1),e("div",yt,[e("div",gt,[e("table",kt,[e("tbody",null,[t(s).status?(i(),V("tr",Vt,[e("td",$t,[e("div",wt,l(c.$t("Status")),1)]),e("td",null,[a(se,{color:t(s).status.color,rounded:"",textContent:l(t(s).status?.name)},null,8,["color","textContent"])])])):g("",!0),t(s).verified_at?(i(),V("tr",xt,[e("td",Ct,[e("div",St,l(c.$t("verified_at")),1)]),e("td",null,[e("span",{class:"has-text-primary is-size-6",textContent:l(c.$h.formatDate(t(s).verified_at,"DD.MM.YYYY"))},null,8,At)])])):g("",!0),t(s).block_reason?(i(),V("tr",Bt,[e("td",Ut,[e("div",Mt,l(c.$t("block_reason")),1)]),e("td",null,[e("span",{color:"danger is-size-6",textContent:l(t(s).block_reason)},null,8,qt)])])):g("",!0),t(s).blocked_at?(i(),V("tr",Ft,[e("td",Dt,[e("div",It,l(c.$t("blocked_at")),1)]),e("td",null,[e("span",{class:"has-text-danger is-size-6",textContent:l(c.$h.formatDate(t(s).blocked_at,"DD.MM.YYYY"))},null,8,jt)])])):g("",!0)])])])])])])])])]),a(ae,{onConfirmAction:h}),a(Te,{modelValue:_.value,"onUpdate:modelValue":n[8]||(n[8]=m=>_.value=m),"item-id":Number(t($)),"onUpdate:list":q},null,8,["modelValue","item-id"])])}}});const Ot={class:"applicant-detail-wrapper"},Tt={key:0,class:"mt-5"},Yt={key:1,class:"mt-5"},ls=O({setup(D){const{t:f,locale:U}=T(),x=B(),$=N([{label:f("Applicant_details"),value:"details",icon:"feather:info"},{label:f("Statements"),value:"statements",icon:"feather:file-text"}]);return Be().setPageTitle(f("Applicant_Info")),ve({title:J(()=>x.value?.title??"Loading applicant...")}),(u,p)=>{const r=Nt,b=De,d=oe;return i(),V("div",Ot,[a(d,{selected:"details",tabs:t($)},{tab:o(({activeValue:_})=>[_==="details"?(i(),V("div",Tt,[a(r)])):_==="statements"?(i(),V("div",Yt,[a(b)])):g("",!0)]),_:1},8,["tabs"])])}}});export{ls as default};

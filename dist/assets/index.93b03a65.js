import{_ as X,a as Z}from"./VFlexTable.vue_vue_type_style_index_0_lang.17f75b6f.js";import{_ as ee}from"./VFlexPagination.7e70ebda.js";import{_ as te}from"./ApplicantFlexTableDropdown.vue_vue_type_script_setup_true_lang.c3d4b139.js";import{_ as ae}from"./StatusTag.vue_vue_type_script_setup_true_lang.90c589be.js";import{_ as oe}from"./VPlaceholderSection.vue_vue_type_style_index_0_lang.8c9081fa.js";import{_ as se}from"./VCard.vue_vue_type_script_setup_true_lang.c650e6ea.js";import{_ as ne}from"./VFlex.vue_vue_type_style_index_0_lang.b35cbeb0.js";import{_ as le}from"./VFlexItem.vue_vue_type_style_index_0_lang.eda1fd40.js";import{z as ie,N as re,$ as ce,O as ue,b as _e,r as T,A as V,e as me,bx as pe,B as de,o as _,i as y,q as a,Y as fe,bO as be,j as m,w as s,t as d,E as t,v as ye,m as E,l as p,f as x,G as ge,a3 as he,a1 as we,a2 as ve,P as Ve}from"./index.1658e387.js";import{_ as xe}from"./CountrySelect.vue_vue_type_style_index_0_lang.c1fedfc9.js";import{_ as ke}from"./StatusSelect.vue_vue_type_script_setup_true_lang.79aa3da7.js";import{_ as $e}from"./TableActionsBlock.vue_vue_type_style_index_0_lang.25b1cc1e.js";import{u as Fe}from"./viewWrapper.1ab7734d.js";import{d as Ce,e as U,g as Se}from"./index.a37f95fc.js";import"./VDropdown.vue_vue_type_style_index_0_lang.ca82b83f.js";import"./VIcon.vue_vue_type_script_setup_true_lang.e3275797.js";import"./VTag.vue_vue_type_style_index_0_lang.6ab5950f.js";import"./VOption.vue_vue_type_style_index_0_lang.3c6b7c37.js";import"./lodash.bd34ba7d.js";import"./VButtons.vue_vue_type_script_setup_true_lang.d259b1a3.js";const Ae={class:"applicant-list-wrapper"},Ne={class:"mb-5"},Be={class:"title is-5 mb-2"},Te=["onSubmit"],Ee={class:"columns is-desktop"},Ue={class:"column"},je={class:"column"},Le={class:"column"},Oe={class:"column"},Pe=["textContent"],De={key:0,class:"flex-list-inner"},We={key:0,style:{"overflow-wrap":"break-word"}},Re={key:2},pt=ie({async setup(Ie){let k,$;const{t:n,locale:qe}=re(),j=ce();ue({title:n("Applicants")+" - Nefrit"});const L=_e();Fe().setPageTitle(n("Applicants_List"));const i=T({pagination:{current_page:1,per_page:10,total:10},result:[]}),l=T({name:"",boss_name:"",country_id:"",status_id:""}),c=V(!1),h=V(!1),w=me({get:()=>i.pagination.current_page,set:async e=>{await v(e)}}),F=V([]),O={orderNumber:{format:(e,o,u)=>`${u+1}`,cellClass:"is-flex-grow-0"},name:{label:n("Applicant_name"),grow:!0,searchable:!0},boss_name:{label:n("Boss_name"),searchable:!0},phone:{label:n("Phone_number"),searchable:!0},status:{label:n("Status"),searchable:!0},country:{label:n("Country")},actions:{label:n("Actions"),align:"center"}};[k,$]=pe(()=>v()),await k,$(),de(async()=>{const e=await Ce();F.value=e});function P(e){j.push("/app/applicants/"+e)}async function v(e=1){const o=await U(e);Object.assign(i,o)}async function D(){try{c.value=!0;const e=await U({page:1,...l});Object.assign(i,e)}catch(e){L.error("Error while fetching filtered data: ",e.message)}finally{c.value=!1}}async function W(){c.value=!0,Object.assign(l,{name:"",boss_name:"",country_id:"",status_id:""}),await v(),c.value=!1}async function R(){try{c.value=!0;const e=await Se(l),o=URL.createObjectURL(new Blob([e],{type:"application/vnd.ms-excel"})),u=document.createElement("a");u.href=o,u.setAttribute("download",`Worksheet_${Date.now()}.xlsx`),document.body.appendChild(u),u.click()}catch(e){console.log({error:e})}finally{c.value=!1}}return(e,o)=>{const u=$e,C=he,S=we,A=ve,I=ke,q=xe,N=Ve,B=le,M=ne,z=se,G=oe,H=ae,Y=te,J=X,K=ee,Q=Z;return _(),y("div",Ae,[a(u,{center:"",title:"","add-disabled":"","remove-disabled":"",onFilter:o[0]||(o[0]=r=>h.value=!h.value),onExport:R}),fe(m("div",Ne,[a(z,{radius:"small"},{default:s(()=>[m("h3",Be,d(t(n)("Filter_form")),1),m("form",{onSubmit:ye(D,["prevent"])},[m("div",Ee,[m("div",Ue,[a(A,{label:e.$t("Name")},{default:s(()=>[a(S,null,{default:s(()=>[a(C,{modelValue:t(l).name,"onUpdate:modelValue":o[1]||(o[1]=r=>t(l).name=r),type:"text"},null,8,["modelValue"])]),_:1})]),_:1},8,["label"])]),m("div",je,[a(A,{label:e.$t("Boss_name")},{default:s(()=>[a(S,null,{default:s(()=>[a(C,{modelValue:t(l).boss_name,"onUpdate:modelValue":o[2]||(o[2]=r=>t(l).boss_name=r),type:"text"},null,8,["modelValue"])]),_:1})]),_:1},8,["label"])]),m("div",Le,[a(I,{modelValue:t(l).status_id,"onUpdate:modelValue":o[3]||(o[3]=r=>t(l).status_id=r),list:F.value},null,8,["modelValue","list"])]),m("div",Oe,[a(q,{modelValue:t(l).country_id,"onUpdate:modelValue":o[4]||(o[4]=r=>t(l).country_id=r)},null,8,["modelValue"])])]),a(M,{"justify-content":"end","column-gap":"1rem"},{default:s(()=>[a(B,null,{default:s(()=>[a(N,{type:"button",disabled:c.value,outlined:"",color:"warning",icon:"feather:x",onClick:W},{default:s(()=>[E(d(t(n)("Clear")),1)]),_:1},8,["disabled"])]),_:1}),a(B,null,{default:s(()=>[a(N,{type:"submit",disabled:c.value,outlined:"",color:"success",icon:"feather:filter"},{default:s(()=>[E(d(t(n)("Filter")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})],40,Te)]),_:1})],512),[[be,h.value]]),a(Q,{columns:t(O),data:t(i).result,limit:t(i).pagination.per_page,total:t(i).pagination.total},{default:s(r=>[a(J,{rounded:""},{"header-column":s(({column:f})=>[f.key==="orderNumber"?(_(),y("span",{key:0,class:"is-flex-grow-0",textContent:d("#")},null,8,Pe)):p("",!0)]),body:s(()=>[t(i).result.length===0?(_(),y("div",De,[a(G,{title:e.$t("No_data"),subtitle:e.$t("There_is_no_data_that_match_your_query"),class:"my-6"},null,8,["title","subtitle"])])):p("",!0)]),"body-cell":s(({row:f,column:g,value:b,index:ze})=>[g.key==="name"?(_(),y("p",We,d(b),1)):p("",!0),g.key==="status"&&b?(_(),x(H,{key:1,status:b},null,8,["status"])):p("",!0),g.key==="country"&&b?(_(),y("span",Re,d(b.name),1)):p("",!0),g.key==="actions"?(_(),x(Y,{key:3,onView:Ge=>P(f.id)},null,8,["onView"])):p("",!0)]),_:1}),t(i).result.length?(_(),x(K,{key:0,"current-page":t(w),"onUpdate:current-page":o[5]||(o[5]=f=>ge(w)?w.value=f:null),class:"mt-6","item-per-page":t(i).pagination.per_page,"total-items":t(i).pagination.total},null,8,["current-page","item-per-page","total-items"])):p("",!0)]),_:1},8,["columns","data","limit","total"])])}}});export{pt as default};

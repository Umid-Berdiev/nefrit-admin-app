import{d as t,a as u,b as n,S as c}from"./index.e9599081.js";const g=t(({router:i,api:f,pinia:a})=>{i.beforeEach(async(e,o)=>{const r=u(a),s=n();if(o===c&&r.isLoggedIn)try{r.fetchProfile()}catch{if(r.logoutUser(),s.error("Your session is invalid"),e.meta.requiresAuth)return{name:"auth",query:{redirect:e.fullPath}}}else if(e.meta.requiresAuth&&!r.isLoggedIn)return s.error({message:"Sorry, you should loggin to access this section",duration:5e3}),{name:"/",query:{redirect:e.fullPath}}})});export{g as default};

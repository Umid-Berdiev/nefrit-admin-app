import{z as I,V as B,a as L,r as U,A as b,e as S,b as R,bU as T,B as q,o as m,i as P,j as a,t as d,q as n,w as i,m as H,k as Z,E as o,f as h,N as E,v as V,P as G,a3 as J,a1 as Q,a2 as X,Z as Y,$ as ee,M as ae,bP as te}from"./index.47e107ef.js";import{o as se,_ as oe}from"./VAvatar.vue_vue_type_style_index_0_lang.25ceb1a3.js";import{_ as ne}from"./VIconButton.vue_vue_type_script_lang.436b8e7b.js";import{_ as le}from"./VFilePond.vue_vue_type_script_lang.2a9eab5d.js";import{u as ie}from"./viewWrapper.45a25a95.js";const re=p=>(Y("data-v-928fba8a"),p=p(),ee(),p),de={class:"account-box is-form is-footerless"},ce={class:"form-head-inner"},me={class:"left"},pe={class:"right"},ue={class:"buttons"},_e=["onSubmit"],fe={class:"fieldset"},ve={class:"fieldset-heading"},he=["src"],ge={class:"fieldset"},ye=re(()=>a("div",{class:"fieldset-heading"},null,-1)),be={class:"columns is-multiline"},Ve={class:"column is-6"},$e={class:"help has-text-danger"},we={class:"column is-6"},ke={class:"help has-text-danger"},xe={class:"column is-12"},Ue={class:"help has-text-danger"},Se={class:"column is-12"},Pe={class:"help has-text-danger"},Ee=I({setup(p){const{t:u,locale:C}=B(),{user:$,updateProfile:w}=L(),s=U({avatar:"",email:"",firstname:"",lastname:"",username:""}),g=b(),c=b(!1),y=b(!1),r=U({avatar:[],email:[],firstname:[],lastname:[],username:[]}),F=S(()=>s.avatar||"/images/avatars/svg/vuero-1.svg"),k=R(),{y:z}=T();q(()=>{Object.assign(s,$)});const N=S(()=>z.value>30);async function j(){try{O(),y.value=!0;const e=new FormData;e.append("avatar",g.value||""),e.append("username",s.username),e.append("email",s.email),e.append("firstname",s.firstname),e.append("lastname",s.lastname),await w(e),k.success(u("Updated_successfully"))}catch(e){k.error(u("Error_while_updating_data")),Object.assign(r,e.response?.data?.errors)}finally{y.value=!1}}const A=e=>{r.avatar?.length&&(r.avatar=[]),g.value=e.target.files[0]},D=(e,t)=>{if(e){console.error(e);return}g.value=void 0,s.avatar=""};function O(){Object.assign(r,{avatar:[],email:[],firstname:[],lastname:[],username:[]})}return(e,t)=>{const W=G,K=le,x=ne,M=oe,_=J,f=Q,v=X;return m(),P("div",de,[a("div",{class:Z(["form-head stuck-header",[o(N)&&"is-stuck"]])},[a("div",ce,[a("div",me,[a("h3",null,d(e.$t("Personal_Info")),1)]),a("div",pe,[a("div",ue,[n(W,{type:"submit",color:"primary",raised:"",loading:y.value,tabindex:"0",form:"profile-update-form"},{default:i(()=>[H(d(e.$t("Save_changes")),1)]),_:1},8,["loading"])])])])],2),a("form",{id:"profile-update-form",class:"form-body",onSubmit:V(j,["prevent"])},[a("div",fe,[a("div",ve,[a("h4",null,d(e.$t("Profile_Picture")),1),a("p",null,d(e.$t("Update_profile_picture")),1)]),n(M,{size:"xl",class:"profile-v-avatar"},{avatar:i(()=>[c.value?(m(),h(K,{key:1,class:"profile-filepond",name:"profile_filepond","chunk-retry-delays":[500,1e3,3e3],"label-idle":"<i class='lnil lnil-cloud-upload'></i>","accepted-file-types":["image/png","image/jpeg","image/gif"],"image-preview-height":140,"image-resize-target-width":140,"image-resize-target-height":140,"image-crop-aspect-ratio":"1:1","style-panel-layout":"compact circle","style-load-indicator-position":"center bottom","style-progress-indicator-position":"right bottom","style-button-remove-item-position":"left bottom","style-button-process-item-position":"right bottom",onChange:A,onRemovefile:D})):(m(),P("img",{key:0,class:"avatar",src:o(F),alt:"",onErrorOnce:t[0]||(t[0]=l=>o(se)(l,"150x150"))},null,40,he)),c.value?(m(),h(x,{key:3,icon:"feather:arrow-left",class:"edit-button is-back",circle:"",tabindex:"0",onKeydown:t[3]||(t[3]=E(V(l=>c.value=!1,["prevent"]),["space"])),onClick:t[4]||(t[4]=l=>c.value=!1)})):(m(),h(x,{key:2,icon:"feather:edit-2",class:"edit-button is-edit",circle:"",tabindex:"0",onKeydown:t[1]||(t[1]=E(V(l=>c.value=!0,["prevent"]),["space"])),onClick:t[2]||(t[2]=l=>c.value=!0)}))]),_:1})]),a("div",ge,[ye,a("div",be,[a("div",Ve,[n(v,null,{default:i(()=>[n(f,{icon:"feather:user"},{default:i(()=>[n(_,{type:"text",placeholder:e.$t("First_name"),autocomplete:"given-name",modelValue:o(s).firstname,"onUpdate:modelValue":t[5]||(t[5]=l=>o(s).firstname=l)},null,8,["placeholder","modelValue"]),a("p",$e,d(o(r).firstname[0]),1)]),_:1})]),_:1})]),a("div",we,[n(v,null,{default:i(()=>[n(f,{icon:"feather:user"},{default:i(()=>[n(_,{type:"text",placeholder:e.$t("Last_name"),autocomplete:"family-name",modelValue:o(s).lastname,"onUpdate:modelValue":t[6]||(t[6]=l=>o(s).lastname=l)},null,8,["placeholder","modelValue"]),a("p",ke,d(o(r).lastname[0]),1)]),_:1})]),_:1})]),a("div",xe,[n(v,null,{default:i(()=>[n(f,{icon:"feather:map-pin"},{default:i(()=>[n(_,{type:"text",placeholder:e.$t("Username"),autocomplete:"country-name",modelValue:o(s).username,"onUpdate:modelValue":t[7]||(t[7]=l=>o(s).username=l)},null,8,["placeholder","modelValue"]),a("p",Ue,d(o(r).username[0]),1)]),_:1})]),_:1})]),a("div",Se,[n(v,null,{default:i(()=>[n(f,{icon:"feather:mail"},{default:i(()=>[n(_,{type:"text",placeholder:e.$t("Email"),autocomplete:"organization-title",modelValue:o(s).email,"onUpdate:modelValue":t[8]||(t[8]=l=>o(s).email=l)},null,8,["placeholder","modelValue"]),a("p",Pe,d(o(r).email[0]),1)]),_:1})]),_:1})])])])],40,_e)])}}});const Ie=ae(Ee,[["__scopeId","data-v-928fba8a"]]),je=I({setup(p){const{t:u}=B();return ie().setPageTitle(u("Edit_profile")),te({title:`${u("Edit_profile")} - Nefrit`}),($,w)=>{const s=Ie;return m(),h(s)}}});export{je as default};

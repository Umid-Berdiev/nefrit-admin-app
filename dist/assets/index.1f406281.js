import{_ as ce}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang.5d9b4a42.js";import{_ as de}from"./VModal.vue_vue_type_style_index_0_lang.328a1ca3.js";import{z as E,N as G,A as S,r as j,D as me,B as pe,p as _e,o as f,f as N,w as l,j as r,q as a,E as s,t as h,v as M,m as H,a2 as J,a0 as K,a1 as Q,P as X,O as fe,b as ve,e as W,bw as ge,i as T,l as k,G as he,bS as be}from"./index.49148b3c.js";import{f as Ve,a as ye,u as $e,c as Ce,b as we,r as ke}from"./index.ed2021ad.js";import{_ as Ne,a as Se}from"./VFlexTable.vue_vue_type_style_index_0_lang.3d3c5523.js";import{_ as Ie}from"./VFlexPagination.06816b19.js";import{_ as ze}from"./VDropdown.vue_vue_type_style_index_0_lang.7df47a0a.js";import{_ as Fe}from"./VPlaceholderSection.vue_vue_type_style_index_0_lang.d85ce3f3.js";import{_ as Le}from"./VFlexTableToolbar.5dcf669d.js";import{_ as Be}from"./VFlex.vue_vue_type_style_index_0_lang.299bd620.js";import{u as Ae}from"./viewWrapper.e3463906.js";import{u as De}from"./index.e86b94d7.js";import"./VIcon.vue_vue_type_script_setup_true_lang.ba38073c.js";const Me=["onSubmit"],Ue={class:"columns is-multiline"},xe={class:"column is-12"},Oe={class:"help has-text-danger"},Te={class:"column is-12"},je={class:"help has-text-danger"},Ee=E({props:{modelValue:Boolean,departmentId:{type:Number,default:null}},emits:["update:modelValue","update:list"],setup(F,{emit:v}){const m=F,{t:c}=G(),b=S(c("Add")),_=S(!1),L=S([]),I=j({"name.uz":[],"name.en":[],"name.ru":[],stages:[]}),e=j({name:{uz:"",ru:"",en:""},stages:[]});me(()=>m.departmentId,async o=>{if(o){b.value=c("Edit");const i=await Ve(Number(m.departmentId));Object.assign(e,i),Object.assign(e.stages,i.stages.map(({id:g})=>g))}},{deep:!0,immediate:!0}),pe(async()=>{const o=await ye();L.value=o});async function z(o){try{_.value=!0,m.departmentId?await $e(m.departmentId,e):await Ce(e),v("update:list"),V()}catch(i){Object.assign(I,i.response?.data?.errors)}finally{_.value=!1}}function V(){b.value=c("Add"),u(),B(),v("update:modelValue",!1)}function u(){Object.assign(e,{name:{uz:"",ru:"",en:""},stages:[]})}function B(){Object.assign(I,{"name.uz":[],"name.en":[],"name.ru":[],stages:[]})}return(o,i)=>{const g=J,y=K,$=Q,U=_e("Multiselect"),A=X,x=de;return f(),N(x,{open:F.modelValue,size:"large",actions:"right",title:b.value,onClose:i[4]||(i[4]=d=>V())},{content:l(()=>[r("form",{id:"department-form",class:"modal-form",onSubmit:M(z,["prevent"])},[r("div",Ue,[r("div",xe,[a($,{label:o.$t("Name_uz"),required:""},{default:l(()=>[a(y,null,{default:l(()=>[a(g,{name:"name_uz",placeholder:o.$t("Type_name_uz"),modelValue:s(e).name.uz,"onUpdate:modelValue":i[0]||(i[0]=d=>s(e).name.uz=d)},null,8,["placeholder","modelValue"]),r("p",Oe,h(s(I)["name.uz"][0]),1)]),_:1})]),_:1},8,["label"]),a($,{label:o.$t("Name_ru")},{default:l(()=>[a(y,null,{default:l(()=>[a(g,{name:"name_ru",placeholder:o.$t("Type_name_ru"),modelValue:s(e).name.ru,"onUpdate:modelValue":i[1]||(i[1]=d=>s(e).name.ru=d)},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"]),a($,{label:o.$t("Name_en")},{default:l(()=>[a(y,null,{default:l(()=>[a(g,{name:"name_en",placeholder:o.$t("Type_name_en"),modelValue:s(e).name.en,"onUpdate:modelValue":i[2]||(i[2]=d=>s(e).name.en=d)},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"])]),r("div",Te,[a($,{label:o.$t("Stages"),required:""},{default:l(()=>[a(y,null,{default:l(()=>[a(U,{modelValue:s(e).stages,"onUpdate:modelValue":i[3]||(i[3]=d=>s(e).stages=d),searchable:!1,options:L.value,placeholder:o.$t("Select_stages"),valueProp:"id",label:"name",mode:"tags","close-on-select":!1},null,8,["modelValue","options","placeholder"]),r("p",je,h(s(I).stages[0]),1)]),_:1})]),_:1},8,["label"])])])],40,Me)]),action:l(({close:d})=>[a(A,{loading:_.value,color:"primary",outlined:"",type:"submit",form:"department-form",disabled:_.value},{default:l(()=>[H(h(o.$t("Save")),1)]),_:1},8,["loading","disabled"])]),_:1},8,["open","title"])}}}),Re=["onClick"],Pe=r("div",{class:"icon"},[r("i",{class:"iconify","aria-hidden":"true","data-icon":"feather:edit"})],-1),qe={class:"meta"},We=r("hr",{class:"dropdown-divider"},null,-1),Ge=["onClick"],He=r("div",{class:"icon"},[r("i",{class:"iconify","aria-hidden":"true","data-icon":"feather:trash"})],-1),Je={class:"meta"},Ke=E({emits:["edit","remove"],setup(F,{emit:v}){return(m,c)=>{const b=ze;return f(),N(b,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:l(({close:_})=>[r("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:M(()=>{v("edit"),_()},["prevent"])},[Pe,r("div",qe,[r("span",null,h(m.$t("Edit")),1)])],8,Re),We,r("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:M(()=>{v("remove"),_()},["prevent"])},[He,r("div",Je,[r("span",null,h(m.$t("Remove")),1)])],8,Ge)]),_:1})}}}),Qe={class:"applicant-list-wrapper"},Xe=["textContent"],Ye={key:0,class:"flex-list-inner"},_t=E({async setup(F){let v,m;const{t:c,locale:b}=G();fe({title:c("Departments")+" - Nefrit"});const _=ve(),L=De();Ae().setPageTitle(c("Departments_List"));const e=j({pagination:{current_page:1,per_page:10,total:10},result:[]}),z=W({get:()=>e.pagination.current_page,set:async t=>{await D(t)}}),V=S(!1),u=S([]),B=W(()=>e.result.length===u.value.length),o=S(),i=({order:t,a:n,b:C})=>t==="asc"?n.location.localeCompare(C.location):t==="desc"?C.location.localeCompare(n.location):0,g=({searchTerm:t,row:n})=>t?n.name.toLocaleLowerCase().includes(t.toLocaleLowerCase())||n.bio.toLocaleLowerCase().includes(t.toLocaleLowerCase()):!0,y={select:{label:"",cellClass:"is-flex-grow-0"},orderNumber:{format:(t,n,C)=>`${C+1}`,cellClass:"is-flex-grow-0"},name:{label:c("Name"),searchable:!0,sortable:!0,sort:i,filter:g},actions:{label:c("Actions"),align:"center"}};[v,m]=ge(()=>D()),await v,m();function $(){B.value?u.value=[]:u.value=e.map(t=>t.id)}function U(t){u.value.includes(t.id)?u.value=u.value.filter(n=>n!==t.id):u.value=[...u.value,t.id]}function A(t){V.value=!0,o.value=t}async function x(t){o.value=t,L.$patch({confirmModalState:!0})}async function d(){await ke(o.value),await D(),R()}async function D(t=1){const n=await we(t);Object.assign(e,n)}function R(){_.success(c("Success"))}return(t,n)=>{const C=X,Y=Be,Z=J,ee=K,te=Q,ae=Le,P=be,ne=Fe,oe=Ke,le=Ne,se=Ie,ie=Se,re=Ee,ue=ce;return f(),T("div",Qe,[a(Y,{"justify-content":"end",class:"mb-4"},{default:l(()=>[a(C,{outlined:"",rounded:"",color:"info",icon:"feather:plus",onClick:n[0]||(n[0]=M(w=>A(void 0),["prevent"]))},{default:l(()=>[H(h(t.$t("Add")),1)]),_:1})]),_:1}),a(ie,{columns:s(y),data:s(e).result,limit:s(e).pagination.per_page,total:s(e).pagination.total},{default:l(w=>[a(ae,null,{left:l(()=>[a(te,null,{default:l(()=>[a(ee,{icon:"feather:search"},{default:l(()=>[a(Z,{modelValue:w.searchInput,"onUpdate:modelValue":p=>w.searchInput=p,class:"is-rounded",placeholder:s(c)("Search")+"..."},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024)]),_:2},1024)]),_:2},1024),a(le,{rounded:""},{"header-column":l(({column:p})=>[p.key==="select"?(f(),N(P,{key:0,class:"ml-2 mr-3",checked:s(B),name:"all_selected",color:"primary",onClick:$},null,8,["checked"])):k("",!0),p.key==="orderNumber"?(f(),T("span",{key:1,class:"is-flex-grow-0",textContent:h("#")},null,8,Xe)):k("",!0)]),body:l(()=>[s(e).result.length===0?(f(),T("div",Ye,[a(ne,{title:t.$t("No_data"),subtitle:t.$t("There_is_no_data_that_match_your_query"),class:"my-6"},null,8,["title","subtitle"])])):k("",!0)]),"body-cell":l(({row:p,column:q,value:Ze,index:et})=>[q.key==="select"?(f(),N(P,{key:0,modelValue:u.value,"onUpdate:modelValue":n[1]||(n[1]=O=>u.value=O),value:p.id,name:"selection",onChange:U},null,8,["modelValue","value"])):k("",!0),q.key==="actions"?(f(),N(oe,{key:1,onEdit:O=>A(p.id),onRemove:O=>x(p.id)},null,8,["onEdit","onRemove"])):k("",!0)]),_:1}),s(e).result.length?(f(),N(se,{key:0,"current-page":s(z),"onUpdate:current-page":n[2]||(n[2]=p=>he(z)?z.value=p:null),class:"mt-6","item-per-page":s(e).pagination.per_page,"total-items":s(e).pagination.total},null,8,["current-page","item-per-page","total-items"])):k("",!0)]),_:1},8,["columns","data","limit","total"]),a(re,{modelValue:V.value,"onUpdate:modelValue":n[3]||(n[3]=w=>V.value=w),"department-id":o.value,"onUpdate:list":n[4]||(n[4]=()=>{D(),R(),o.value=void 0}),onClose:n[5]||(n[5]=w=>o.value=void 0)},null,8,["modelValue","department-id"]),a(ue,{onConfirmAction:d})])}}});export{_t as default};

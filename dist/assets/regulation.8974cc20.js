import{_ as ee}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang.29e0a485.js";import{_ as te}from"./VModal.vue_vue_type_style_index_0_lang.12005a08.js";import{ae,z as q,N as H,A as V,r as F,D as oe,p as G,o as m,f as N,w as l,j as n,q as t,i as b,E as o,t as f,l as w,x as ne,bo as le,v as E,m as Q,a0 as se,a1 as ie,a2 as re,P as J,bd as de,bb as ue,Q as ce,O as pe,b as _e,e as me,bw as fe,G as ve}from"./index.7451cb43.js";import{_ as ge}from"./VTabs.vue_vue_type_script_setup_true_lang.0effc2d3.js";import{_ as j}from"./VTextarea.a59ed169.js";import{_ as he,a as ye}from"./VFlexTable.vue_vue_type_style_index_0_lang.781deb8e.js";import{_ as be}from"./VFlexPagination.56e63a91.js";import{_ as $e}from"./VDropdown.vue_vue_type_style_index_0_lang.687dcae3.js";import{_ as we}from"./VPlaceholderSection.vue_vue_type_style_index_0_lang.1e16cf16.js";import{_ as Ve}from"./VFlex.vue_vue_type_style_index_0_lang.8ae0fb36.js";import{u as ke}from"./viewWrapper.84d1ed6a.js";import{u as De}from"./index.dd0a2791.js";import"./VIcon.vue_vue_type_script_setup_true_lang.346ab3e2.js";const T=ae();async function Ce(i){try{const{data:a}=await T({url:`/api/admin/regulation?page=${i}`});return a.data}catch(a){throw a}}async function ze(i){try{const{data:a}=await T({url:`/api/admin/regulation/${i}`});return a.data}catch(a){throw a}}async function Ie(i){try{const{data:a}=await T({url:"/api/admin/regulation",method:"POST",data:i});return a.data}catch(a){throw a}}async function Te(i,a){try{const{data:u}=await T({url:`/api/admin/regulation/${i}`,method:"POST",data:a});return u.data}catch(u){throw u}}async function Se(i){try{const{data:a}=await T({url:`/api/admin/regulation/${i}`,method:"DELETE"});return a.data}catch(a){throw a}}const L=i=>(de("data-v-e6add9c8"),i=i(),ue(),i),Me=["onSubmit"],Fe={key:0,class:"columns is-multiline pt-5"},Ne={class:"column is-12"},Ee={class:"help has-text-danger"},Re={key:1,class:"columns is-multiline pt-5"},Ye={class:"column is-12"},xe={key:2,class:"columns is-multiline pt-5"},Pe={class:"column is-12"},Ae=L(()=>n("div",{class:"is-divider"},null,-1)),Be={class:"file has-name"},Ue={class:"file-label"},Oe={class:"file-cta"},je=L(()=>n("span",{class:"file-icon"},[n("i",{class:"fas fa-cloud-upload-alt"})],-1)),qe={class:"file-label"},Le={key:0,class:"file-name light-text"},We={class:"help has-text-danger"},He=L(()=>n("div",{class:"is-divider"},null,-1)),Ge={class:"help has-text-danger"},Qe=q({props:{modelValue:Boolean,regulationId:{type:Number,default:null}},emits:["update:modelValue","update:list"],setup(i,{emit:a}){const u=i,{t:c,locale:S}=H(),$=V(c("Add")),y=V(!1),k=V(),p=V(""),r=F({title:{uz:"",ru:"",en:""},date:new Date,file:""}),z=F({type:"string",mask:"YYYY-MM-DD"}),_=F({"title.uz":[],"title.en":[],"title.ru":[],date:[],file:[]});oe(()=>u.regulationId,async d=>{if(d){$.value=c("Edit");const e=await ze(Number(u.regulationId));Object.assign(r,e),p.value=e.file}},{deep:!0,immediate:!0});async function R(d){try{y.value=!0;const e=new FormData;e.append("date",r.date),e.append("file",k.value??""),e.append("title[uz]",r.title.uz),e.append("title[ru]",r.title.ru),e.append("title[en]",r.title.en),u.regulationId?await Te(u.regulationId,e):await Ie(e),a("update:list"),I()}catch(e){Object.assign(_,e.response?.data?.errors)}finally{y.value=!1}}function I(){$.value=c("Add"),Y(),x(),a("update:modelValue",!1)}function Y(){Object.assign(r,{title:{uz:"",ru:"",en:""},date:new Date,file:""}),p.value="",k.value=void 0}function x(){Object.assign(_,{"title.uz":[],"title.en":[],"title.ru":[],date:[],file:[]})}function D(d){_.file=[];const e=d.target;k.value=e.files?e.files[0]:void 0}return(d,e)=>{const s=se,v=ie,P=ge,A=re,B=G("VDatePicker"),U=J,O=te;return m(),N(O,{open:i.modelValue,size:"large",title:$.value,actions:"right",onClose:I},{content:l(()=>[n("form",{id:"role-form",class:"modal-form",onSubmit:E(R,["prevent"])},[t(P,{type:"boxed",selected:"uz",tabs:[{label:d.$t("Uzbek"),value:"uz"},{label:d.$t("Russian"),value:"ru"},{label:d.$t("English"),value:"en"}]},{tab:l(({activeValue:g})=>[g==="uz"?(m(),b("div",Fe,[n("div",Ne,[t(v,{label:d.$t("Title_uz"),required:""},{default:l(()=>[t(s,null,{default:l(()=>[t(j,{placeholder:o(c)("Type_title_uz"),modelValue:o(r).title.uz,"onUpdate:modelValue":e[0]||(e[0]=h=>o(r).title.uz=h),rows:3,onInput:e[1]||(e[1]=h=>o(_)["title.uz"]=[])},null,8,["placeholder","modelValue"]),n("p",Ee,f(o(_)["title.uz"][0]),1)]),_:1})]),_:1},8,["label"])])])):g==="ru"?(m(),b("div",Re,[n("div",Ye,[t(v,{label:d.$t("Title_ru")},{default:l(()=>[t(s,null,{default:l(()=>[t(j,{placeholder:o(c)("Type_title_ru"),modelValue:o(r).title.ru,"onUpdate:modelValue":e[2]||(e[2]=h=>o(r).title.ru=h),rows:3},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"])])])):g==="en"?(m(),b("div",xe,[n("div",Pe,[t(v,{label:d.$t("Title_en")},{default:l(()=>[t(s,null,{default:l(()=>[t(j,{placeholder:o(c)("Type_title_en"),modelValue:o(r).title.en,"onUpdate:modelValue":e[3]||(e[3]=h=>o(r).title.en=h),rows:3},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"])])])):w("",!0)]),_:1},8,["tabs"]),Ae,t(v,{grouped:""},{default:l(()=>[t(s,null,{default:l(()=>[n("div",Be,[n("label",Ue,[n("input",{class:"file-input",type:"file",name:"file",onChange:D},null,32),n("span",Oe,[je,n("span",qe,f(d.$t("Choose_a_file")),1)]),k.value||p.value?(m(),b("span",Le,f(k.value?.name??p.value),1)):w("",!0)])]),n("p",We,f(o(_).file[0]),1)]),_:1})]),_:1}),He,t(v,{grouped:""},{default:l(()=>[t(B,{modelValue:o(r).date,"onUpdate:modelValue":e[4]||(e[4]=g=>o(r).date=g),mode:"date","model-config":o(z),masks:{input:["DD.MM.YYYY"]}},{default:l(({inputValue:g,inputEvents:h})=>[t(v,{label:d.$t("Date")},{default:l(()=>[t(s,{icon:"feather:calendar"},{default:l(()=>[t(A,ne({value:g},le(h)),null,16,["value"]),n("p",Ge,f(o(_).date[0]),1)]),_:2},1024)]),_:2},1032,["label"])]),_:1},8,["modelValue","model-config","masks"])]),_:1})],40,Me)]),action:l(({close:g})=>[t(U,{loading:y.value,color:"primary",outlined:"",type:"submit",form:"role-form",disabled:y.value},{default:l(()=>[Q(f(d.$t("Save")),1)]),_:1},8,["loading","disabled"])]),_:1},8,["open","title"])}}});const Je=ce(Qe,[["__scopeId","data-v-e6add9c8"]]),Ke=["onClick"],Xe={class:"icon"},Ze={class:"meta"},et=n("hr",{class:"dropdown-divider"},null,-1),tt=["onClick"],at={class:"icon"},ot={class:"meta"},nt=q({emits:["edit","remove"],setup(i,{emit:a}){return(u,c)=>{const S=G("VueIconify"),$=$e;return m(),N($,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:l(({close:y})=>[n("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:E(()=>{a("edit"),y()},["prevent"])},[n("div",Xe,[t(S,{icon:"feather:edit-2"})]),n("div",Ze,[n("span",null,f(u.$t("Edit")),1)])],8,Ke),et,n("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:E(()=>{a("remove"),y()},["prevent"])},[n("div",at,[t(S,{icon:"feather:trash"})]),n("div",ot,[n("span",null,f(u.$t("Remove")),1)])],8,tt)]),_:1})}}}),lt={class:"faq-list-wrapper"},st=["textContent"],it={key:0,class:"flex-list-inner"},rt={key:0},Vt=q({async setup(i){let a,u;const{t:c,locale:S}=H();pe({title:c("Regulation")+" - Nefrit"});const $=_e(),y=De();ke().setPageTitle(c("Regulation_List"));const p=F({pagination:{current_page:1,per_page:10,total:10},result:[]}),r=me({get:()=>p.pagination.current_page,set:async e=>{await D(e)}}),z=V(!1),_=V(),R={orderNumber:{format:(e,s,v)=>`${v+1}`,cellClass:"is-flex-grow-0"},title:{label:c("Title")},date:{label:c("Date")},actions:{label:c("Actions"),align:"center"}};V(),[a,u]=fe(()=>D()),await a,u();function I(e=void 0){z.value=!0,_.value=e}async function Y(e){_.value=e,y.$patch({confirmModalState:!0})}async function x(){await Se(_.value),await D(),d()}async function D(e=1){const s=await Ce(e);Object.assign(p,s)}function d(){$.success(c("Success"))}return(e,s)=>{const v=J,P=Ve,A=we,B=nt,U=he,O=be,g=ye,h=Je,K=ee;return m(),b("div",lt,[t(P,{"justify-content":"end",class:"mb-4"},{default:l(()=>[t(v,{outlined:"",rounded:"",color:"info",icon:"feather:plus",onClick:s[0]||(s[0]=E(M=>I(),["prevent"]))},{default:l(()=>[Q(f(e.$t("Add")),1)]),_:1})]),_:1}),t(g,{columns:o(R),data:o(p).result,limit:o(p).pagination.per_page,total:o(p).pagination.total},{default:l(M=>[t(U,{rounded:""},{"header-column":l(({column:C})=>[C.key==="orderNumber"?(m(),b("span",{key:0,class:"is-flex-grow-0",textContent:f("#")},null,8,st)):w("",!0)]),body:l(()=>[o(p).result.length===0?(m(),b("div",it,[t(A,{title:e.$t("No_data"),subtitle:e.$t("There_is_no_data_that_match_your_query"),class:"my-6"},null,8,["title","subtitle"])])):w("",!0)]),"body-cell":l(({row:C,column:W,value:X,index:dt})=>[W.key==="date"?(m(),b("span",rt,f(e.$h.formatDate(X,"DD.MM.YYYY")),1)):w("",!0),W.key==="actions"?(m(),N(B,{key:1,onEdit:Z=>I(C.id),onRemove:Z=>Y(C.id)},null,8,["onEdit","onRemove"])):w("",!0)]),_:1}),o(p).result.length?(m(),N(O,{key:0,"current-page":o(r),"onUpdate:current-page":s[1]||(s[1]=C=>ve(r)?r.value=C:null),class:"mt-6","item-per-page":o(p).pagination.per_page,"total-items":o(p).pagination.total},null,8,["current-page","item-per-page","total-items"])):w("",!0)]),_:1},8,["columns","data","limit","total"]),t(h,{modelValue:z.value,"onUpdate:modelValue":s[2]||(s[2]=M=>z.value=M),"regulation-id":_.value,"onUpdate:list":s[3]||(s[3]=()=>{D(),d(),_.value=void 0}),onClose:s[4]||(s[4]=M=>_.value=void 0)},null,8,["modelValue","regulation-id"]),t(K,{onConfirmAction:x})])}}});export{Vt as default};

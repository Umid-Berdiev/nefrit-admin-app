import{_ as K}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang.82e6fa1d.js";import{_ as X}from"./VModal.vue_vue_type_style_index_0_lang.61b38c15.js";import{af as Y,A as j,O as M,B as S,r as D,E as Z,o as h,g as x,w as n,k as c,s as e,j as C,G as t,t as V,m as A,x as B,p as P,a5 as ee,a3 as te,a4 as oe,Q as R,q as ne,b as ae,f as le,P as se,bv as ie,H as re}from"./index.bb4908f5.js";import{_ as ue}from"./VTabs.vue_vue_type_script_setup_true_lang.9d31ef9c.js";import{_ as ce}from"./VTextarea.a25adf21.js";import{_ as de,a as me}from"./VFlexTable.vue_vue_type_style_index_0_lang.e91991ed.js";import{_ as pe}from"./VFlexPagination.6f519b0d.js";import{_ as _e}from"./VDropdown.vue_vue_type_style_index_0_lang.c6874a9c.js";import{_ as fe}from"./VPlaceholderSection.vue_vue_type_style_index_0_lang.fc527a37.js";import{_ as ye}from"./VFlex.vue_vue_type_style_index_0_lang.2810b5dd.js";import{u as he}from"./viewWrapper.337e6d03.js";import{u as ge}from"./index.2a55e875.js";import"./VIcon.vue_vue_type_script_setup_true_lang.654e5aba.js";const I=Y();async function ve(d){try{const{data:o}=await I({url:`/api/admin/doc-category?page=${d}`});return o.data}catch(o){throw o}}async function be(d){try{const{data:o}=await I({url:`/api/admin/doc-category/${d}`});return o.data}catch(o){throw o}}async function $e(d){try{const{data:o}=await I({url:"/api/admin/doc-category",method:"POST",data:d})}catch(o){throw o}}async function Ve(d,o){try{const{data:m}=await I({url:`/api/admin/doc-category/${d}`,method:"PUT",data:o})}catch(m){throw m}}async function we(d){try{const{data:o}=await I({url:`/api/admin/doc-category/${d}`,method:"DELETE"})}catch(o){throw o}}const ze=["onSubmit"],Ce={key:0,class:"columns is-multiline pt-5"},ke={class:"column is-12"},Ne={class:"help has-text-danger"},Te={class:"help has-text-danger"},Ae={key:1,class:"columns is-multiline pt-5"},De={class:"column is-12"},Ie={key:2,class:"columns is-multiline pt-5"},Ee={class:"column is-12"},Se=j({props:{modelValue:Boolean,itemId:{type:Number,default:null}},emits:["update:modelValue","update:list"],setup(d,{emit:o}){const m=d,{t:f}=M(),p=S(f("Add")),$=S(!1),r=D({uz:"",ru:"",en:""}),a=D({uz:"",ru:"",en:""}),b=D({"name.uz":[],"name.en":[],"name.ru":[],"description.uz":[],"description.en":[],"description.ru":[]});Z(()=>m.itemId,async s=>{if(s){p.value=f("Edit");const l=await be(Number(m.itemId));Object.assign(r,l.name),Object.assign(a,l.description)}},{deep:!0,immediate:!0});async function k(s){try{$.value=!0,m.itemId?await Ve(m.itemId,{name:r,description:a}):await $e({name:r,description:a}),o("update:list"),g()}catch(l){Object.assign(b,l.response?.data?.errors)}finally{$.value=!1}}function g(){p.value=f("Add"),U(),F(),o("update:modelValue",!1)}function U(){Object.assign(r,{uz:"",ru:"",en:""}),Object.assign(a,{uz:"",ru:"",en:""})}function F(){Object.assign(b,{"name.uz":[],"name.en":[],"name.ru":[],"description.uz":[],"description.en":[],"description.ru":[]})}return(s,l)=>{const N=ee,y=te,v=oe,i=ce,u=ue,T=R,O=X;return h(),x(O,{open:d.modelValue,size:"large",title:p.value,actions:"right",onClose:g},{content:n(()=>[c("form",{id:"role-form",class:"modal-form",onSubmit:B(k,["prevent"])},[e(u,{type:"boxed",selected:"uz",tabs:[{label:s.$t("Uzbek"),value:"uz"},{label:s.$t("Russian"),value:"ru"},{label:s.$t("English"),value:"en"}]},{tab:n(({activeValue:w})=>[w==="uz"?(h(),C("div",Ce,[c("div",ke,[e(v,{label:s.$t("Name_uz"),required:""},{default:n(()=>[e(y,null,{default:n(()=>[e(N,{name:"name_uz",type:"text",placeholder:t(f)("Type_name_uz"),modelValue:t(r).uz,"onUpdate:modelValue":l[0]||(l[0]=_=>t(r).uz=_)},null,8,["placeholder","modelValue"]),c("p",Ne,V(t(b)["name.uz"][0]),1)]),_:1})]),_:1},8,["label"]),e(v,{label:s.$t("Description_uz"),required:""},{default:n(()=>[e(y,null,{default:n(()=>[e(i,{name:"description_uz",placeholder:t(f)("Add_description_uz"),modelValue:t(a).uz,"onUpdate:modelValue":l[1]||(l[1]=_=>t(a).uz=_)},null,8,["placeholder","modelValue"]),c("p",Te,V(t(b)["description.uz"][0]),1)]),_:1})]),_:1},8,["label"])])])):w==="ru"?(h(),C("div",Ae,[c("div",De,[e(v,{label:s.$t("Name_ru")},{default:n(()=>[e(y,null,{default:n(()=>[e(N,{name:"name_ru",type:"text",placeholder:t(f)("Type_name_ru"),modelValue:t(r).ru,"onUpdate:modelValue":l[2]||(l[2]=_=>t(r).ru=_)},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"]),e(v,{label:s.$t("Description_ru")},{default:n(()=>[e(y,null,{default:n(()=>[e(i,{name:"description_ru",placeholder:t(f)("Add_description_ru"),modelValue:t(a).ru,"onUpdate:modelValue":l[3]||(l[3]=_=>t(a).ru=_)},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"])])])):w==="en"?(h(),C("div",Ie,[c("div",Ee,[e(v,{label:s.$t("Name_en")},{default:n(()=>[e(y,null,{default:n(()=>[e(N,{name:"name_en",type:"text",placeholder:t(f)("Type_name_en"),modelValue:t(r).en,"onUpdate:modelValue":l[4]||(l[4]=_=>t(r).en=_)},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"]),e(v,{label:s.$t("Description_en")},{default:n(()=>[e(y,null,{default:n(()=>[e(i,{name:"description_en",placeholder:t(f)("Add_description_en"),modelValue:t(a).en,"onUpdate:modelValue":l[5]||(l[5]=_=>t(a).en=_)},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"])])])):A("",!0)]),_:1},8,["tabs"])],40,ze)]),action:n(({close:w})=>[e(T,{type:"submit",color:"primary",outlined:"",form:"role-form",loading:$.value,disabled:$.value},{default:n(()=>[P(V(s.$t("Save")),1)]),_:1},8,["loading","disabled"])]),_:1},8,["open","title"])}}}),xe=["onClick"],Be={class:"icon"},Ue={class:"meta"},Oe=c("hr",{class:"dropdown-divider"},null,-1),je=["onClick"],Fe={class:"icon"},Me={class:"meta"},Pe=j({emits:["edit","remove"],setup(d,{emit:o}){return(m,f)=>{const p=ne("VueIconify"),$=_e;return h(),x($,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:n(({close:r})=>[c("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:B(()=>{o("edit"),r()},["prevent"])},[c("div",Be,[e(p,{icon:"feather:edit-2"})]),c("div",Ue,[c("span",null,V(m.$t("Edit")),1)])],8,xe),Oe,c("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:B(()=>{o("remove"),r()},["prevent"])},[c("div",Fe,[e(p,{icon:"feather:trash"})]),c("div",Me,[c("span",null,V(m.$t("Remove")),1)])],8,je)]),_:1})}}}),Re={class:"doc-category-list-wrapper"},qe=["textContent"],Le={key:0,class:"flex-list-inner"},st=j({async setup(d){let o,m;const f=ae(),{t:p,locale:$}=M(),r=ge(),a=D({pagination:{current_page:1,per_page:10,total:10},result:[]}),b=le({get:()=>a.pagination.current_page,set:async i=>{await y(i)}}),k=S(!1),g=S(null),U=D({orderNumber:{format:(i,u,T)=>`${T+1}`,cellClass:"is-flex-grow-0"},name:{label:p("Name"),searchable:!0},description:{label:p("Description")},actions:{label:p("Actions"),align:"center"}});he().setPageTitle(p("Doc_Category_List")),se({title:p("Doc_Category")+" - Nefrit"}),[o,m]=ie(()=>y()),await o,m();function s(i=null){k.value=!0,g.value=i}async function l(i){g.value=i,r.$patch({confirmModalState:!0})}async function N(){await we(g.value),await y(),v()}async function y(i=1){const u=await ve(i);Object.assign(a,u)}function v(){f.success(p("Success"))}return(i,u)=>{const T=R,O=ye,w=fe,_=Pe,q=de,L=pe,W=me,H=Se,G=K;return h(),C("div",Re,[e(O,{"justify-content":"end",class:"mb-4"},{default:n(()=>[e(T,{outlined:"",rounded:"",color:"info",icon:"feather:plus",onClick:u[0]||(u[0]=B(E=>s(),["prevent"]))},{default:n(()=>[P(V(i.$t("Add")),1)]),_:1})]),_:1}),e(W,{columns:t(U),data:t(a).result,limit:t(a).pagination.per_page,total:t(a).pagination.total},{default:n(E=>[e(q,{rounded:""},{"header-column":n(({column:z})=>[z.key==="orderNumber"?(h(),C("span",{key:0,class:"is-flex-grow-0",textContent:V("#")},null,8,qe)):A("",!0)]),body:n(()=>[t(a).result.length===0?(h(),C("div",Le,[e(w,{title:i.$t("No_data"),subtitle:i.$t("There_is_no_data_that_match_your_query"),class:"my-6"},null,8,["title","subtitle"])])):A("",!0)]),"body-cell":n(({row:z,column:Q,value:We,index:He})=>[Q.key==="actions"?(h(),x(_,{key:0,onEdit:J=>s(z.id),onRemove:J=>l(z.id)},null,8,["onEdit","onRemove"])):A("",!0)]),_:1}),t(a).result.length?(h(),x(L,{key:0,"current-page":t(b),"onUpdate:current-page":u[1]||(u[1]=z=>re(b)?b.value=z:null),class:"mt-6","item-per-page":t(a).pagination.per_page,"total-items":t(a).pagination.total},null,8,["current-page","item-per-page","total-items"])):A("",!0)]),_:1},8,["columns","data","limit","total"]),e(H,{modelValue:k.value,"onUpdate:modelValue":u[2]||(u[2]=E=>k.value=E),"item-id":g.value,"onUpdate:list":u[3]||(u[3]=()=>{y(),v(),g.value=null}),onClose:u[4]||(u[4]=E=>g.value=null)},null,8,["modelValue","item-id"]),e(G,{onConfirmAction:N})])}}});export{st as default};

import{z as U,V as E,Y as tt,r as d,A as C,e as H,B as et,p as at,o as f,i as Y,j as o,t as p,q as e,w as i,a3 as m,x as w,bo as y,E as n,G as $,l as N,f as W,m as st,v as ot,a1 as nt,P as it,a2 as lt,a as rt,a6 as ct,bP as dt,a5 as ut}from"./index.7d56daf3.js";import{u as pt}from"./viewWrapper.780c4a53.js";import{_ as _t,a as ht}from"./VFlexTable.1438e9d1.js";import{_ as mt}from"./VFlexPagination.6accec6d.js";import{_ as ft}from"./VIconButton.4753ee4d.js";import{A as O,_ as gt}from"./AccountantDashboard.68d22da3.js";import{f as bt,a as vt,b as wt,c as yt}from"./index.61560d82.js";import{_ as xt}from"./OtherDashboard.47533022.js";import"./vue.runtime.esm-bundler.f7837448.js";import"./VCard.29b85d02.js";const St={class:"business-dashboard company-dashboard"},Dt={class:"columns is-multiline"},kt={class:"column is-6"},Vt={class:"dashboard-card is-base-chart"},$t={class:"content-box is-flex"},Ot={class:"is-size-4"},Ct=o("i",{class:"fas fa-angle-double-right","aria-hidden":"true"},null,-1),Yt={class:"p-5"},At={class:"column is-6"},Mt={class:"dashboard-card is-base-chart"},Pt={class:"content-box is-flex"},Bt={class:"is-size-4"},Tt={class:"p-5"},Ft={class:"column is-6"},zt={class:"dashboard-card is-base-chart"},Lt={class:"content-box is-flex"},jt={class:"is-size-4"},Nt=o("i",{class:"fas fa-angle-double-right","aria-hidden":"true"},null,-1),Ut={class:"column is-6"},Et={class:"dashboard-card is-base-chart"},Ht={class:"content-box is-flex"},Wt={class:"is-size-4"},Jt={class:"p-5"},Rt={key:0},It=U({setup(J){const{t:s,locale:g}=E(),A=tt(),l=d({start:new Date,end:new Date}),b=d({type:"string",mask:"MM-YYYY"}),_=C(new Date().getFullYear()),x=C(_.value),M={code:{label:s("statement_code")},applicant:{label:s("applied_legal_entity")},drug:{label:s("drug_name")},date:{label:s("applied_at")},actions:{label:s("Actions"),align:"end"}},h=d({pagination:{current_page:1,per_page:10,total:10},result:[]}),S=H({get:()=>h.pagination.current_page,set:async t=>{await T(t)}}),P=d([]),D=d({title:{text:""},chart:{height:200,type:"donut"},labels:[],responsive:[{breakpoint:480,options:{chart:{width:280,toolbar:{show:!1}},legend:{position:"top"}}}],legend:{position:"right",horizontalAlign:"center",formatter:(t,a)=>`<span style="overflow-wrap: break-word;">${t}</span>`},plotOptions:{pie:{donut:{labels:{show:!0,name:{show:!0},value:{show:!0},total:{show:!0,showAlways:!0,label:s("Total_statements")}}}}}}),B=d([]),k=d({title:{text:""},chart:{height:200,type:"donut"},labels:[],responsive:[{breakpoint:480,options:{chart:{width:280,toolbar:{show:!1}},legend:{position:"top"}}}],legend:{position:"right",horizontalAlign:"center",formatter:(t,a)=>`<span style="overflow-wrap: break-word;">${t}</span>`},plotOptions:{pie:{donut:{labels:{show:!0,name:{show:!0},value:{show:!0},total:{show:!0,showAlways:!0,label:s("Total_statements")}}}}}}),v=d({series:[],chart:{height:280,type:"bar",toolbar:{show:!1}},plotOptions:{bar:{dataLabels:{position:"top"}}},dataLabels:{enabled:!0,formatter:t=>t.toLocaleString(),offsetY:-20,style:{fontSize:"12px",colors:["#304758"]}},xaxis:{categories:[s("Jan"),s("Feb"),s("Mar"),s("Apr"),s("May"),s("Jun"),s("Jul"),s("Aug"),s("Sep"),s("Oct"),s("Nov"),s("Dec")],axisBorder:{show:!1},axisTicks:{show:!1},crosshairs:{fill:{type:"gradient",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}}},tooltip:{enabled:!0}},yaxis:{axisBorder:{show:!1},axisTicks:{show:!1},labels:{show:!0}},title:{text:"",align:"left"},tooltip:{y:{formatter:function(t){return t.toLocaleString()}}}});et(async()=>{await I(),await q(),await G(),await T()});function R(t){console.log({rowId:t}),A.push("/app/statements/"+t)}async function I(){const t=await bt();Object.assign(P,t.map(a=>a.applications)),Object.assign(D.labels,t.map(a=>`${a.name}: ${a.applications}`))}async function q(){const t=await vt();v.series=[{name:s("Payment_sum"),data:t.map(a=>a.amount)}]}async function G(){const t=await wt();Object.assign(B,t.map(a=>a.applications)),Object.assign(k.labels,t.map(a=>`${a.name}: ${a.applications}`))}async function T(t=1){const a=await yt(t);Object.assign(h,a)}return(t,a)=>{const u=nt,F=it,V=lt,z=at("VDatePicker"),K=ft,Q=_t,X=mt,Z=ht;return f(),Y("div",St,[o("div",Dt,[o("div",kt,[o("div",Vt,[o("div",$t,[o("h1",Ot,p(t.$t("Statement_statuses")),1),e(z,{locale:n(g),class:"ml-auto",modelValue:n(l),"onUpdate:modelValue":a[0]||(a[0]=r=>$(l)?l.value=r:l=r),"is-range":"",color:"green","trim-weeks":"","model-config":n(b)},{default:i(({inputValue:r,inputEvents:c})=>[e(V,{addons:""},{default:i(()=>[e(u,{expanded:"",icon:"feather:corner-down-right"},{default:i(()=>[e(m,w({value:r.start},y(c.start)),null,16,["value"])]),_:2},1024),e(u,null,{default:i(()=>[e(F,{static:""},{default:i(()=>[Ct]),_:1})]),_:1}),e(u,{expanded:"",icon:"feather:corner-right-up",subcontrol:""},{default:i(()=>[e(m,w({value:r.end},y(c.end)),null,16,["value"])]),_:2},1024)]),_:2},1024)]),_:1},8,["locale","modelValue","model-config"])]),o("div",Yt,[e(n(O),{type:n(D).chart.type,height:400,series:n(P),options:n(D)},null,8,["type","series","options"])])])]),o("div",At,[o("div",Mt,[o("div",Pt,[o("h1",Bt,p(t.$t("Statement_payments")),1),e(V,{class:"ml-auto"},{default:i(()=>[e(u,null,{default:i(()=>[e(m,{type:"number",min:_.value-10,max:_.value,modelValue:x.value,"onUpdate:modelValue":a[1]||(a[1]=r=>x.value=r)},null,8,["min","max","modelValue"])]),_:1})]),_:1})]),o("div",Tt,[e(n(O),{type:n(v).chart.type,height:400,series:n(v).series,options:n(v)},null,8,["type","series","options"])])])]),o("div",Ft,[o("div",zt,[o("div",Lt,[o("h1",jt,p(t.$t("Statement_stages")),1),e(z,{locale:n(g),class:"ml-auto",modelValue:n(l),"onUpdate:modelValue":a[2]||(a[2]=r=>$(l)?l.value=r:l=r),"is-range":"",color:"green","trim-weeks":""},{default:i(({inputValue:r,inputEvents:c})=>[e(V,{addons:""},{default:i(()=>[e(u,{expanded:"",icon:"feather:corner-down-right"},{default:i(()=>[e(m,w({value:r.start},y(c.start)),null,16,["value"])]),_:2},1024),e(u,null,{default:i(()=>[e(F,{static:""},{default:i(()=>[Nt]),_:1})]),_:1}),e(u,{expanded:"",icon:"feather:corner-right-up",subcontrol:""},{default:i(()=>[e(m,w({value:r.end},y(c.end)),null,16,["value"])]),_:2},1024)]),_:2},1024)]),_:1},8,["locale","modelValue"])]),o("div",null,[e(n(O),{type:n(k).chart.type,height:400,series:n(B),options:n(k)},null,8,["type","series","options"])])])]),o("div",Ut,[o("div",Et,[o("div",Ht,[o("h1",Wt,p(t.$t("Statement_latest")),1)]),o("div",Jt,[e(Z,{columns:n(M),data:n(h).result},{default:i(r=>[e(Q,{rounded:""},{"body-cell":i(({row:c,column:L,value:j,index:Gt})=>[L.key==="date"&&j?(f(),Y("span",Rt,p(t.$h.formatDate(j,"HH:mm DD.MM.YYYY")),1)):N("",!0),L.key==="actions"?(f(),W(K,{key:1,class:"ml-auto p-4",outlined:"",circle:"",color:"info",icon:"feather:eye",onClick:ot(Kt=>R(c.id),["prevent"])},{default:i(()=>[st(p(t.$t("View")),1)]),_:2},1032,["onClick"])):N("",!0)]),_:1}),e(X,{"current-page":n(S),"onUpdate:current-page":a[3]||(a[3]=c=>$(S)?S.value=c:null),class:"mt-6","item-per-page":n(h).pagination.per_page,"total-items":n(h).pagination.total},null,8,["current-page","item-per-page","total-items"])]),_:1},8,["columns","data"])])])])])])}}}),qt={class:"page-content-inner"},le=U({setup(J){const{t:s}=E(),g=rt();pt().setPageTitle(s("Dashboard"));const l=C("OtherDashboard"),b=H(()=>g.user?.role_id),_={MainDashboard:It,AccountantDashboard:gt,OtherDashboard:xt};return ct(async()=>{switch(console.log("role id: ",b.value),b.value){case 1:case 2:case 3:l.value="MainDashboard";break;case 4:case 5:case 6:l.value="OtherDashboard";break;case 7:l.value="AccountantDashboard";break;default:l.value="OtherDashboard"}}),dt({title:s("Dashboard")+" - Nefrit"}),(x,M)=>(f(),Y("div",qt,[(f(),W(ut(_[l.value])))]))}});export{le as default};

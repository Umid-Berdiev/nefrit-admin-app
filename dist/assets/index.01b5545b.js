import{_ as be}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang.3390d561.js";import{_ as he}from"./ContractFormModal.vue_vue_type_script_setup_true_lang.65be0b68.js";import{_ as $e,a as Ve}from"./VFlexTable.vue_vue_type_style_index_0_lang.cc32d678.js";import{_ as ke}from"./VFlexPagination.2909dff1.js";import{_ as we}from"./VDropdown.vue_vue_type_style_index_0_lang.f096a086.js";import{z as X,o as r,f as Y,w as o,j as l,t as c,v as D,i as m,l as u,$ as Ce,a as Ye,N as De,b as Me,r as R,e as G,A as N,bQ as P,O as Fe,bx as Ne,p as Pe,q as e,E as a,m as S,Y as Se,bO as xe,x as Q,bp as J,F as Ae,s as Ue,G as Be,P as Re,a3 as Te,a1 as je,a2 as Oe}from"./index.54471211.js";import{_ as Ie}from"./VTag.vue_vue_type_style_index_0_lang.92fc6287.js";import{_ as Ee}from"./VPlaceholderSection.vue_vue_type_style_index_0_lang.696c973e.js";import{_ as Le}from"./VCard.vue_vue_type_script_setup_true_lang.41b270e1.js";import{_ as We}from"./VFlexItem.vue_vue_type_style_index_0_lang.73a7f7bb.js";import{_ as T,a as qe}from"./VOption.vue_vue_type_style_index_0_lang.0c1d2da9.js";import{_ as ze}from"./VFlex.vue_vue_type_style_index_0_lang.96c8d1f7.js";import{u as He}from"./viewWrapper.ff650e59.js";import{u as Ge}from"./index.97d140ea.js";import{n as K,r as Qe}from"./index.d8323660.js";import"./VModal.vue_vue_type_style_index_0_lang.61065232.js";import"./VFileInput.vue_vue_type_script_setup_true_lang.0fc46e7e.js";import"./index.31cd0f4b.js";import"./VIcon.vue_vue_type_script_setup_true_lang.8ffe0265.js";const Je=["onClick"],Ke=l("div",{class:"icon"},[l("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),Xe={class:"meta"},Ze=l("hr",{class:"dropdown-divider"},null,-1),et=["onClick"],tt=l("div",{class:"icon"},[l("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),at={class:"meta"},ot=X({props:{removeBtn:{type:Boolean,default:!1}},emits:["view","remove"],setup(j,{emit:$}){return(V,O)=>{const M=we;return r(),Y(M,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:o(({close:s})=>[l("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:D(()=>{$("view"),s()},["prevent"])},[Ke,l("div",Xe,[l("span",null,c(V.$t("View")),1)])],8,Je),Ze,j.removeBtn?(r(),m("a",{key:0,role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:D(()=>{$("remove"),s()},["prevent"])},[tt,l("div",at,[l("span",null,c(V.$t("Remove")),1)])],8,et)):u("",!0)]),_:1})}}}),nt={class:"applicant-list-wrapper"},lt={class:"mb-5"},st={class:"title is-5 mb-2"},it=["onSubmit"],rt={class:"columns is-desktop"},ct={class:"column"},dt={class:"column"},ut={class:"column"},mt={class:"column"},_t={class:"column"},pt={class:"column"},ft=["textContent"],vt={key:0,class:"flex-list-inner"},gt={key:0},yt={key:1},bt={key:2},ht={key:4},$t={key:5},Et=X({async setup(j){let $,V;const O=Ce(),{userRoleID:M}=Ye(),{t:s,locale:I}=De(),Z=Ge(),F=Me(),_=R({pagination:{current_page:1,per_page:10,total:10},result:[]}),x=G({get:()=>_.pagination.current_page,set:async t=>{await w(t)}}),g=N(!1),A=N(!1),U=N(!1),k=N(),ee=G(()=>({orderNumber:{format:(t,n,y)=>`${y+1}`,cellClass:"is-flex-grow-0"},name:{label:s("Name"),searchable:!0,grow:!0},legal_entity:{label:s("Applicant"),grow:!0},applications:{label:s("Statements")},payment_amount:{label:s("Contract_amount")},is_paid:{label:s("Payment_status"),grow:!0},contract_date:{label:s("Contract_date"),grow:!0},verified_at:{label:s("verified_at"),grow:!0},actions:{label:s("Actions"),align:"center"}})),te=He(),d=R({name:"",legal_entity_name:"",application_code:"",is_paid:"",start_contract_date:P().subtract(1,"month").format("YYYY-MM-DD"),end_contract_date:P().format("YYYY-MM-DD")}),E=R({type:"string",mask:"YYYY-MM-DD"}),L={input:"DD.MM.YYYY"};te.setPageTitle(s("Contracts_List")),Fe({title:s("Contracts")+" - Nefrit"}),[$,V]=Ne(()=>w()),await $,V();function ae(){A.value=!0}function oe(t){k.value=t,O.push(`/app/contracts/${t}`)}async function ne(t){k.value=t,Z.$patch({confirmModalState:!0})}async function le(){try{await Qe(Number(k.value)),w(),F.success(s("Removed_successfully"))}catch(t){F.error(s(t.response?.data.error.message))}}async function w(t=1){const n=await K({page:t,...d});Object.assign(_,n)}function W(){k.value=void 0}function se(){F.success(s("Updated_successfully"))}async function ie(){try{g.value=!0;const t=await K({page:1,...d});Object.assign(_,t)}catch(t){F.error("Error while fetching filtered data: ",t.message)}finally{g.value=!1}}async function re(){g.value=!0,Object.assign(d,{name:"",legal_entity_name:"",application_code:"",is_paid:"",start_contract_date:P().subtract(1,"month").format("YYYY-MM-DD"),end_contract_date:P().format("YYYY-MM-DD")}),await w(),g.value=!1}return(t,n)=>{const y=Re,q=ze,C=Te,b=je,h=Oe,ce=qe,z=Pe("VDatePicker"),H=We,de=Le,ue=Ee,me=Ie,_e=ot,pe=$e,fe=ke,ve=Ve,ge=he,ye=be;return r(),m("div",nt,[e(q,{"justify-content":"end",class:"mb-4","column-gap":"1rem"},{default:o(()=>[[1,2,7].includes(a(M))?(r(),Y(y,{key:0,outlined:"",rounded:"",color:"info",icon:"feather:plus",onClick:D(ae,["prevent"])},{default:o(()=>[S(c(t.$t("Add")),1)]),_:1},8,["onClick"])):u("",!0),e(y,{outlined:"",rounded:"",color:"warning",icon:"feather:filter",onClick:n[0]||(n[0]=D(i=>U.value=!U.value,["prevent"]))},{default:o(()=>[S(c(t.$t("Filter")),1)]),_:1})]),_:1}),Se(l("div",lt,[e(de,{radius:"small"},{default:o(()=>[l("h3",st,c(a(s)("Filter_form")),1),l("form",{onSubmit:D(ie,["prevent"])},[l("div",rt,[l("div",ct,[e(h,{label:t.$t("Name")},{default:o(()=>[e(b,null,{default:o(()=>[e(C,{modelValue:a(d).name,"onUpdate:modelValue":n[1]||(n[1]=i=>a(d).name=i),type:"text"},null,8,["modelValue"])]),_:1})]),_:1},8,["label"])]),l("div",dt,[e(h,{label:t.$t("Applicant_name")},{default:o(()=>[e(b,null,{default:o(()=>[e(C,{modelValue:a(d).legal_entity_name,"onUpdate:modelValue":n[2]||(n[2]=i=>a(d).legal_entity_name=i),type:"text"},null,8,["modelValue"])]),_:1})]),_:1},8,["label"])]),l("div",ut,[e(h,{label:t.$t("statement_code")},{default:o(()=>[e(b,null,{default:o(()=>[e(C,{modelValue:a(d).application_code,"onUpdate:modelValue":n[3]||(n[3]=i=>a(d).application_code=i),type:"text"},null,8,["modelValue"])]),_:1})]),_:1},8,["label"])]),l("div",mt,[e(h,{label:t.$t("Payment_status")},{default:o(()=>[e(b,null,{default:o(()=>[e(ce,{modelValue:a(d).is_paid,"onUpdate:modelValue":n[4]||(n[4]=i=>a(d).is_paid=i)},{default:o(()=>[e(T,{value:"",textContent:c(t.$t("All"))},null,8,["textContent"]),e(T,{value:0,textContent:c(t.$t("Not_Paid"))},null,8,["textContent"]),e(T,{value:1,textContent:c(t.$t("Paid"))},null,8,["textContent"])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label"])]),l("div",_t,[e(z,{locale:a(I),modelValue:a(d).start_contract_date,"onUpdate:modelValue":n[5]||(n[5]=i=>a(d).start_contract_date=i),color:"green","trim-weeks":"",masks:L,"model-config":a(E)},{default:o(({inputValue:i,inputEvents:p})=>[e(h,{label:t.$t("From")},{default:o(()=>[e(b,{icon:"feather:calendar"},{default:o(()=>[e(C,Q({value:i},J(p)),null,16,["value"])]),_:2},1024)]),_:2},1032,["label"])]),_:1},8,["locale","modelValue","model-config"])]),l("div",pt,[e(z,{locale:a(I),modelValue:a(d).end_contract_date,"onUpdate:modelValue":n[6]||(n[6]=i=>a(d).end_contract_date=i),color:"green","trim-weeks":"",masks:L,"model-config":a(E)},{default:o(({inputValue:i,inputEvents:p})=>[e(h,{label:t.$t("To")},{default:o(()=>[e(b,{icon:"feather:calendar"},{default:o(()=>[e(C,Q({value:i},J(p)),null,16,["value"])]),_:2},1024)]),_:2},1032,["label"])]),_:1},8,["locale","modelValue","model-config"])])]),e(q,{"justify-content":"end","column-gap":"1rem"},{default:o(()=>[e(H,null,{default:o(()=>[e(y,{type:"button",disabled:g.value,outlined:"",color:"warning",icon:"feather:x",onClick:re},{default:o(()=>[S(c(a(s)("Clear")),1)]),_:1},8,["disabled"])]),_:1}),e(H,null,{default:o(()=>[e(y,{type:"submit",disabled:g.value,outlined:"",color:"success",icon:"feather:filter"},{default:o(()=>[S(c(a(s)("Filter")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})],40,it)]),_:1})],512),[[xe,U.value]]),e(ve,{columns:a(ee),data:a(_).result,limit:a(_).pagination.per_page,total:a(_).pagination.total},{default:o(i=>[e(pe,{rounded:""},{"header-column":o(({column:p})=>[p.key==="orderNumber"?(r(),m("span",{key:0,class:"is-flex-grow-0",textContent:c("#")},null,8,ft)):u("",!0)]),body:o(()=>[a(_).result.length===0?(r(),m("div",vt,[e(ue,{title:t.$t("No_data"),subtitle:t.$t("There_is_no_data_that_match_your_query"),class:"my-6"},null,8,["title","subtitle"])])):u("",!0)]),"body-cell":o(({row:p,column:f,value:v,index:Vt})=>[f.key==="legal_entity"?(r(),m("span",gt,c(v.name),1)):u("",!0),f.key==="applications"?(r(),m("ul",yt,[(r(!0),m(Ae,null,Ue(v,B=>(r(),m("li",null,c(B.code),1))),256))])):u("",!0),f.key==="payment_amount"?(r(),m("span",bt,c(Number(v).toLocaleString()),1)):u("",!0),f.key==="is_paid"?(r(),Y(me,{key:3,class:"is-size-6",color:v?"primary":"warning",rounded:"",label:v?t.$t("Paid"):t.$t("Not_Paid")},null,8,["color","label"])):u("",!0),f.key==="contract_date"?(r(),m("span",ht,c(t.$h.formatDate(v,"DD.MM.YYYY")),1)):u("",!0),f.key==="verified_at"?(r(),m("span",$t,c(t.$h.formatDate(v,"DD.MM.YYYY")),1)):u("",!0),f.key==="actions"?(r(),Y(_e,{key:6,onView:B=>oe(p.id),onRemove:B=>ne(p.id),"remove-btn":[1,2,7].includes(a(M))},null,8,["onView","onRemove","remove-btn"])):u("",!0)]),_:1}),a(_).result.length?(r(),Y(fe,{key:0,"current-page":a(x),"onUpdate:current-page":n[7]||(n[7]=p=>Be(x)?x.value=p:null),class:"mt-6","item-per-page":a(_).pagination.per_page,"total-items":a(_).pagination.total},null,8,["current-page","item-per-page","total-items"])):u("",!0)]),_:1},8,["columns","data","limit","total"]),e(ge,{modelValue:A.value,"onUpdate:modelValue":n[8]||(n[8]=i=>A.value=i),"item-id":k.value,"onUpdate:list":n[9]||(n[9]=()=>{w(),se(),W()}),onClose:W},null,8,["modelValue","item-id"]),e(ye,{onConfirmAction:le})])}}});export{Et as default};

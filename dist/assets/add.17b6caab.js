import{z as M,N,b as P,Z as j,O as S,e as B,A as $,r as y,p as I,o as f,i as h,j as o,q as l,w as s,E as e,t as d,l as O,x as R,bn as L,m as W,v as H,a4 as K,a2 as Z,a3 as G,P as J}from"./index.b7e98af4.js";import{_ as Q}from"./VFlex.vue_vue_type_style_index_0_lang.74d0a329.js";import{_ as X}from"./VFlexItem.vue_vue_type_style_index_0_lang.397011dc.js";import{_ as ee}from"./VTabs.vue_vue_type_script_setup_true_lang.51ffbe80.js";import{C as te,a as z,e as k}from"./editor-data.e1b3ec59.js";import{u as le}from"./viewWrapper.d9abd62c.js";import{j as ae}from"./index.a6f7634c.js";import"./VIcon.vue_vue_type_script_setup_true_lang.fc7bb1c3.js";import"./vue.runtime.esm-bundler.4fd7e3d8.js";const se=["onSubmit"],oe={class:"container is-fluid"},ne={class:"columns"},ie={class:"column is-8"},ue={key:0,class:"columns is-multiline pt-5"},de={class:"column is-12"},re={class:"help has-text-danger"},ce={class:"help has-text-danger"},pe={key:1,class:"columns is-multiline pt-5"},me={class:"column is-12"},_e={class:"help has-text-danger"},fe={class:"help has-text-danger"},he={key:2,class:"columns is-multiline pt-5"},ge={class:"column is-12"},be={class:"help has-text-danger"},Ve={class:"help has-text-danger"},ve={class:"help has-text-danger"},xe={class:"help has-text-danger"},$e={class:"column is-4"},ye={class:"file"},ze={class:"file-label"},ke={class:"file-cta"},Ce=o("span",{class:"file-icon"},[o("i",{class:"fas fa-cloud-upload-alt"})],-1),Te={class:"file-label"},Ue=["src"],Se=M({setup(De){const{t:g}=N(),C=P(),U=j();le().setPageTitle(g("Articles")),S({title:B(()=>g("Articles"))});const b=te.component,_=$(!1),a=y({author:"",date:new Date,image:"",text:{uz:"",ru:"",en:""},title:{uz:"",ru:"",en:""}}),u=y({author:[],date:[],image:[],["title.uz"]:[],["title.ru"]:[],["title.en"]:[],["text.uz"]:[],["text.ru"]:[],["text.en"]:[]}),V=$([]),T=$(""),D=y({type:"string",mask:"YYYY-MM-DD"});function w(){Object.assign(u,{author:[],date:[],image:[],["title.uz"]:[],["title.ru"]:[],["title.en"]:[],["text.uz"]:[],["text.ru"]:[],["text.en"]:[]})}async function q(){try{_.value=!0,w();const t=new FormData;t.append("author",a.author),t.append("date",a.date),t.append("image",V.value.length?V.value[0]:""),t.append("title[uz]",a.title.uz),t.append("title[ru]",a.title.ru),t.append("title[en]",a.title.en),t.append("text[uz]",a.text.uz),t.append("text[ru]",a.text.ru),t.append("text[en]",a.text.en);const n=await ae(t);C.success(`${g("Added_successfully")}!`),U.push(`/app/handbooks/articles/${n.id}`)}catch(t){Object.assign(u,t.response?.data?.errors),C.error(`Error while adding data: ${t.message}`)}finally{_.value=!1}}function E(t){const n=t.target;n.files?.length&&(T.value=URL.createObjectURL(n.files[0]),V.value=[n.files[0]])}return(t,n)=>{const m=K,p=Z,r=G,Y=ee,v=X,A=I("VDatePicker"),x=Q,F=J;return f(),h("form",{id:"article-add-form",class:"modal-form",onSubmit:H(q,["prevent"])},[o("div",oe,[o("div",ne,[o("div",ie,[l(Y,{type:"boxed",selected:"uz",tabs:[{label:t.$t("Uzbek"),value:"uz"},{label:t.$t("Russian"),value:"ru"},{label:t.$t("English"),value:"en"}]},{tab:s(({activeValue:c})=>[c==="uz"?(f(),h("div",ue,[o("div",de,[l(r,{class:"mb-5",label:t.$t("Title"),required:""},{default:s(()=>[l(p,null,{default:s(()=>[l(m,{type:"text",placeholder:t.$t("Type_title_uz"),modelValue:e(a).title.uz,"onUpdate:modelValue":n[0]||(n[0]=i=>e(a).title.uz=i)},null,8,["placeholder","modelValue"]),o("p",re,d(e(u)["title.uz"][0]),1)]),_:1})]),_:1},8,["label"]),l(r,{class:"mb-5",label:t.$t("Text"),required:""},{default:s(()=>[l(e(b),{modelValue:e(a).text.uz,"onUpdate:modelValue":n[1]||(n[1]=i=>e(a).text.uz=i),editor:e(z),config:e(k)},null,8,["modelValue","editor","config"]),o("p",ce,d(e(u)["text.uz"][0]),1)]),_:1},8,["label"])])])):c==="ru"?(f(),h("div",pe,[o("div",me,[l(r,{class:"mb-5",label:t.$t("Title"),required:""},{default:s(()=>[l(p,null,{default:s(()=>[l(m,{type:"text",placeholder:t.$t("Type_title_ru"),modelValue:e(a).title.ru,"onUpdate:modelValue":n[2]||(n[2]=i=>e(a).title.ru=i)},null,8,["placeholder","modelValue"]),o("p",_e,d(e(u)["title.ru"][0]),1)]),_:1})]),_:1},8,["label"]),l(r,{class:"mb-5",label:t.$t("Text"),required:""},{default:s(()=>[l(e(b),{modelValue:e(a).text.ru,"onUpdate:modelValue":n[3]||(n[3]=i=>e(a).text.ru=i),editor:e(z),config:e(k)},null,8,["modelValue","editor","config"]),o("p",fe,d(e(u)["text.ru"][0]),1)]),_:1},8,["label"])])])):c==="en"?(f(),h("div",he,[o("div",ge,[l(r,{class:"mb-5",label:t.$t("Title"),required:""},{default:s(()=>[l(p,null,{default:s(()=>[l(m,{type:"text",placeholder:t.$t("Type_title_en"),modelValue:e(a).title.en,"onUpdate:modelValue":n[4]||(n[4]=i=>e(a).title.en=i)},null,8,["placeholder","modelValue"]),o("p",be,d(e(u)["title.en"][0]),1)]),_:1})]),_:1},8,["label"]),l(r,{class:"mb-5",label:t.$t("Text"),required:""},{default:s(()=>[l(e(b),{modelValue:e(a).text.en,"onUpdate:modelValue":n[5]||(n[5]=i=>e(a).text.en=i),editor:e(z),config:e(k)},null,8,["modelValue","editor","config"]),o("p",Ve,d(e(u)["text.en"][0]),1)]),_:1},8,["label"])])])):O("",!0)]),_:1},8,["tabs"]),l(x,{"column-gap":"1rem"},{default:s(()=>[l(v,null,{default:s(()=>[l(r,{label:t.$t("Author"),required:""},{default:s(()=>[l(p,null,{default:s(()=>[l(m,{type:"text",placeholder:t.$t("Type_author"),modelValue:e(a).author,"onUpdate:modelValue":n[6]||(n[6]=c=>e(a).author=c)},null,8,["placeholder","modelValue"]),o("p",ve,d(e(u).author[0]),1)]),_:1})]),_:1},8,["label"])]),_:1}),l(v,null,{default:s(()=>[l(A,{modelValue:e(a).date,"onUpdate:modelValue":n[7]||(n[7]=c=>e(a).date=c),mode:"date","model-config":e(D),masks:{input:["DD.MM.YYYY"]}},{default:s(({inputValue:c,inputEvents:i})=>[l(r,{label:t.$t("Date")},{default:s(()=>[l(p,{icon:"feather:calendar"},{default:s(()=>[l(m,R({value:c},L(i)),null,16,["value"]),o("p",xe,d(e(u).date[0]),1)]),_:2},1024)]),_:2},1032,["label"])]),_:1},8,["modelValue","model-config","masks"])]),_:1})]),_:1})]),o("div",$e,[l(x,{"flex-direction":"column"},{default:s(()=>[l(v,{"align-self":"center"},{default:s(()=>[l(r,{grouped:""},{default:s(()=>[l(p,null,{default:s(()=>[o("div",ye,[o("label",ze,[o("input",{class:"file-input",type:"file",name:"image",onChange:E},null,32),o("span",ke,[Ce,o("span",Te,d(t.$t("Choose_an_image")),1)])])])]),_:1})]),_:1}),o("img",{src:T.value,alt:""},null,8,Ue)]),_:1})]),_:1})])]),l(x,null,{default:s(()=>[l(F,{type:"submit",class:"ml-auto",color:"primary",outlined:"",loading:_.value,disabled:_.value},{default:s(()=>[W(d(t.$t("Save")),1)]),_:1},8,["loading","disabled"])]),_:1})])],40,se)}}});export{Se as default};

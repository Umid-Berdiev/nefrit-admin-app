import{_ as G}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang.82e6fa1d.js";import{_ as Q}from"./VModal.vue_vue_type_style_index_0_lang.61b38c15.js";import{A as M,O as j,B as E,r as F,E as J,o as f,g as I,w as l,k as n,s,G as e,t as v,p as O,a5 as X,a3 as Y,a4 as Z,Q as R,x as S,P as ee,b as te,f as oe,bv as ae,j as A,m as N,H as ne}from"./index.bb4908f5.js";import{C as se,a as le,e as ie}from"./editor-data.4856b60b.js";import{a as re,u as ce,c as de,b as me,r as ue}from"./index.e662029b.js";import{_ as pe,a as _e}from"./VFlexTable.vue_vue_type_style_index_0_lang.e91991ed.js";import{_ as fe}from"./VFlexPagination.6f519b0d.js";import{_ as ve}from"./VDropdown.vue_vue_type_style_index_0_lang.c6874a9c.js";import{_ as ye}from"./VPlaceholderSection.vue_vue_type_style_index_0_lang.fc527a37.js";import{_ as ge}from"./VFlex.vue_vue_type_style_index_0_lang.2810b5dd.js";import{u as be}from"./viewWrapper.337e6d03.js";import{u as he}from"./index.2a55e875.js";import"./vue.runtime.esm-bundler.137ab17a.js";import"./VIcon.vue_vue_type_script_setup_true_lang.654e5aba.js";const $e={class:"columns is-multiline"},Ve={class:"column is-12"},Ce={class:"help has-text-danger"},we={class:"help has-text-danger"},ke=M({props:{modelValue:Boolean,templateId:{type:Number,default:null}},emits:["update:modelValue","update:list"],setup(w,{emit:u}){const r=w,{t:c}=j(),h=se.component,_=E(c("Add")),$=E(!1),p=F({name:[],body:[],payment_amount:[]}),t=F({name:"",body:"",payment_amount:0});J(()=>r.templateId,async d=>{if(d){_.value=c("Edit");const m=await re(Number(r.templateId));Object.assign(t,m)}},{deep:!0,immediate:!0});async function i(d){try{$.value=!0,r.templateId?await ce(r.templateId,t):await de(t),u("update:list"),k()}catch(m){Object.assign(p,m.response?.data?.errors)}finally{$.value=!1}}function k(){_.value=c("Add"),V(),x(),u("update:modelValue",!1)}function V(){Object.assign(t,{name:"",body:"",payment_amount:0})}function x(){Object.assign(p,{name:[],body:[],payment_amount:[]})}return(d,m)=>{const y=X,T=Y,o=Z,a=R,C=Q;return f(),I(C,{open:w.modelValue,size:"big",actions:"right",title:d.$t("Add_contract_template"),onClose:k},{content:l(()=>[n("div",$e,[n("div",Ve,[s(o,{label:d.$t("Template_title"),required:""},{default:l(()=>[s(T,null,{default:l(()=>[s(y,{type:"text",placeholder:d.$t("Template_title"),modelValue:e(t).name,"onUpdate:modelValue":m[0]||(m[0]=g=>e(t).name=g)},null,8,["placeholder","modelValue"]),n("p",Ce,v(e(p).name[0]),1)]),_:1})]),_:1},8,["label"]),s(o,{label:d.$t("Body"),required:""},{default:l(()=>[s(e(h),{modelValue:e(t).body,"onUpdate:modelValue":m[1]||(m[1]=g=>e(t).body=g),editor:e(le),config:e(ie)},null,8,["modelValue","editor","config"]),n("p",we,v(e(p).body[0]),1)]),_:1},8,["label"])])])]),action:l(({close:g})=>[s(a,{loading:$.value,color:"primary",outlined:"",type:"button",disabled:$.value,onClick:i},{default:l(()=>[O(v(d.$t("Save")),1)]),_:1},8,["loading","disabled"])]),_:1},8,["open","title"])}}});const xe=["onClick"],Te=n("div",{class:"icon"},[n("i",{class:"iconify","aria-hidden":"true","data-icon":"feather:edit"})],-1),Be={class:"meta"},Ne=n("hr",{class:"dropdown-divider"},null,-1),Ee=["onClick"],Ie=n("div",{class:"icon"},[n("i",{class:"iconify","aria-hidden":"true","data-icon":"feather:trash"})],-1),Ae={class:"meta"},Fe=M({emits:["edit","remove"],setup(w,{emit:u}){return(r,c)=>{const h=ve;return f(),I(h,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:l(({close:_})=>[n("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:S(()=>{u("edit"),_()},["prevent"])},[Te,n("div",Be,[n("span",null,v(r.$t("Edit")),1)])],8,xe),Ne,n("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:S(()=>{u("remove"),_()},["prevent"])},[Ie,n("div",Ae,[n("span",null,v(r.$t("Remove")),1)])],8,Ee)]),_:1})}}}),Se={class:"applicant-list-wrapper"},Me=["textContent"],je={key:0,class:"flex-list-inner"},Ze=M({async setup(w){let u,r;const{t:c}=j();ee({title:c("Contract_templates")+" - Nefrit"});const h=te(),_=he();be().setPageTitle(c("Contract_templates"));const p=E(!1),t=E(),i=F({pagination:{current_page:1,per_page:10,total:10},result:[]}),k={orderNumber:{format:(o,a,C)=>`${C+1}`,cellClass:"is-flex-grow-0"},name:{label:c("Template_title")},actions:{label:c("Actions"),align:"center"}},V=oe({get:()=>i.pagination.current_page,set:async o=>{await y(o)}});[u,r]=ae(()=>y()),await u,r();function x(o){t.value=o,p.value=!0}async function d(o){t.value=o,_.$patch({confirmModalState:!0})}async function m(){await ue(t.value),await y(),T()}async function y(o=1){const a=await me(o);Object.assign(i,a)}function T(){h.success(c("Success"))}return(o,a)=>{const C=R,g=ge,P=ye,U=Fe,D=pe,W=fe,q=_e,L=ke,H=G;return f(),A("div",Se,[s(g,{"justify-content":"end",class:"mb-4"},{default:l(()=>[s(C,{outlined:"",rounded:"",color:"info",icon:"feather:plus",onClick:a[0]||(a[0]=S(B=>x(void 0),["prevent"]))},{default:l(()=>[O(v(o.$t("Add")),1)]),_:1})]),_:1}),s(q,{columns:e(k),data:e(i).result,limit:e(i).pagination.per_page,total:e(i).pagination.total},{default:l(B=>[s(D,{rounded:""},{"header-column":l(({column:b})=>[b.key==="orderNumber"?(f(),A("span",{key:0,class:"is-flex-grow-0",textContent:v("#")},null,8,Me)):N("",!0)]),body:l(()=>[e(i).result.length===0?(f(),A("div",je,[s(P,{title:o.$t("No_data"),subtitle:o.$t("There_is_no_data_that_match_your_query"),class:"my-6"},null,8,["title","subtitle"])])):N("",!0)]),"body-cell":l(({row:b,column:K,value:Oe,index:Re})=>[K.key==="actions"?(f(),I(U,{key:0,onEdit:z=>x(b.id),onRemove:z=>d(b.id)},null,8,["onEdit","onRemove"])):N("",!0)]),_:1}),e(i).result.length?(f(),I(W,{key:0,"current-page":e(V),"onUpdate:current-page":a[1]||(a[1]=b=>ne(V)?V.value=b:null),class:"mt-6","item-per-page":e(i).pagination.per_page,"total-items":e(i).pagination.total},null,8,["current-page","item-per-page","total-items"])):N("",!0)]),_:1},8,["columns","data","limit","total"]),s(L,{modelValue:p.value,"onUpdate:modelValue":a[2]||(a[2]=B=>p.value=B),"template-id":t.value,"onUpdate:list":a[3]||(a[3]=()=>{y(),T(),t.value=void 0}),onClose:a[4]||(a[4]=B=>t.value=void 0)},null,8,["modelValue","template-id"]),s(H,{onConfirmAction:m})])}}});export{Ze as default};

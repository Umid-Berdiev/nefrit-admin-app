import{_ as J}from"./ConfirmActionModal.586a357b.js";import{_ as Q}from"./VModal.4ff983a6.js";import{z as S,V as j,A as N,r as A,D as X,o as f,f as B,w as l,j as o,q as s,$ as Y,E as t,t as v,a0 as M,m as O,a1 as Z,P,v as F,bP as ee,b as te,e as ae,bv as oe,i as I,l as x,G as ne}from"./index.f3c4af7c.js";import{C as se,b as le,a as ie,e as re,u as ce,c as de,d as me,r as ue}from"./index.1da96a02.js";import{b as pe,_ as _e,a as fe}from"./VFlexTable.b930b631.js";import{_ as ve}from"./VFlexPagination.2d40fe99.js";import{_ as ye}from"./VDropdown.ced52ee9.js";import{u as ge,_ as be}from"./VPlaceholderSection.fb86af70.js";import{u as he}from"./viewWrapper.af3ae620.js";import"./vue.runtime.esm-bundler.0d998ef3.js";import"./VIcon.f4e820fd.js";const $e={class:"columns is-multiline"},Ve={class:"column is-12"},Ce={class:"help has-text-danger"},we={class:"help has-text-danger"},ke=S({props:{modelValue:Boolean,templateId:{type:Number,default:null}},emits:["update:modelValue","update:list"],setup(V,{emit:u}){const r=V,{t:c}=j(),b=se.component,_=N(c("Add")),h=N(!1),p=A({name:[],body:[],payment_amount:[]}),a=A({name:"",body:"",payment_amount:0});X(()=>r.templateId,async d=>{if(d){_.value=c("Edit");const m=await le(Number(r.templateId));Object.assign(a,m)}},{deep:!0,immediate:!0});async function i(d){try{h.value=!0,r.templateId?await ce(r.templateId,a):await de(a),u("update:list"),C()}catch(m){Object.assign(p,m.response?.data?.errors)}finally{h.value=!1}}function C(){_.value=c("Add"),$(),w(),u("update:modelValue",!1)}function $(){Object.assign(a,{name:"",body:"",payment_amount:0})}function w(){Object.assign(p,{name:[],body:[],payment_amount:[]})}return(d,m)=>{const y=Z,k=P,n=Q;return f(),B(n,{open:V.modelValue,size:"big",actions:"right",title:d.$t("Add_contract_template"),onClose:C},{content:l(()=>[o("div",$e,[o("div",Ve,[s(M,{label:d.$t("Template_title"),required:""},{default:l(()=>[s(Y,null,{default:l(()=>[s(y,{type:"text",placeholder:d.$t("Template_title"),modelValue:t(a).name,"onUpdate:modelValue":m[0]||(m[0]=e=>t(a).name=e)},null,8,["placeholder","modelValue"]),o("p",Ce,v(t(p).name[0]),1)]),_:1})]),_:1},8,["label"]),s(M,{label:d.$t("Body"),required:""},{default:l(()=>[s(t(b),{modelValue:t(a).body,"onUpdate:modelValue":m[1]||(m[1]=e=>t(a).body=e),editor:t(ie),config:t(re)},null,8,["modelValue","editor","config"]),o("p",we,v(t(p).body[0]),1)]),_:1},8,["label"])])])]),action:l(({close:e})=>[s(k,{loading:h.value,color:"primary",outlined:"",type:"button",disabled:h.value,onClick:i},{default:l(()=>[O(v(d.$t("Save")),1)]),_:1},8,["loading","disabled"])]),_:1},8,["open","title"])}}}),Te=["onClick"],xe=o("div",{class:"icon"},[o("i",{class:"iconify","aria-hidden":"true","data-icon":"feather:edit"})],-1),Ne={class:"meta"},Be=o("hr",{class:"dropdown-divider"},null,-1),Ee=["onClick"],Ie=o("div",{class:"icon"},[o("i",{class:"iconify","aria-hidden":"true","data-icon":"feather:trash"})],-1),Ae={class:"meta"},Fe=S({emits:["edit","remove"],setup(V,{emit:u}){return(r,c)=>{const b=ye;return f(),B(b,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:l(({close:_})=>[o("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:F(()=>{u("edit"),_()},["prevent"])},[xe,o("div",Ne,[o("span",null,v(r.$t("Edit")),1)])],8,Te),Be,o("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:F(()=>{u("remove"),_()},["prevent"])},[Ie,o("div",Ae,[o("span",null,v(r.$t("Remove")),1)])],8,Ee)]),_:1})}}}),Se={class:"applicant-list-wrapper"},Me=["textContent"],je={key:0,class:"flex-list-inner"},Qe=S({async setup(V){let u,r;const{t:c}=j();ee({title:c("Contract_templates")+" - Nefrit"});const b=te(),_=ge();he().setPageTitle(c("Contract_templates"));const p=N(!1),a=N(),i=A({pagination:{current_page:1,per_page:10,total:10},result:[]}),C={orderNumber:{format:(n,e,E)=>`${E+1}`,cellClass:"is-flex-grow-0"},name:{label:c("Template_title")},actions:{label:c("Actions"),align:"center"}},$=ae({get:()=>i.pagination.current_page,set:async n=>{await y(n)}});[u,r]=oe(()=>y()),await u,r();function w(n){a.value=n,p.value=!0}async function d(n){a.value=n,_.$patch({confirmModalState:!0})}async function m(){await ue(a.value),await y(),k()}async function y(n=1){const e=await me(n);Object.assign(i,e)}function k(){b.success(c("Success"))}return(n,e)=>{const E=P,R=pe,D=be,U=Fe,q=_e,W=ve,L=fe,z=ke,K=J;return f(),I("div",Se,[s(R,{"justify-content":"end",class:"mb-4"},{default:l(()=>[s(E,{outlined:"",rounded:"",color:"info",icon:"feather:plus",onClick:e[0]||(e[0]=F(T=>w(void 0),["prevent"]))},{default:l(()=>[O(v(n.$t("Add")),1)]),_:1})]),_:1}),s(L,{columns:t(C),data:t(i).result,limit:t(i).pagination.per_page,total:t(i).pagination.total},{default:l(T=>[s(q,{rounded:""},{"header-column":l(({column:g})=>[g.key==="orderNumber"?(f(),I("span",{key:0,class:"is-flex-grow-0",textContent:v("#")},null,8,Me)):x("",!0)]),body:l(()=>[t(i).result.length===0?(f(),I("div",je,[s(D,{title:n.$t("No_data"),subtitle:n.$t("There_is_no_data_that_match_your_query"),class:"my-6"},null,8,["title","subtitle"])])):x("",!0)]),"body-cell":l(({row:g,column:G,value:Oe,index:Pe})=>[G.key==="actions"?(f(),B(U,{key:0,onEdit:H=>w(g.id),onRemove:H=>d(g.id)},null,8,["onEdit","onRemove"])):x("",!0)]),_:1}),t(i).result.length?(f(),B(W,{key:0,"current-page":t($),"onUpdate:current-page":e[1]||(e[1]=g=>ne($)?$.value=g:null),class:"mt-6","item-per-page":t(i).pagination.per_page,"total-items":t(i).pagination.total},null,8,["current-page","item-per-page","total-items"])):x("",!0)]),_:1},8,["columns","data","limit","total"]),s(z,{modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]=T=>p.value=T),"template-id":a.value,"onUpdate:list":e[3]||(e[3]=()=>{y(),k(),a.value=void 0}),onClose:e[4]||(e[4]=T=>a.value=void 0)},null,8,["modelValue","template-id"]),s(K,{onConfirmAction:m})])}}});export{Qe as default};

import{_ as Q,a as X}from"./VFlexTable.vue_vue_type_style_index_0_lang.cc32d678.js";import{_ as Z}from"./VFlexPagination.2909dff1.js";import{_ as ee}from"./ApplicantFlexTableDropdown.vue_vue_type_script_setup_true_lang.58e8a3b8.js";import{_ as te}from"./StatusTag.vue_vue_type_script_setup_true_lang.bf056089.js";import{_ as ae}from"./VPlaceholderSection.vue_vue_type_style_index_0_lang.696c973e.js";import{_ as oe}from"./VCard.vue_vue_type_script_setup_true_lang.41b270e1.js";import{_ as se}from"./VFlex.vue_vue_type_style_index_0_lang.96c8d1f7.js";import{_ as ne}from"./VFlexItem.vue_vue_type_style_index_0_lang.73a7f7bb.js";import{z as le,N as ie,$ as re,O as ce,b as ue,r as T,A as V,e as _e,bx as me,B as pe,o as _,i as y,q as a,Y as de,bO as fe,j as m,w as s,t as d,E as t,v as be,m as E,l as p,f as x,G as ye,a3 as ge,a1 as he,a2 as we,P as ve}from"./index.54471211.js";import{_ as Ve}from"./CountrySelect.vue_vue_type_style_index_0_lang.844dfac2.js";import{_ as xe}from"./StatusSelect.vue_vue_type_script_setup_true_lang.0a7007db.js";import{_ as ke}from"./TableActionsBlock.vue_vue_type_style_index_0_lang.8a548650.js";import{u as $e}from"./viewWrapper.ff650e59.js";import{d as Fe,e as Ce,g as Ae,h as Se}from"./index.31cd0f4b.js";import"./VDropdown.vue_vue_type_style_index_0_lang.f096a086.js";import"./VIcon.vue_vue_type_script_setup_true_lang.8ffe0265.js";import"./VTag.vue_vue_type_style_index_0_lang.92fc6287.js";import"./VOption.vue_vue_type_style_index_0_lang.0c1d2da9.js";import"./lodash.a186609f.js";import"./VButtons.vue_vue_type_script_setup_true_lang.2e7e26f5.js";const Ne={class:"applicant-list-wrapper"},Be={class:"mb-5"},Te={class:"title is-5 mb-2"},Ee=["onSubmit"],Le={class:"columns is-desktop"},Ue={class:"column"},je={class:"column"},Oe={class:"column"},Pe={class:"column"},De=["textContent"],We={key:0,class:"flex-list-inner"},Re={key:0,style:{"overflow-wrap":"break-word"}},Ie={key:2},dt=le({async setup(qe){let k,$;const{t:n,locale:Me}=ie(),L=re();ce({title:n("Applicants")+" - Nefrit"});const U=ue();$e().setPageTitle(n("Applicants_List"));const i=T({pagination:{current_page:1,per_page:10,total:10},result:[]}),l=T({name:"",boss_name:"",country_id:"",status_id:""}),c=V(!1),h=V(!1),w=_e({get:()=>i.pagination.current_page,set:async e=>{await v(e)}}),F=V([]),j={orderNumber:{format:(e,o,u)=>`${u+1}`,cellClass:"is-flex-grow-0"},name:{label:n("Applicant_name"),grow:!0,searchable:!0},boss_name:{label:n("Boss_name"),searchable:!0},phone:{label:n("Phone_number"),searchable:!0},status:{label:n("Status"),searchable:!0},country:{label:n("Country")},actions:{label:n("Actions"),align:"center"}};[k,$]=me(()=>v()),await k,$(),pe(async()=>{const e=await Fe();F.value=e});function O(e){L.push("/app/applicants/"+e)}async function v(e=1){const o=await Ce(e);Object.assign(i,o)}async function P(){try{c.value=!0;const e=await Ae(l);Object.assign(i,e)}catch(e){U.error("Error while fetching filtered data: ",e.message)}finally{c.value=!1}}async function D(){c.value=!0,Object.assign(l,{name:"",boss_name:"",country_id:"",status_id:""}),await v(),c.value=!1}async function W(){try{c.value=!0;const e=await Se(l),o=URL.createObjectURL(new Blob([e],{type:"application/vnd.ms-excel"})),u=document.createElement("a");u.href=o,u.setAttribute("download",`Worksheet_${Date.now()}.xlsx`),document.body.appendChild(u),u.click()}catch(e){console.log({error:e})}finally{c.value=!1}}return(e,o)=>{const u=ke,C=ge,A=he,S=we,R=xe,I=Ve,N=ve,B=ne,q=se,M=oe,z=ae,G=te,H=ee,Y=Q,J=Z,K=X;return _(),y("div",Ne,[a(u,{center:"",title:"","add-disabled":"","remove-disabled":"",onFilter:o[0]||(o[0]=r=>h.value=!h.value),onExport:W}),de(m("div",Be,[a(M,{radius:"small"},{default:s(()=>[m("h3",Te,d(t(n)("Filter_form")),1),m("form",{onSubmit:be(P,["prevent"])},[m("div",Le,[m("div",Ue,[a(S,{label:e.$t("Name")},{default:s(()=>[a(A,null,{default:s(()=>[a(C,{modelValue:t(l).name,"onUpdate:modelValue":o[1]||(o[1]=r=>t(l).name=r),type:"text"},null,8,["modelValue"])]),_:1})]),_:1},8,["label"])]),m("div",je,[a(S,{label:e.$t("Boss_name")},{default:s(()=>[a(A,null,{default:s(()=>[a(C,{modelValue:t(l).boss_name,"onUpdate:modelValue":o[2]||(o[2]=r=>t(l).boss_name=r),type:"text"},null,8,["modelValue"])]),_:1})]),_:1},8,["label"])]),m("div",Oe,[a(R,{modelValue:t(l).status_id,"onUpdate:modelValue":o[3]||(o[3]=r=>t(l).status_id=r),list:F.value},null,8,["modelValue","list"])]),m("div",Pe,[a(I,{modelValue:t(l).country_id,"onUpdate:modelValue":o[4]||(o[4]=r=>t(l).country_id=r)},null,8,["modelValue"])])]),a(q,{"justify-content":"end","column-gap":"1rem"},{default:s(()=>[a(B,null,{default:s(()=>[a(N,{type:"button",disabled:c.value,outlined:"",color:"warning",icon:"feather:x",onClick:D},{default:s(()=>[E(d(t(n)("Clear")),1)]),_:1},8,["disabled"])]),_:1}),a(B,null,{default:s(()=>[a(N,{type:"submit",disabled:c.value,outlined:"",color:"success",icon:"feather:filter"},{default:s(()=>[E(d(t(n)("Filter")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})],40,Ee)]),_:1})],512),[[fe,h.value]]),a(K,{columns:t(j),data:t(i).result,limit:t(i).pagination.per_page,total:t(i).pagination.total},{default:s(r=>[a(Y,{rounded:""},{"header-column":s(({column:f})=>[f.key==="orderNumber"?(_(),y("span",{key:0,class:"is-flex-grow-0",textContent:d("#")},null,8,De)):p("",!0)]),body:s(()=>[t(i).result.length===0?(_(),y("div",We,[a(z,{title:e.$t("No_data"),subtitle:e.$t("There_is_no_data_that_match_your_query"),class:"my-6"},null,8,["title","subtitle"])])):p("",!0)]),"body-cell":s(({row:f,column:g,value:b,index:Ge})=>[g.key==="name"?(_(),y("p",Re,d(b),1)):p("",!0),g.key==="status"&&b?(_(),x(G,{key:1,status:b},null,8,["status"])):p("",!0),g.key==="country"&&b?(_(),y("span",Ie,d(b.name),1)):p("",!0),g.key==="actions"?(_(),x(H,{key:3,onView:He=>O(f.id)},null,8,["onView"])):p("",!0)]),_:1}),t(i).result.length?(_(),x(J,{key:0,"current-page":t(w),"onUpdate:current-page":o[5]||(o[5]=f=>ye(w)?w.value=f:null),class:"mt-6","item-per-page":t(i).pagination.per_page,"total-items":t(i).pagination.total},null,8,["current-page","item-per-page","total-items"])):p("",!0)]),_:1},8,["columns","data","limit","total"])])}}});export{dt as default};

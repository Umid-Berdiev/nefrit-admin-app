import{d as t,a as n,b as u,S as c}from"./index.b7e98af4.js";const g=t(async({router:a,api:f,pinia:i})=>{a.beforeEach(async(e,o)=>{const r=n(i),s=u();if(o===c&&r.isLoggedIn)try{r.fetchProfile()}catch{if(r.logoutUser(),s.error("Your session is invalid"),e.meta.requiresAuth)return{name:"auth",query:{redirect:e.fullPath}}}else if(e.meta.requiresAuth&&!r.isLoggedIn)return s.error({message:"Sorry, you should loggin to access this section",duration:5e3}),{name:"/",query:{redirect:e.fullPath}}})});export{g as default};

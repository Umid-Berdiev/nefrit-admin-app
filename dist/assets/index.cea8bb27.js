import{_ as Z}from"./ConfirmActionModal.dc1a3c08.js";import{_ as ee}from"./ContractFormModal.075f0bf1.js";import{_ as te,a as oe}from"./VFlexTable.4ba052d2.js";import{_ as ne}from"./VFlexPagination.b3a191bb.js";import{_ as ae}from"./VDropdown.a61ebde9.js";import{K as T,p as n,q as y,s as p,y as s,D as _,H as M,a0 as se,m as re,r as D,c as S,bI as ie,bp as le,x as c,f as i,M as o,i as ce,B as m,F as me,G as pe}from"./index.f060b7c6.js";import{_ as _e}from"./VTag.97e5d79c.js";import{_ as ue}from"./VPlaceholderSection.afc34ed0.js";import{_ as de,a as fe}from"./TableActionsBlock.3e62a7b3.js";import{_ as ge}from"./VField.17e54227.js";import{a as he,_ as ye}from"./VControl.068ba628.js";import{u as ve}from"./vue-i18n.runtime.esm-bundler.1634ed66.js";import{u as be}from"./viewWrapper.7134460b.js";import{u as $e}from"./VModal.7c3df6a9.js";import{r as we,a as Ce}from"./index.fc264705.js";import{u as Ve}from"./useNotyf.14aeb83f.js";import"./VFileInput.5ba11aca.js";import"./index.acac9876.js";import"./VIcon.a5a02b18.js";import"./useDropdown.191976f8.js";import"./VButtons.eeafcbc5.js";const ke=["onClick"],Ne=s("div",{class:"icon"},[s("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),xe={class:"meta"},Fe=s("hr",{class:"dropdown-divider"},null,-1),Me=["onClick"],De=s("div",{class:"icon"},[s("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),Se={class:"meta"},Te=T({emits:["view","remove"],setup(A,{emit:u}){return(d,N)=>{const t=ae;return n(),y(t,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:p(({close:v})=>[s("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:M(()=>{u("view"),v()},["prevent"])},[Ne,s("div",xe,[s("span",null,_(d.$t("View")),1)])],8,ke),Fe,s("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:M(()=>{u("remove"),v()},["prevent"])},[De,s("div",Se,[s("span",null,_(d.$t("Remove")),1)])],8,Me)]),_:1})}}}),Ae={class:"applicant-list-wrapper"},Re=["textContent"],Be={key:0,class:"flex-list-inner"},Pe={key:0},Ie={key:1},Ue={key:3},lt=T({async setup(A){let u,d;const N=se(),{t,locale:v}=ve(),R=$e(),b=Ve(),r=re({pagination:{current_page:1,per_page:10,total:10},result:[]}),$=D(!1),f=D(),w=S({get(){return""},async set(e){}}),B=S(()=>({orderNumber:{format:(e,a,V)=>`${V+1}`,cellClass:"is-flex-grow-0"},name:{label:t("Name"),searchable:!0,grow:!0},legal_entity:{label:t("Applicant"),grow:!0},applications:{label:t("Statements")},payment_amount:{label:t("Contract_amount")},verified_at:{label:t("Payment_status"),grow:!0},created_at:{label:t("Date")},actions:{label:t("Actions"),align:"center"}}));be().setPageTitle(t("Contracts_List")),ie({title:t("Contracts")+" - Nefrit"}),[u,d]=le(()=>C()),await u,d();function P(){$.value=!0}function I(e){f.value=e,N.push(`/app/contracts/${e}`)}async function U(e){f.value=e,R.$patch({confirmModalState:!0})}async function W(){try{await we(Number(f.value)),C(),b.success(t("Removed_successfully"))}catch(e){b.error(t(e.response?.data.error.message))}}async function C(e=1){const a=await Ce(e);Object.assign(r,a)}function x(){f.value=void 0}function Y(){b.success(t("Updated_successfully"))}return(e,a)=>{const V=de,q=he,E=ye,H=ge,L=fe,O=ue,j=_e,z=Te,G=te,K=ne,J=oe,Q=ee,X=Z;return n(),c("div",Ae,[i(V,{center:"",title:"",onAdd:P,"filter-disabled":!0,"print-disabled":!0,"remove-disabled":!0}),i(J,{columns:o(B),data:o(r).result,limit:o(r).pagination.per_page,total:o(r).pagination.total},{default:p(F=>[i(L,null,{left:p(()=>[i(H,null,{default:p(()=>[i(E,{icon:"feather:search"},{default:p(()=>[i(q,{modelValue:o(w),"onUpdate:modelValue":a[0]||(a[0]=l=>ce(w)?w.value=l:null),class:"is-rounded",placeholder:o(t)("Search")+"..."},null,8,["modelValue","placeholder"])]),_:1})]),_:1})]),_:1}),i(G,{rounded:""},{"header-column":p(({column:l})=>[l.key==="orderNumber"?(n(),c("span",{key:0,class:"is-flex-grow-0",textContent:_("#")},null,8,Re)):m("",!0)]),body:p(()=>[o(r).result.length===0?(n(),c("div",Be,[i(O,{title:e.$t("No_data"),subtitle:e.$t("There_is_no_data_that_match_your_query"),class:"my-6"},null,8,["title","subtitle"])])):m("",!0)]),"body-cell":p(({row:l,column:g,value:h,index:Ye})=>[g.key==="legal_entity"?(n(),c("span",Pe,_(h.name),1)):m("",!0),g.key==="applications"?(n(),c("ul",Ie,[(n(!0),c(me,null,pe(h,k=>(n(),c("li",null,_(k.code),1))),256))])):m("",!0),g.key==="verified_at"?(n(),y(j,{key:2,class:"is-size-6",color:h?"primary":"warning",rounded:"",label:h?e.$t("Paid"):e.$t("Not_Paid")},null,8,["color","label"])):m("",!0),g.key==="created_at"?(n(),c("span",Ue,_(e.$h.formatDate(h,"DD.MM.YYYY")),1)):m("",!0),g.key==="actions"?(n(),y(z,{key:4,onView:k=>I(l.id),onRemove:k=>U(l.id)},null,8,["onView","onRemove"])):m("",!0)]),_:1}),o(r).result.length?(n(),y(K,{key:0,"current-page":o(r).pagination.current_page,"onUpdate:current-page":a[1]||(a[1]=l=>o(r).pagination.current_page=l),class:"mt-6","item-per-page":o(r).pagination.per_page,"total-items":o(r).pagination.total},null,8,["current-page","item-per-page","total-items"])):m("",!0)]),_:1},8,["columns","data","limit","total"]),i(Q,{modelValue:$.value,"onUpdate:modelValue":a[2]||(a[2]=F=>$.value=F),"item-id":f.value,"onUpdate:list":a[3]||(a[3]=()=>{C(),Y(),x()}),onClose:x},null,8,["modelValue","item-id"]),i(X,{onConfirmAction:W})])}}});export{lt as default};

import{_ as be}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang.dce3b8a4.js";import{_ as he}from"./ContractFormModal.vue_vue_type_script_setup_true_lang.90037b68.js";import{_ as $e,a as Ve}from"./VFlexTable.vue_vue_type_style_index_0_lang.d0133d2a.js";import{_ as ke}from"./VFlexPagination.4ad8009f.js";import{_ as we}from"./VDropdown.vue_vue_type_style_index_0_lang.03878fe4.js";import{z as J,o as r,f as Y,w as o,j as l,t as c,v as D,i as m,l as u,Z as Ce,a as Ye,N as De,b as Me,r as R,e as G,A as N,bQ as P,O as Fe,bv as Ne,p as Pe,q as e,E as a,m as S,X as Se,bM as Ae,x as Q,bn as X,F as Ue,s as xe,G as Be,P as Re,a4 as Te,a2 as je,a3 as Ie}from"./index.b7e98af4.js";import{_ as Oe}from"./VTag.vue_vue_type_script_setup_true_lang.ec4a8308.js";import{_ as Ee}from"./VPlaceholderSection.vue_vue_type_style_index_0_lang.0e585ba4.js";import{_ as Le}from"./VCard.vue_vue_type_script_setup_true_lang.df2613e1.js";import{_ as We}from"./VFlexItem.vue_vue_type_style_index_0_lang.397011dc.js";import{_ as T,a as qe}from"./VOption.vue_vue_type_style_index_0_lang.461b001c.js";import{_ as ze}from"./VFlex.vue_vue_type_style_index_0_lang.74d0a329.js";import{u as He}from"./viewWrapper.d9abd62c.js";import{u as Ge}from"./index.c559e891.js";import{n as Z,r as Qe}from"./index.41b26cd7.js";import"./VModal.vue_vue_type_style_index_0_lang.b79e53f5.js";import"./VFileInput.vue_vue_type_script_setup_true_lang.926fe497.js";import"./index.ae45a4a8.js";import"./VIcon.vue_vue_type_script_setup_true_lang.fc7bb1c3.js";const Xe=["onClick"],Ze=l("div",{class:"icon"},[l("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),Je={class:"meta"},Ke=l("hr",{class:"dropdown-divider"},null,-1),et=["onClick"],tt=l("div",{class:"icon"},[l("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),at={class:"meta"},ot=J({props:{removeBtn:{type:Boolean,default:!1}},emits:["view","remove"],setup(j,{emit:$}){return(V,I)=>{const M=we;return r(),Y(M,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:o(({close:s})=>[l("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:D(()=>{$("view"),s()},["prevent"])},[Ze,l("div",Je,[l("span",null,c(V.$t("View")),1)])],8,Xe),Ke,j.removeBtn?(r(),m("a",{key:0,role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:D(()=>{$("remove"),s()},["prevent"])},[tt,l("div",at,[l("span",null,c(V.$t("Remove")),1)])],8,et)):u("",!0)]),_:1})}}}),nt={class:"applicant-list-wrapper"},lt={class:"mb-5"},st={class:"title is-5 mb-2"},it=["onSubmit"],rt={class:"columns is-desktop"},ct={class:"column"},dt={class:"column"},ut={class:"column"},mt={class:"column"},_t={class:"column"},pt={class:"column"},ft=["textContent"],vt={key:0,class:"flex-list-inner"},gt={key:0},yt={key:1},bt={key:2},ht={key:4},$t={key:5},Et=J({async setup(j){let $,V;const I=Ce(),{userRoleID:M}=Ye(),{t:s,locale:O}=De(),K=Ge(),F=Me(),_=R({pagination:{current_page:1,per_page:10,total:10},result:[]}),A=G({get:()=>_.pagination.current_page,set:async t=>{await w(t)}}),g=N(!1),U=N(!1),x=N(!1),k=N(),ee=G(()=>({orderNumber:{format:(t,n,y)=>`${y+1}`,cellClass:"is-flex-grow-0"},name:{label:s("Name"),searchable:!0,grow:!0},legal_entity:{label:s("Applicant"),grow:!0},applications:{label:s("Statements")},payment_amount:{label:s("Contract_amount")},is_paid:{label:s("Payment_status"),grow:!0},contract_date:{label:s("Contract_date"),grow:!0},verified_at:{label:s("verified_at"),grow:!0},actions:{label:s("Actions"),align:"center"}})),te=He(),d=R({name:"",legal_entity_name:"",application_code:"",is_paid:"",start_contract_date:P().subtract(1,"month").format("YYYY-MM-DD"),end_contract_date:P().format("YYYY-MM-DD")}),E=R({type:"string",mask:"YYYY-MM-DD"}),L={input:"DD.MM.YYYY"};te.setPageTitle(s("Contracts_List")),Fe({title:s("Contracts")+" - Nefrit"}),[$,V]=Ne(()=>w()),await $,V();function ae(){U.value=!0}function oe(t){k.value=t,I.push(`/app/contracts/${t}`)}async function ne(t){k.value=t,K.$patch({confirmModalState:!0})}async function le(){try{await Qe(Number(k.value)),w(),F.success(s("Removed_successfully"))}catch(t){F.error(s(t.response?.data.error.message))}}async function w(t=1){const n=await Z({page:t,...d});Object.assign(_,n)}function W(){k.value=void 0}function se(){F.success(s("Updated_successfully"))}async function ie(){try{g.value=!0;const t=await Z({page:1,...d});Object.assign(_,t)}catch(t){F.error("Error while fetching filtered data: ",t.message)}finally{g.value=!1}}async function re(){g.value=!0,Object.assign(d,{name:"",legal_entity_name:"",application_code:"",is_paid:"",start_contract_date:P().subtract(1,"month").format("YYYY-MM-DD"),end_contract_date:P().format("YYYY-MM-DD")}),await w(),g.value=!1}return(t,n)=>{const y=Re,q=ze,C=Te,b=je,h=Ie,ce=qe,z=Pe("VDatePicker"),H=We,de=Le,ue=Ee,me=Oe,_e=ot,pe=$e,fe=ke,ve=Ve,ge=he,ye=be;return r(),m("div",nt,[e(q,{"justify-content":"end",class:"mb-4","column-gap":"1rem"},{default:o(()=>[[1,2,7].includes(a(M))?(r(),Y(y,{key:0,outlined:"",rounded:"",color:"info",icon:"feather:plus",onClick:D(ae,["prevent"])},{default:o(()=>[S(c(t.$t("Add")),1)]),_:1},8,["onClick"])):u("",!0),e(y,{outlined:"",rounded:"",color:"warning",icon:"feather:filter",onClick:n[0]||(n[0]=D(i=>x.value=!x.value,["prevent"]))},{default:o(()=>[S(c(t.$t("Filter")),1)]),_:1})]),_:1}),Se(l("div",lt,[e(de,{radius:"small"},{default:o(()=>[l("h3",st,c(a(s)("Filter_form")),1),l("form",{onSubmit:D(ie,["prevent"])},[l("div",rt,[l("div",ct,[e(h,{label:t.$t("Name")},{default:o(()=>[e(b,null,{default:o(()=>[e(C,{modelValue:a(d).name,"onUpdate:modelValue":n[1]||(n[1]=i=>a(d).name=i),type:"text"},null,8,["modelValue"])]),_:1})]),_:1},8,["label"])]),l("div",dt,[e(h,{label:t.$t("Applicant_name")},{default:o(()=>[e(b,null,{default:o(()=>[e(C,{modelValue:a(d).legal_entity_name,"onUpdate:modelValue":n[2]||(n[2]=i=>a(d).legal_entity_name=i),type:"text"},null,8,["modelValue"])]),_:1})]),_:1},8,["label"])]),l("div",ut,[e(h,{label:t.$t("statement_code")},{default:o(()=>[e(b,null,{default:o(()=>[e(C,{modelValue:a(d).application_code,"onUpdate:modelValue":n[3]||(n[3]=i=>a(d).application_code=i),type:"text"},null,8,["modelValue"])]),_:1})]),_:1},8,["label"])]),l("div",mt,[e(h,{label:t.$t("Payment_status")},{default:o(()=>[e(b,null,{default:o(()=>[e(ce,{modelValue:a(d).is_paid,"onUpdate:modelValue":n[4]||(n[4]=i=>a(d).is_paid=i)},{default:o(()=>[e(T,{value:"",textContent:c(t.$t("All"))},null,8,["textContent"]),e(T,{value:0,textContent:c(t.$t("Not_Paid"))},null,8,["textContent"]),e(T,{value:1,textContent:c(t.$t("Paid"))},null,8,["textContent"])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label"])]),l("div",_t,[e(z,{locale:a(O),modelValue:a(d).start_contract_date,"onUpdate:modelValue":n[5]||(n[5]=i=>a(d).start_contract_date=i),color:"green","trim-weeks":"",masks:L,"model-config":a(E)},{default:o(({inputValue:i,inputEvents:p})=>[e(h,{label:t.$t("From")},{default:o(()=>[e(b,{icon:"feather:calendar"},{default:o(()=>[e(C,Q({value:i},X(p)),null,16,["value"])]),_:2},1024)]),_:2},1032,["label"])]),_:1},8,["locale","modelValue","model-config"])]),l("div",pt,[e(z,{locale:a(O),modelValue:a(d).end_contract_date,"onUpdate:modelValue":n[6]||(n[6]=i=>a(d).end_contract_date=i),color:"green","trim-weeks":"",masks:L,"model-config":a(E)},{default:o(({inputValue:i,inputEvents:p})=>[e(h,{label:t.$t("To")},{default:o(()=>[e(b,{icon:"feather:calendar"},{default:o(()=>[e(C,Q({value:i},X(p)),null,16,["value"])]),_:2},1024)]),_:2},1032,["label"])]),_:1},8,["locale","modelValue","model-config"])])]),e(q,{"justify-content":"end","column-gap":"1rem"},{default:o(()=>[e(H,null,{default:o(()=>[e(y,{type:"button",disabled:g.value,outlined:"",color:"warning",icon:"feather:x",onClick:re},{default:o(()=>[S(c(a(s)("Clear")),1)]),_:1},8,["disabled"])]),_:1}),e(H,null,{default:o(()=>[e(y,{type:"submit",disabled:g.value,outlined:"",color:"success",icon:"feather:filter"},{default:o(()=>[S(c(a(s)("Filter")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})],40,it)]),_:1})],512),[[Ae,x.value]]),e(ve,{columns:a(ee),data:a(_).result,limit:a(_).pagination.per_page,total:a(_).pagination.total},{default:o(i=>[e(pe,{rounded:""},{"header-column":o(({column:p})=>[p.key==="orderNumber"?(r(),m("span",{key:0,class:"is-flex-grow-0",textContent:c("#")},null,8,ft)):u("",!0)]),body:o(()=>[a(_).result.length===0?(r(),m("div",vt,[e(ue,{title:t.$t("No_data"),subtitle:t.$t("There_is_no_data_that_match_your_query"),class:"my-6"},null,8,["title","subtitle"])])):u("",!0)]),"body-cell":o(({row:p,column:v,value:f,index:Vt})=>[v.key==="legal_entity"?(r(),m("span",gt,c(f.name),1)):u("",!0),v.key==="applications"?(r(),m("ul",yt,[(r(!0),m(Ue,null,xe(f,B=>(r(),m("li",null,c(B.uuid),1))),256))])):u("",!0),v.key==="payment_amount"?(r(),m("span",bt,c(Number(f).toLocaleString()),1)):u("",!0),v.key==="is_paid"?(r(),Y(me,{key:3,class:"is-size-6",color:f?"primary":"warning",rounded:"",label:f?t.$t("Paid"):t.$t("Not_Paid")},null,8,["color","label"])):u("",!0),v.key==="contract_date"&&f?(r(),m("span",ht,c(t.$h.formatDate(f,"DD.MM.YYYY")),1)):u("",!0),v.key==="verified_at"&&f?(r(),m("span",$t,c(t.$h.formatDate(f,"DD.MM.YYYY")),1)):u("",!0),v.key==="actions"?(r(),Y(_e,{key:6,onView:B=>oe(p.id),onRemove:B=>ne(p.id),"remove-btn":[1,2,7].includes(a(M))},null,8,["onView","onRemove","remove-btn"])):u("",!0)]),_:1}),a(_).result.length?(r(),Y(fe,{key:0,"current-page":a(A),"onUpdate:current-page":n[7]||(n[7]=p=>Be(A)?A.value=p:null),class:"mt-6","item-per-page":a(_).pagination.per_page,"total-items":a(_).pagination.total},null,8,["current-page","item-per-page","total-items"])):u("",!0)]),_:1},8,["columns","data","limit","total"]),e(ge,{modelValue:U.value,"onUpdate:modelValue":n[8]||(n[8]=i=>U.value=i),"item-id":k.value,"onUpdate:list":n[9]||(n[9]=()=>{w(),se(),W()}),onClose:W},null,8,["modelValue","item-id"]),e(ye,{onConfirmAction:le})])}}});export{Et as default};

import{_ as J}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang.82e6fa1d.js";import{_ as K}from"./VModal.vue_vue_type_style_index_0_lang.61b38c15.js";import{A as j,O as E,B as w,r as T,E as X,C as Y,q as Z,o as h,g as M,w as n,k as l,s as t,G as a,t as b,x as A,p as O,a5 as ee,a3 as te,a4 as ae,Q as x,P as ne,b as oe,f as se,bv as le,j as F,m as I,H as ie}from"./index.bb4908f5.js";import{f as re,a as de,u as ue,c as me,b as ce,r as pe}from"./index.51d39f00.js";import{_ as _e,a as fe}from"./VFlexTable.vue_vue_type_style_index_0_lang.e91991ed.js";import{_ as ve}from"./VFlexPagination.6f519b0d.js";import{_ as ge}from"./VDropdown.vue_vue_type_style_index_0_lang.c6874a9c.js";import{_ as he}from"./VPlaceholderSection.vue_vue_type_style_index_0_lang.fc527a37.js";import{_ as be}from"./VFlex.vue_vue_type_style_index_0_lang.2810b5dd.js";import{u as $e}from"./viewWrapper.337e6d03.js";import{u as ye}from"./index.2a55e875.js";import"./VIcon.vue_vue_type_script_setup_true_lang.654e5aba.js";const Ve=["onSubmit"],we={class:"columns is-multiline"},Ce={class:"column is-12"},Ne={class:"help has-text-danger"},ke={class:"column is-12"},Se={class:"help has-text-danger"},ze=j({props:{modelValue:Boolean,departmentId:{type:Number,default:null}},emits:["update:modelValue","update:list"],setup(S,{emit:_}){const u=S,{t:m}=E(),$=w(m("Add")),c=w(!1),z=w([]),C=T({"name.uz":[],"name.en":[],"name.ru":[],stages:[]}),e=T({name:{uz:"",ru:"",en:""},stages:[]});X(()=>u.departmentId,async o=>{if(o){$.value=m("Edit");const s=await re(Number(u.departmentId));Object.assign(e,s),Object.assign(e.stages,s.stages.map(({id:v})=>v))}},{deep:!0,immediate:!0}),Y(async()=>{const o=await de();z.value=o});async function N(o){try{c.value=!0,u.departmentId?await ue(u.departmentId,e):await me(e),_("update:list"),y()}catch(s){Object.assign(C,s.response?.data?.errors)}finally{c.value=!1}}function y(){$.value=m("Add"),f(),D(),_("update:modelValue",!1)}function f(){Object.assign(e,{name:{uz:"",ru:"",en:""},stages:[]})}function D(){Object.assign(C,{"name.uz":[],"name.en":[],"name.ru":[],stages:[]})}return(o,s)=>{const v=ee,p=te,g=ae,r=Z("Multiselect"),i=x,k=K;return h(),M(k,{open:S.modelValue,size:"large",actions:"right",title:$.value,onClose:s[4]||(s[4]=d=>y())},{content:n(()=>[l("form",{id:"department-form",class:"modal-form",onSubmit:A(N,["prevent"])},[l("div",we,[l("div",Ce,[t(g,{label:o.$t("Name_uz"),required:""},{default:n(()=>[t(p,null,{default:n(()=>[t(v,{modelValue:a(e).name.uz,"onUpdate:modelValue":s[0]||(s[0]=d=>a(e).name.uz=d),name:"name_uz",placeholder:o.$t("Type_name_uz")},null,8,["modelValue","placeholder"]),l("p",Ne,b(a(C)["name.uz"][0]),1)]),_:1})]),_:1},8,["label"]),t(g,{label:o.$t("Name_ru")},{default:n(()=>[t(p,null,{default:n(()=>[t(v,{modelValue:a(e).name.ru,"onUpdate:modelValue":s[1]||(s[1]=d=>a(e).name.ru=d),name:"name_ru",placeholder:o.$t("Type_name_ru")},null,8,["modelValue","placeholder"])]),_:1})]),_:1},8,["label"]),t(g,{label:o.$t("Name_en")},{default:n(()=>[t(p,null,{default:n(()=>[t(v,{name:"name_en",placeholder:o.$t("Type_name_en"),modelValue:a(e).name.en,"onUpdate:modelValue":s[2]||(s[2]=d=>a(e).name.en=d)},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"])]),l("div",ke,[t(g,{label:o.$t("Stages"),required:""},{default:n(()=>[t(p,null,{default:n(()=>[t(r,{modelValue:a(e).stages,"onUpdate:modelValue":s[3]||(s[3]=d=>a(e).stages=d),searchable:!1,options:z.value,placeholder:o.$t("Select_stages"),"value-prop":"id",label:"name",mode:"tags","close-on-select":!1},null,8,["modelValue","options","placeholder"]),l("p",Se,b(a(C).stages[0]),1)]),_:1})]),_:1},8,["label"])])])],40,Ve)]),action:n(({close:d})=>[t(i,{loading:c.value,color:"primary",outlined:"",type:"submit",form:"department-form",disabled:c.value},{default:n(()=>[O(b(o.$t("Save")),1)]),_:1},8,["loading","disabled"])]),_:1},8,["open","title"])}}}),Be=["onClick"],Ie=l("div",{class:"icon"},[l("i",{class:"iconify","aria-hidden":"true","data-icon":"feather:edit"})],-1),Me={class:"meta"},Ae=l("hr",{class:"dropdown-divider"},null,-1),De=["onClick"],Fe=l("div",{class:"icon"},[l("i",{class:"iconify","aria-hidden":"true","data-icon":"feather:trash"})],-1),Te={class:"meta"},je=j({emits:["edit","remove"],setup(S,{emit:_}){return(u,m)=>{const $=ge;return h(),M($,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:n(({close:c})=>[l("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:A(()=>{_("edit"),c()},["prevent"])},[Ie,l("div",Me,[l("span",null,b(u.$t("Edit")),1)])],8,Be),Ae,l("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:A(()=>{_("remove"),c()},["prevent"])},[Fe,l("div",Te,[l("span",null,b(u.$t("Remove")),1)])],8,De)]),_:1})}}}),Ee={class:"applicant-list-wrapper"},Oe=["textContent"],xe={key:0,class:"flex-list-inner"},et=j({async setup(S){let _,u;const{t:m,locale:$}=E();ne({title:m("Departments")+" - Nefrit"});const c=oe(),z=ye();$e().setPageTitle(m("Departments_List"));const e=T({pagination:{current_page:1,per_page:10,total:10},result:[]}),N=se({get:()=>e.pagination.current_page,set:async r=>{await p(r)}}),y=w(!1);w([]);const f=w(),D={orderNumber:{format:(r,i,k)=>`${k+1}`,cellClass:"is-flex-grow-0"},name:{label:m("Name")},actions:{label:m("Actions"),align:"center"}};[_,u]=le(()=>p()),await _,u();function o(r=void 0){y.value=!0,f.value=r}async function s(r){f.value=r,z.$patch({confirmModalState:!0})}async function v(){await pe(f.value),await p(),g()}async function p(r=1){const i=await ce(r);Object.assign(e,i)}function g(){c.success(m("Success"))}return(r,i)=>{const k=x,d=be,U=he,R=je,P=_e,q=ve,L=fe,W=ze,H=J;return h(),F("div",Ee,[t(d,{"justify-content":"end",class:"mb-4"},{default:n(()=>[t(k,{outlined:"",rounded:"",color:"info",icon:"feather:plus",onClick:i[0]||(i[0]=A(B=>o(),["prevent"]))},{default:n(()=>[O(b(r.$t("Add")),1)]),_:1})]),_:1}),t(L,{columns:a(D),data:a(e).result,limit:a(e).pagination.per_page,total:a(e).pagination.total},{default:n(B=>[t(P,{rounded:""},{"header-column":n(({column:V})=>[V.key==="orderNumber"?(h(),F("span",{key:0,class:"is-flex-grow-0",textContent:b("#")},null,8,Oe)):I("",!0)]),body:n(()=>[a(e).result.length===0?(h(),F("div",xe,[t(U,{title:r.$t("No_data"),subtitle:r.$t("There_is_no_data_that_match_your_query"),class:"my-6"},null,8,["title","subtitle"])])):I("",!0)]),"body-cell":n(({row:V,column:G,value:Ue,index:Re})=>[G.key==="actions"?(h(),M(R,{key:0,onEdit:Q=>o(V.id),onRemove:Q=>s(V.id)},null,8,["onEdit","onRemove"])):I("",!0)]),_:1}),a(e).result.length?(h(),M(q,{key:0,"current-page":a(N),"onUpdate:current-page":i[1]||(i[1]=V=>ie(N)?N.value=V:null),class:"mt-6","item-per-page":a(e).pagination.per_page,"total-items":a(e).pagination.total},null,8,["current-page","item-per-page","total-items"])):I("",!0)]),_:1},8,["columns","data","limit","total"]),t(W,{modelValue:y.value,"onUpdate:modelValue":i[2]||(i[2]=B=>y.value=B),"department-id":f.value,"onUpdate:list":i[3]||(i[3]=()=>{p(),g(),f.value=void 0}),onClose:i[4]||(i[4]=B=>f.value=void 0)},null,8,["modelValue","department-id"]),t(H,{onConfirmAction:v})])}}});export{et as default};

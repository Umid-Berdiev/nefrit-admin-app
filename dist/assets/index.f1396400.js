import{_ as be}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang.82e6fa1d.js";import{_ as he}from"./ContractFormModal.vue_vue_type_script_setup_true_lang.5e250728.js";import{_ as $e,a as Ve}from"./VFlexTable.vue_vue_type_style_index_0_lang.e91991ed.js";import{_ as ke}from"./VFlexPagination.6f519b0d.js";import{_ as we}from"./VDropdown.vue_vue_type_style_index_0_lang.c6874a9c.js";import{A as X,o as r,g as Y,w as o,k as l,t as c,x as D,j as m,m as u,$ as Ce,a as Ye,O as De,b as Me,r as R,f as z,B as N,bQ as P,P as Fe,bv as Ne,q as Pe,s as e,G as a,p as S,Y as Se,bM as Ae,y as G,bn as J,F as Ue,v as xe,H as Be,Q as Re,a5 as Te,a3 as je,a4 as Ie}from"./index.bb4908f5.js";import{_ as Oe}from"./VTag.vue_vue_type_script_setup_true_lang.eb71c5fe.js";import{_ as Le}from"./VPlaceholderSection.vue_vue_type_style_index_0_lang.fc527a37.js";import{_ as Ee}from"./VCard.vue_vue_type_script_setup_true_lang.c77be0ea.js";import{_ as He}from"./VFlexItem.vue_vue_type_style_index_0_lang.1fb4a212.js";import{_ as T,a as We}from"./VOption.vue_vue_type_style_index_0_lang.98659e9a.js";import{_ as qe}from"./VFlex.vue_vue_type_style_index_0_lang.2810b5dd.js";import{u as Qe}from"./viewWrapper.337e6d03.js";import{u as ze}from"./index.2a55e875.js";import{n as K,r as Ge}from"./index.1a4077bb.js";import"./VModal.vue_vue_type_style_index_0_lang.61b38c15.js";import"./VFileInput.vue_vue_type_script_setup_true_lang.c63c47c0.js";import"./index.5f8856fe.js";import"./VIcon.vue_vue_type_script_setup_true_lang.654e5aba.js";const Je=["onClick"],Ke=l("div",{class:"icon"},[l("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),Xe={class:"meta"},Ze=l("hr",{class:"dropdown-divider"},null,-1),et=["onClick"],tt=l("div",{class:"icon"},[l("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),at={class:"meta"},ot=X({props:{removeBtn:{type:Boolean,default:!1}},emits:["view","remove"],setup(j,{emit:$}){return(V,I)=>{const M=we;return r(),Y(M,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:o(({close:s})=>[l("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:D(()=>{$("view"),s()},["prevent"])},[Ke,l("div",Xe,[l("span",null,c(V.$t("View")),1)])],8,Je),Ze,j.removeBtn?(r(),m("a",{key:0,role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:D(()=>{$("remove"),s()},["prevent"])},[tt,l("div",at,[l("span",null,c(V.$t("Remove")),1)])],8,et)):u("",!0)]),_:1})}}}),nt={class:"applicant-list-wrapper"},lt={class:"mb-5"},st={class:"title is-5 mb-2"},it=["onSubmit"],rt={class:"columns is-desktop"},ct={class:"column"},dt={class:"column"},ut={class:"column"},mt={class:"column"},_t={class:"column"},pt={class:"column"},ft=["textContent"],gt={key:0,class:"flex-list-inner"},vt={key:0},yt={key:1},bt={key:2},ht={key:4},$t={key:5},Lt=X({async setup(j){let $,V;const I=Ce(),{userRoleID:M}=Ye(),{t:s,locale:O}=De(),Z=ze(),F=Me(),_=R({pagination:{current_page:1,per_page:10,total:10},result:[]}),A=z({get:()=>_.pagination.current_page,set:async t=>{await w(t)}}),v=N(!1),U=N(!1),x=N(!1),k=N(),ee=z(()=>({orderNumber:{format:(t,n,y)=>`${y+1}`,cellClass:"is-flex-grow-0"},name:{label:s("Name"),searchable:!0,grow:!0},legal_entity:{label:s("Applicant"),grow:!0},applications:{label:s("Statements")},payment_amount:{label:s("Contract_amount")},is_paid:{label:s("Payment_status"),grow:!0},contract_date:{label:s("Contract_date"),grow:!0},verified_at:{label:s("verified_at"),grow:!0},actions:{label:s("Actions"),align:"center"}})),te=Qe(),d=R({name:"",legal_entity_name:"",application_code:"",is_paid:"",start_contract_date:P().subtract(1,"month").format("YYYY-MM-DD"),end_contract_date:P().format("YYYY-MM-DD")}),L=R({type:"string",mask:"YYYY-MM-DD"}),E={input:"DD.MM.YYYY"};te.setPageTitle(s("Contracts_List")),Fe({title:s("Contracts")+" - Nefrit"}),[$,V]=Ne(()=>w()),await $,V();function ae(){U.value=!0}function oe(t){k.value=t,I.push(`/app/contracts/${t}`)}async function ne(t){k.value=t,Z.$patch({confirmModalState:!0})}async function le(){try{await Ge(Number(k.value)),w(),F.success(s("Removed_successfully"))}catch(t){F.error(s(t.response?.data.error.message))}}async function w(t=1){const n=await K({page:t,...d});Object.assign(_,n)}function H(){k.value=void 0}function se(){F.success(s("Updated_successfully"))}async function ie(){try{v.value=!0;const t=await K({page:1,...d});Object.assign(_,t)}catch(t){F.error("Error while fetching filtered data: ",t.message)}finally{v.value=!1}}async function re(){v.value=!0,Object.assign(d,{name:"",legal_entity_name:"",application_code:"",is_paid:"",start_contract_date:P().subtract(1,"month").format("YYYY-MM-DD"),end_contract_date:P().format("YYYY-MM-DD")}),await w(),v.value=!1}return(t,n)=>{const y=Re,W=qe,C=Te,b=je,h=Ie,ce=We,q=Pe("VDatePicker"),Q=He,de=Ee,ue=Le,me=Oe,_e=ot,pe=$e,fe=ke,ge=Ve,ve=he,ye=be;return r(),m("div",nt,[e(W,{"justify-content":"end",class:"mb-4","column-gap":"1rem"},{default:o(()=>[[1,2,7].includes(a(M))?(r(),Y(y,{key:0,outlined:"",rounded:"",color:"info",icon:"feather:plus",onClick:D(ae,["prevent"])},{default:o(()=>[S(c(t.$t("Add")),1)]),_:1},8,["onClick"])):u("",!0),e(y,{outlined:"",rounded:"",color:"warning",icon:"feather:filter",onClick:n[0]||(n[0]=D(i=>x.value=!x.value,["prevent"]))},{default:o(()=>[S(c(t.$t("Filter")),1)]),_:1})]),_:1}),Se(l("div",lt,[e(de,{radius:"small"},{default:o(()=>[l("h3",st,c(a(s)("Filter_form")),1),l("form",{onSubmit:D(ie,["prevent"])},[l("div",rt,[l("div",ct,[e(h,{label:t.$t("Name")},{default:o(()=>[e(b,null,{default:o(()=>[e(C,{modelValue:a(d).name,"onUpdate:modelValue":n[1]||(n[1]=i=>a(d).name=i),type:"text"},null,8,["modelValue"])]),_:1})]),_:1},8,["label"])]),l("div",dt,[e(h,{label:t.$t("Applicant_name")},{default:o(()=>[e(b,null,{default:o(()=>[e(C,{modelValue:a(d).legal_entity_name,"onUpdate:modelValue":n[2]||(n[2]=i=>a(d).legal_entity_name=i),type:"text"},null,8,["modelValue"])]),_:1})]),_:1},8,["label"])]),l("div",ut,[e(h,{label:t.$t("statement_code")},{default:o(()=>[e(b,null,{default:o(()=>[e(C,{modelValue:a(d).application_code,"onUpdate:modelValue":n[3]||(n[3]=i=>a(d).application_code=i),type:"text"},null,8,["modelValue"])]),_:1})]),_:1},8,["label"])]),l("div",mt,[e(h,{label:t.$t("Payment_status")},{default:o(()=>[e(b,null,{default:o(()=>[e(ce,{modelValue:a(d).is_paid,"onUpdate:modelValue":n[4]||(n[4]=i=>a(d).is_paid=i)},{default:o(()=>[e(T,{value:"",textContent:c(t.$t("All"))},null,8,["textContent"]),e(T,{value:0,textContent:c(t.$t("Not_Paid"))},null,8,["textContent"]),e(T,{value:1,textContent:c(t.$t("Paid"))},null,8,["textContent"])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label"])]),l("div",_t,[e(q,{locale:a(O),modelValue:a(d).start_contract_date,"onUpdate:modelValue":n[5]||(n[5]=i=>a(d).start_contract_date=i),color:"green","trim-weeks":"",masks:E,"model-config":a(L)},{default:o(({inputValue:i,inputEvents:p})=>[e(h,{label:t.$t("From")},{default:o(()=>[e(b,{icon:"feather:calendar"},{default:o(()=>[e(C,G({value:i},J(p)),null,16,["value"])]),_:2},1024)]),_:2},1032,["label"])]),_:1},8,["locale","modelValue","model-config"])]),l("div",pt,[e(q,{locale:a(O),modelValue:a(d).end_contract_date,"onUpdate:modelValue":n[6]||(n[6]=i=>a(d).end_contract_date=i),color:"green","trim-weeks":"",masks:E,"model-config":a(L)},{default:o(({inputValue:i,inputEvents:p})=>[e(h,{label:t.$t("To")},{default:o(()=>[e(b,{icon:"feather:calendar"},{default:o(()=>[e(C,G({value:i},J(p)),null,16,["value"])]),_:2},1024)]),_:2},1032,["label"])]),_:1},8,["locale","modelValue","model-config"])])]),e(W,{"justify-content":"end","column-gap":"1rem"},{default:o(()=>[e(Q,null,{default:o(()=>[e(y,{type:"button",disabled:v.value,outlined:"",color:"warning",icon:"feather:x",onClick:re},{default:o(()=>[S(c(a(s)("Clear")),1)]),_:1},8,["disabled"])]),_:1}),e(Q,null,{default:o(()=>[e(y,{type:"submit",disabled:v.value,outlined:"",color:"success",icon:"feather:filter"},{default:o(()=>[S(c(a(s)("Filter")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})],40,it)]),_:1})],512),[[Ae,x.value]]),e(ge,{columns:a(ee),data:a(_).result,limit:a(_).pagination.per_page,total:a(_).pagination.total},{default:o(i=>[e(pe,{rounded:""},{"header-column":o(({column:p})=>[p.key==="orderNumber"?(r(),m("span",{key:0,class:"is-flex-grow-0",textContent:c("#")},null,8,ft)):u("",!0)]),body:o(()=>[a(_).result.length===0?(r(),m("div",gt,[e(ue,{title:t.$t("No_data"),subtitle:t.$t("There_is_no_data_that_match_your_query"),class:"my-6"},null,8,["title","subtitle"])])):u("",!0)]),"body-cell":o(({row:p,column:g,value:f,index:Vt})=>[g.key==="legal_entity"?(r(),m("span",vt,c(f.name),1)):u("",!0),g.key==="applications"?(r(),m("ul",yt,[(r(!0),m(Ue,null,xe(f,B=>(r(),m("li",null,c(B.uuid),1))),256))])):u("",!0),g.key==="payment_amount"?(r(),m("span",bt,c(Number(f).toLocaleString()),1)):u("",!0),g.key==="is_paid"?(r(),Y(me,{key:3,class:"is-size-6",color:f?"primary":"warning",rounded:"",label:f?t.$t("Paid"):t.$t("Not_Paid")},null,8,["color","label"])):u("",!0),g.key==="contract_date"&&f?(r(),m("span",ht,c(t.$h.formatDate(f,"DD.MM.YYYY")),1)):u("",!0),g.key==="verified_at"&&f?(r(),m("span",$t,c(t.$h.formatDate(f,"DD.MM.YYYY")),1)):u("",!0),g.key==="actions"?(r(),Y(_e,{key:6,onView:B=>oe(p.id),onRemove:B=>ne(p.id),"remove-btn":[1,2,7].includes(a(M))},null,8,["onView","onRemove","remove-btn"])):u("",!0)]),_:1}),a(_).result.length?(r(),Y(fe,{key:0,"current-page":a(A),"onUpdate:current-page":n[7]||(n[7]=p=>Be(A)?A.value=p:null),class:"mt-6","item-per-page":a(_).pagination.per_page,"total-items":a(_).pagination.total},null,8,["current-page","item-per-page","total-items"])):u("",!0)]),_:1},8,["columns","data","limit","total"]),e(ve,{modelValue:U.value,"onUpdate:modelValue":n[8]||(n[8]=i=>U.value=i),"item-id":k.value,"onUpdate:list":n[9]||(n[9]=()=>{w(),se(),H()}),onClose:H},null,8,["modelValue","item-id"]),e(ye,{onConfirmAction:le})])}}});export{Lt as default};

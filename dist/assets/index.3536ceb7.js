import{_ as K}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang.29e0a485.js";import{_ as Q}from"./VModal.vue_vue_type_style_index_0_lang.12005a08.js";import{z as T,N as E,A as V,r as F,D as X,B as Y,p as Z,o as $,f as I,w as s,j as l,q as t,E as a,t as y,v as D,m as O,a2 as ee,a0 as te,a1 as ae,P as U,O as ne,b as oe,e as se,bw as le,i as j,l as A,G as ie}from"./index.7451cb43.js";import{f as re,a as de,u as me,c as ue,b as ce,r as pe}from"./index.f4bc2c76.js";import{_ as _e,a as fe}from"./VFlexTable.vue_vue_type_style_index_0_lang.781deb8e.js";import{_ as ve}from"./VFlexPagination.56e63a91.js";import{_ as ge}from"./VDropdown.vue_vue_type_style_index_0_lang.687dcae3.js";import{_ as he}from"./VPlaceholderSection.vue_vue_type_style_index_0_lang.1e16cf16.js";import{_ as be}from"./VFlex.vue_vue_type_style_index_0_lang.8ae0fb36.js";import{u as $e}from"./viewWrapper.84d1ed6a.js";import{u as Ve}from"./index.dd0a2791.js";import"./VIcon.vue_vue_type_script_setup_true_lang.346ab3e2.js";const ye=["onSubmit"],we={class:"columns is-multiline"},Ce={class:"column is-12"},Ne={class:"help has-text-danger"},Se={class:"column is-12"},ke={class:"help has-text-danger"},ze=T({props:{modelValue:Boolean,departmentId:{type:Number,default:null}},emits:["update:modelValue","update:list"],setup(S,{emit:_}){const m=S,{t:u}=E(),h=V(u("Add")),c=V(!1),k=V([]),w=F({"name.uz":[],"name.en":[],"name.ru":[],stages:[]}),e=F({name:{uz:"",ru:"",en:""},stages:[]});X(()=>m.departmentId,async n=>{if(n){h.value=u("Edit");const o=await re(Number(m.departmentId));Object.assign(e,o),Object.assign(e.stages,o.stages.map(({id:v})=>v))}},{deep:!0,immediate:!0}),Y(async()=>{const n=await de();k.value=n});async function C(n){try{c.value=!0,m.departmentId?await me(m.departmentId,e):await ue(e),_("update:list"),b()}catch(o){Object.assign(w,o.response?.data?.errors)}finally{c.value=!1}}function b(){h.value=u("Add"),f(),M(),_("update:modelValue",!1)}function f(){Object.assign(e,{name:{uz:"",ru:"",en:""},stages:[]})}function M(){Object.assign(w,{"name.uz":[],"name.en":[],"name.ru":[],stages:[]})}return(n,o)=>{const v=ee,p=te,g=ae,r=Z("Multiselect"),i=U,N=Q;return $(),I(N,{open:S.modelValue,size:"large",actions:"right",title:h.value,onClose:o[4]||(o[4]=d=>b())},{content:s(()=>[l("form",{id:"department-form",class:"modal-form",onSubmit:D(C,["prevent"])},[l("div",we,[l("div",Ce,[t(g,{label:n.$t("Name_uz"),required:""},{default:s(()=>[t(p,null,{default:s(()=>[t(v,{name:"name_uz",placeholder:n.$t("Type_name_uz"),modelValue:a(e).name.uz,"onUpdate:modelValue":o[0]||(o[0]=d=>a(e).name.uz=d)},null,8,["placeholder","modelValue"]),l("p",Ne,y(a(w)["name.uz"][0]),1)]),_:1})]),_:1},8,["label"]),t(g,{label:n.$t("Name_ru")},{default:s(()=>[t(p,null,{default:s(()=>[t(v,{name:"name_ru",placeholder:n.$t("Type_name_ru"),modelValue:a(e).name.ru,"onUpdate:modelValue":o[1]||(o[1]=d=>a(e).name.ru=d)},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"]),t(g,{label:n.$t("Name_en")},{default:s(()=>[t(p,null,{default:s(()=>[t(v,{name:"name_en",placeholder:n.$t("Type_name_en"),modelValue:a(e).name.en,"onUpdate:modelValue":o[2]||(o[2]=d=>a(e).name.en=d)},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"])]),l("div",Se,[t(g,{label:n.$t("Stages"),required:""},{default:s(()=>[t(p,null,{default:s(()=>[t(r,{modelValue:a(e).stages,"onUpdate:modelValue":o[3]||(o[3]=d=>a(e).stages=d),searchable:!1,options:k.value,placeholder:n.$t("Select_stages"),valueProp:"id",label:"name",mode:"tags","close-on-select":!1},null,8,["modelValue","options","placeholder"]),l("p",ke,y(a(w).stages[0]),1)]),_:1})]),_:1},8,["label"])])])],40,ye)]),action:s(({close:d})=>[t(i,{loading:c.value,color:"primary",outlined:"",type:"submit",form:"department-form",disabled:c.value},{default:s(()=>[O(y(n.$t("Save")),1)]),_:1},8,["loading","disabled"])]),_:1},8,["open","title"])}}}),Be=["onClick"],Ie=l("div",{class:"icon"},[l("i",{class:"iconify","aria-hidden":"true","data-icon":"feather:edit"})],-1),De={class:"meta"},Me=l("hr",{class:"dropdown-divider"},null,-1),Ae=["onClick"],Fe=l("div",{class:"icon"},[l("i",{class:"iconify","aria-hidden":"true","data-icon":"feather:trash"})],-1),Te={class:"meta"},je=T({emits:["edit","remove"],setup(S,{emit:_}){return(m,u)=>{const h=ge;return $(),I(h,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:s(({close:c})=>[l("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:D(()=>{_("edit"),c()},["prevent"])},[Ie,l("div",De,[l("span",null,y(m.$t("Edit")),1)])],8,Be),Me,l("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:D(()=>{_("remove"),c()},["prevent"])},[Fe,l("div",Te,[l("span",null,y(m.$t("Remove")),1)])],8,Ae)]),_:1})}}}),Ee={class:"applicant-list-wrapper"},Oe={key:0,class:"flex-list-inner"},Ze=T({async setup(S){let _,m;const{t:u,locale:h}=E();ne({title:u("Departments")+" - Nefrit"});const c=oe(),k=Ve();$e().setPageTitle(u("Departments_List"));const e=F({pagination:{current_page:1,per_page:10,total:10},result:[]}),C=se({get:()=>e.pagination.current_page,set:async r=>{await p(r)}}),b=V(!1);V([]);const f=V(),M={orderNumber:{format:(r,i,N)=>`${N+1}`,cellClass:"is-flex-grow-0"},name:{label:u("Name")},actions:{label:u("Actions"),align:"center"}};[_,m]=le(()=>p()),await _,m();function n(r=void 0){b.value=!0,f.value=r}async function o(r){f.value=r,k.$patch({confirmModalState:!0})}async function v(){await pe(f.value),await p(),g()}async function p(r=1){const i=await ce(r);Object.assign(e,i)}function g(){c.success(u("Success"))}return(r,i)=>{const N=U,d=be,P=he,R=je,q=_e,L=ve,W=fe,x=ze,G=K;return $(),j("div",Ee,[t(d,{"justify-content":"end",class:"mb-4"},{default:s(()=>[t(N,{outlined:"",rounded:"",color:"info",icon:"feather:plus",onClick:i[0]||(i[0]=D(z=>n(),["prevent"]))},{default:s(()=>[O(y(r.$t("Add")),1)]),_:1})]),_:1}),t(W,{columns:a(M),data:a(e).result,limit:a(e).pagination.per_page,total:a(e).pagination.total},{default:s(z=>[t(q,{rounded:""},{body:s(()=>[a(e).result.length===0?($(),j("div",Oe,[t(P,{title:r.$t("No_data"),subtitle:r.$t("There_is_no_data_that_match_your_query"),class:"my-6"},null,8,["title","subtitle"])])):A("",!0)]),"body-cell":s(({row:B,column:H,value:Ue,index:Pe})=>[H.key==="actions"?($(),I(R,{key:0,onEdit:J=>n(B.id),onRemove:J=>o(B.id)},null,8,["onEdit","onRemove"])):A("",!0)]),_:1}),a(e).result.length?($(),I(L,{key:0,"current-page":a(C),"onUpdate:current-page":i[1]||(i[1]=B=>ie(C)?C.value=B:null),class:"mt-6","item-per-page":a(e).pagination.per_page,"total-items":a(e).pagination.total},null,8,["current-page","item-per-page","total-items"])):A("",!0)]),_:1},8,["columns","data","limit","total"]),t(x,{modelValue:b.value,"onUpdate:modelValue":i[2]||(i[2]=z=>b.value=z),"department-id":f.value,"onUpdate:list":i[3]||(i[3]=()=>{p(),g(),f.value=void 0}),onClose:i[4]||(i[4]=z=>f.value=void 0)},null,8,["modelValue","department-id"]),t(G,{onConfirmAction:v})])}}});export{Ze as default};

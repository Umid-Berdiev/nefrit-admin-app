import{_ as ee}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang.3597d534.js";import{_ as te}from"./VModal.vue_vue_type_style_index_0_lang.bc609875.js";import{af as ae,z as q,V as H,A as V,r as F,D as oe,p as G,o as m,f as E,w as l,j as n,q as t,i as y,E as o,t as f,l as w,x as ne,bm as le,v as N,m as Z,a1 as se,a2 as ie,a3 as re,P as J,Z as ue,$ as de,M as ce,bP as pe,b as _e,e as me,bu as fe,G as ve}from"./index.47e107ef.js";import{_ as ge}from"./VTabs.vue_vue_type_script_setup_true_lang.255ec5a6.js";import{_ as j}from"./VTextarea.8835ff3a.js";import{_ as he,a as be}from"./VFlexTable.vue_vue_type_style_index_0_lang.c051e93d.js";import{_ as ye}from"./VFlexPagination.65c84f8f.js";import{_ as $e}from"./VDropdown.vue_vue_type_style_index_0_lang.f613d0d7.js";import{_ as we}from"./VPlaceholderSection.vue_vue_type_style_index_0_lang.bf0704b9.js";import{_ as Ve}from"./VFlex.vue_vue_type_style_index_0_lang.99038368.js";import{u as ke}from"./viewWrapper.45a25a95.js";import{u as De}from"./index.731bd9c9.js";import"./VIcon.vue_vue_type_script_setup_true_lang.5076ccf0.js";const T=ae();async function Ce(i){try{const{data:a}=await T({url:`/api/admin/regulation?page=${i}`});return a.data}catch(a){throw a}}async function ze(i){try{const{data:a}=await T({url:`/api/admin/regulation/${i}`});return a.data}catch(a){throw a}}async function Ie(i){try{const{data:a}=await T({url:"/api/admin/regulation",method:"POST",data:i});return a.data}catch(a){throw a}}async function Te(i,a){try{const{data:d}=await T({url:`/api/admin/regulation/${i}`,method:"POST",data:a});return d.data}catch(d){throw d}}async function Me(i){try{const{data:a}=await T({url:`/api/admin/regulation/${i}`,method:"DELETE"});return a.data}catch(a){throw a}}const L=i=>(ue("data-v-028b2ab2"),i=i(),de(),i),Se=["onSubmit"],Fe={key:0,class:"columns is-multiline pt-5"},Ee={class:"column is-12"},Ne={class:"help has-text-danger"},Pe={key:1,class:"columns is-multiline pt-5"},Re={class:"column is-12"},Ye={key:2,class:"columns is-multiline pt-5"},xe={class:"column is-12"},Ae=L(()=>n("div",{class:"is-divider"},null,-1)),Be={class:"file has-name"},Ue={class:"file-label"},Oe={class:"file-cta"},je=L(()=>n("span",{class:"file-icon"},[n("i",{class:"fas fa-cloud-upload-alt"})],-1)),qe={class:"file-label"},Le={key:0,class:"file-name light-text"},We={class:"help has-text-danger"},He=L(()=>n("div",{class:"is-divider"},null,-1)),Ge={class:"help has-text-danger"},Ze=q({props:{modelValue:Boolean,regulationId:{type:Number,default:null}},emits:["update:modelValue","update:list"],setup(i,{emit:a}){const d=i,{t:c,locale:M}=H(),$=V(c("Add")),b=V(!1),k=V(),p=V(""),r=F({title:{uz:"",ru:"",en:""},date:new Date,file:""}),z=F({type:"string",mask:"YYYY-MM-DD"}),_=F({"title.uz":[],"title.en":[],"title.ru":[],date:[],file:[]});oe(()=>d.regulationId,async u=>{if(u){$.value=c("Edit");const e=await ze(Number(d.regulationId));Object.assign(r,e),p.value=e.file}},{deep:!0,immediate:!0});async function P(u){try{b.value=!0;const e=new FormData;e.append("date",r.date),e.append("file",k.value??""),e.append("title[uz]",r.title.uz),e.append("title[ru]",r.title.ru),e.append("title[en]",r.title.en),d.regulationId?await Te(d.regulationId,e):await Ie(e),a("update:list"),I()}catch(e){Object.assign(_,e.response?.data?.errors)}finally{b.value=!1}}function I(){$.value=c("Add"),R(),Y(),a("update:modelValue",!1)}function R(){Object.assign(r,{title:{uz:"",ru:"",en:""},date:new Date,file:""}),p.value="",k.value=void 0}function Y(){Object.assign(_,{"title.uz":[],"title.en":[],"title.ru":[],date:[],file:[]})}function D(u){_.file=[];const e=u.target;k.value=e.files?e.files[0]:void 0}return(u,e)=>{const s=se,v=ie,x=ge,A=re,B=G("VDatePicker"),U=J,O=te;return m(),E(O,{open:i.modelValue,size:"large",title:$.value,actions:"right",onClose:I},{content:l(()=>[n("form",{id:"role-form",class:"modal-form",onSubmit:N(P,["prevent"])},[t(x,{type:"boxed",selected:"uz",tabs:[{label:u.$t("Uzbek"),value:"uz"},{label:u.$t("Russian"),value:"ru"},{label:u.$t("English"),value:"en"}]},{tab:l(({activeValue:g})=>[g==="uz"?(m(),y("div",Fe,[n("div",Ee,[t(v,{label:u.$t("Title_uz"),required:""},{default:l(()=>[t(s,null,{default:l(()=>[t(j,{placeholder:o(c)("Type_title_uz"),modelValue:o(r).title.uz,"onUpdate:modelValue":e[0]||(e[0]=h=>o(r).title.uz=h),rows:3,onInput:e[1]||(e[1]=h=>o(_)["title.uz"]=[])},null,8,["placeholder","modelValue"]),n("p",Ne,f(o(_)["title.uz"][0]),1)]),_:1})]),_:1},8,["label"])])])):g==="ru"?(m(),y("div",Pe,[n("div",Re,[t(v,{label:u.$t("Title_ru")},{default:l(()=>[t(s,null,{default:l(()=>[t(j,{placeholder:o(c)("Type_title_ru"),modelValue:o(r).title.ru,"onUpdate:modelValue":e[2]||(e[2]=h=>o(r).title.ru=h),rows:3},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"])])])):g==="en"?(m(),y("div",Ye,[n("div",xe,[t(v,{label:u.$t("Title_en")},{default:l(()=>[t(s,null,{default:l(()=>[t(j,{placeholder:o(c)("Type_title_en"),modelValue:o(r).title.en,"onUpdate:modelValue":e[3]||(e[3]=h=>o(r).title.en=h),rows:3},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"])])])):w("",!0)]),_:1},8,["tabs"]),Ae,t(v,{grouped:""},{default:l(()=>[t(s,null,{default:l(()=>[n("div",Be,[n("label",Ue,[n("input",{class:"file-input",type:"file",name:"file",onChange:D},null,32),n("span",Oe,[je,n("span",qe,f(u.$t("Choose_a_file")),1)]),k.value||p.value?(m(),y("span",Le,f(k.value?.name??p.value),1)):w("",!0)])]),n("p",We,f(o(_).file[0]),1)]),_:1})]),_:1}),He,t(v,{grouped:""},{default:l(()=>[t(B,{modelValue:o(r).date,"onUpdate:modelValue":e[4]||(e[4]=g=>o(r).date=g),mode:"date","model-config":o(z),masks:{input:["DD.MM.YYYY"]}},{default:l(({inputValue:g,inputEvents:h})=>[t(v,{label:u.$t("Date")},{default:l(()=>[t(s,{icon:"feather:calendar"},{default:l(()=>[t(A,ne({value:g},le(h)),null,16,["value"]),n("p",Ge,f(o(_).date[0]),1)]),_:2},1024)]),_:2},1032,["label"])]),_:1},8,["modelValue","model-config","masks"])]),_:1})],40,Se)]),action:l(({close:g})=>[t(U,{loading:b.value,color:"primary",outlined:"",type:"submit",form:"role-form",disabled:b.value},{default:l(()=>[Z(f(u.$t("Save")),1)]),_:1},8,["loading","disabled"])]),_:1},8,["open","title"])}}});const Je=ce(Ze,[["__scopeId","data-v-028b2ab2"]]),Ke=["onClick"],Qe={class:"icon"},Xe={class:"meta"},et=n("hr",{class:"dropdown-divider"},null,-1),tt=["onClick"],at={class:"icon"},ot={class:"meta"},nt=q({emits:["edit","remove"],setup(i,{emit:a}){return(d,c)=>{const M=G("VueIconify"),$=$e;return m(),E($,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:l(({close:b})=>[n("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:N(()=>{a("edit"),b()},["prevent"])},[n("div",Qe,[t(M,{icon:"feather:edit-2"})]),n("div",Xe,[n("span",null,f(d.$t("Edit")),1)])],8,Ke),et,n("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:N(()=>{a("remove"),b()},["prevent"])},[n("div",at,[t(M,{icon:"feather:trash"})]),n("div",ot,[n("span",null,f(d.$t("Remove")),1)])],8,tt)]),_:1})}}}),lt={class:"faq-list-wrapper"},st=["textContent"],it={key:0,class:"flex-list-inner"},rt={key:0},Vt=q({async setup(i){let a,d;const{t:c,locale:M}=H();pe({title:c("Regulation")+" - Nefrit"});const $=_e(),b=De();ke().setPageTitle(c("Regulation_List"));const p=F({pagination:{current_page:1,per_page:10,total:10},result:[]}),r=me({get:()=>p.pagination.current_page,set:async e=>{await D(e)}}),z=V(!1),_=V(),P={orderNumber:{format:(e,s,v)=>`${v+1}`,cellClass:"is-flex-grow-0"},title:{label:c("Title")},date:{label:c("Date")},actions:{label:c("Actions"),align:"center"}};V(),[a,d]=fe(()=>D()),await a,d();function I(e=void 0){z.value=!0,_.value=e}async function R(e){_.value=e,b.$patch({confirmModalState:!0})}async function Y(){await Me(_.value),await D(),u()}async function D(e=1){const s=await Ce(e);Object.assign(p,s)}function u(){$.success(c("Success"))}return(e,s)=>{const v=J,x=Ve,A=we,B=nt,U=he,O=ye,g=be,h=Je,K=ee;return m(),y("div",lt,[t(x,{"justify-content":"end",class:"mb-4"},{default:l(()=>[t(v,{outlined:"",rounded:"",color:"info",icon:"feather:plus",onClick:s[0]||(s[0]=N(S=>I(),["prevent"]))},{default:l(()=>[Z(f(e.$t("Add")),1)]),_:1})]),_:1}),t(g,{columns:o(P),data:o(p).result,limit:o(p).pagination.per_page,total:o(p).pagination.total},{default:l(S=>[t(U,{rounded:""},{"header-column":l(({column:C})=>[C.key==="orderNumber"?(m(),y("span",{key:0,class:"is-flex-grow-0",textContent:f("#")},null,8,st)):w("",!0)]),body:l(()=>[o(p).result.length===0?(m(),y("div",it,[t(A,{title:e.$t("No_data"),subtitle:e.$t("There_is_no_data_that_match_your_query"),class:"my-6"},null,8,["title","subtitle"])])):w("",!0)]),"body-cell":l(({row:C,column:W,value:Q,index:ut})=>[W.key==="date"?(m(),y("span",rt,f(e.$h.formatDate(Q,"DD.MM.YYYY")),1)):w("",!0),W.key==="actions"?(m(),E(B,{key:1,onEdit:X=>I(C.id),onRemove:X=>R(C.id)},null,8,["onEdit","onRemove"])):w("",!0)]),_:1}),o(p).result.length?(m(),E(O,{key:0,"current-page":o(r),"onUpdate:current-page":s[1]||(s[1]=C=>ve(r)?r.value=C:null),class:"mt-6","item-per-page":o(p).pagination.per_page,"total-items":o(p).pagination.total},null,8,["current-page","item-per-page","total-items"])):w("",!0)]),_:1},8,["columns","data","limit","total"]),t(h,{modelValue:z.value,"onUpdate:modelValue":s[2]||(s[2]=S=>z.value=S),"regulation-id":_.value,"onUpdate:list":s[3]||(s[3]=()=>{D(),u(),_.value=void 0}),onClose:s[4]||(s[4]=S=>_.value=void 0)},null,8,["modelValue","regulation-id"]),t(K,{onConfirmAction:Y})])}}});export{Vt as default};

import{_ as oe}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang.3597d534.js";import{_ as ne}from"./VModal.vue_vue_type_style_index_0_lang.bc609875.js";import{z as M,V as q,A as k,r as D,D as se,o as v,f as E,w as n,j as o,q as t,i as N,E as e,t as g,l as j,v as C,m as W,a3 as ae,a1 as le,a2 as ie,P as Q,p as re,b as ue,Y as de,e as O,bP as ce,bu as me,G as pe}from"./index.47e107ef.js";import{_ as _e}from"./VTabs.vue_vue_type_script_setup_true_lang.255ec5a6.js";import{_ as fe}from"./VTextarea.8835ff3a.js";import{a as ve,u as he,c as be,s as ge,b as $e,r as ye,d as Ve}from"./index.9be0d9df.js";import{_ as we,a as ze}from"./VFlexTable.vue_vue_type_style_index_0_lang.c051e93d.js";import{_ as ke}from"./VFlexPagination.65c84f8f.js";import{_ as Ce}from"./VDropdown.vue_vue_type_style_index_0_lang.f613d0d7.js";import{_ as Ne}from"./VPlaceholderSection.vue_vue_type_style_index_0_lang.bf0704b9.js";import{_ as Ie}from"./VFlex.vue_vue_type_style_index_0_lang.99038368.js";import{u as Re}from"./viewWrapper.45a25a95.js";import{u as Se}from"./index.731bd9c9.js";import"./VIcon.vue_vue_type_script_setup_true_lang.5076ccf0.js";const Ae=["onSubmit"],je={key:0,class:"columns is-multiline pt-5"},Te={class:"column is-12"},Ue={class:"help has-text-danger"},Be={class:"help has-text-danger"},Oe={key:1,class:"columns is-multiline pt-5"},De={class:"column is-12"},Ee={key:2,class:"columns is-multiline pt-5"},Fe={class:"column is-12"},xe=M({props:{modelValue:Boolean,roleId:{type:Number,default:null}},emits:["update:modelValue","update:list"],setup(T,{emit:f}){const m=T,{t:p}=q(),h=k(p("Add")),c=k(!1),u=D({uz:"",ru:"",en:""}),_=D({uz:"",ru:"",en:""}),i=D({"name.uz":[],"name.en":[],"name.ru":[],"description.uz":[],"description.en":[],"description.ru":[]});se(()=>m.roleId,async r=>{if(r){h.value=p("Edit");const a=await ve(Number(m.roleId));Object.assign(u,a.name),Object.assign(_,a.description)}},{deep:!0,immediate:!0});async function I(r){try{c.value=!0,m.roleId?await he(m.roleId,{name:u,description:_}):await be({name:u,description:_}),f("update:list"),R()}catch(a){Object.assign(i,a.response?.data?.errors)}finally{c.value=!1}}function R(){h.value=p("Add"),$(),U(),f("update:modelValue",!1)}function $(){Object.assign(u,{uz:"",ru:"",en:""}),Object.assign(_,{uz:"",ru:"",en:""})}function U(){Object.assign(i,{"name.uz":[],"name.en":[],"name.ru":[],"description.uz":[],"description.en":[],"description.ru":[]})}return(r,a)=>{const B=ae,b=le,y=ie,S=fe,F=_e,A=Q,x=ne;return v(),E(x,{open:T.modelValue,size:"large",title:h.value,actions:"right",onClose:R},{content:n(()=>[o("form",{id:"role-form",class:"modal-form",onSubmit:C(I,["prevent"])},[t(F,{type:"boxed",selected:"uz",tabs:[{label:r.$t("Uzbek"),value:"uz"},{label:r.$t("Russian"),value:"ru"},{label:r.$t("English"),value:"en"}]},{tab:n(({activeValue:w})=>[w==="uz"?(v(),N("div",je,[o("div",Te,[t(y,{label:r.$t("Name_uz"),required:""},{default:n(()=>[t(b,null,{default:n(()=>[t(B,{name:"name_uz",type:"text",placeholder:e(p)("Type_name_uz"),modelValue:e(u).uz,"onUpdate:modelValue":a[0]||(a[0]=d=>e(u).uz=d)},null,8,["placeholder","modelValue"]),o("p",Ue,g(e(i)["name.uz"][0]),1)]),_:1})]),_:1},8,["label"]),t(y,{label:r.$t("Description_uz"),required:""},{default:n(()=>[t(b,null,{default:n(()=>[t(S,{name:"description_uz",placeholder:e(p)("Add_description_uz"),modelValue:e(_).uz,"onUpdate:modelValue":a[1]||(a[1]=d=>e(_).uz=d)},null,8,["placeholder","modelValue"]),o("p",Be,g(e(i)["description.uz"][0]),1)]),_:1})]),_:1},8,["label"])])])):w==="ru"?(v(),N("div",Oe,[o("div",De,[t(y,{label:r.$t("Name_ru")},{default:n(()=>[t(b,null,{default:n(()=>[t(B,{name:"name_ru",type:"text",placeholder:e(p)("Type_name_ru"),modelValue:e(u).ru,"onUpdate:modelValue":a[2]||(a[2]=d=>e(u).ru=d)},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"]),t(y,{label:r.$t("Description_ru")},{default:n(()=>[t(b,null,{default:n(()=>[t(S,{name:"description_ru",placeholder:e(p)("Add_description_ru"),modelValue:e(_).ru,"onUpdate:modelValue":a[3]||(a[3]=d=>e(_).ru=d)},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"])])])):w==="en"?(v(),N("div",Ee,[o("div",Fe,[t(y,{label:r.$t("Name_en")},{default:n(()=>[t(b,null,{default:n(()=>[t(B,{name:"name_en",type:"text",placeholder:e(p)("Type_name_en"),modelValue:e(u).en,"onUpdate:modelValue":a[4]||(a[4]=d=>e(u).en=d)},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"]),t(y,{label:r.$t("Description_en")},{default:n(()=>[t(b,null,{default:n(()=>[t(S,{name:"description_en",placeholder:e(p)("Add_description_en"),modelValue:e(_).en,"onUpdate:modelValue":a[5]||(a[5]=d=>e(_).en=d)},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"])])])):j("",!0)]),_:1},8,["tabs"])],40,Ae)]),action:n(({close:w})=>[t(A,{loading:c.value,color:"primary",outlined:"",type:"submit",form:"role-form",disabled:c.value},{default:n(()=>[W(g(r.$t("Save")),1)]),_:1},8,["loading","disabled"])]),_:1},8,["open","title"])}}}),Pe=["onClick"],Me=o("div",{class:"icon"},[o("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),Le={class:"meta"},qe=["onClick"],We={class:"icon"},Qe={class:"meta"},Ge=["onClick"],He={class:"icon"},Ye={class:"meta"},Je=o("hr",{class:"dropdown-divider"},null,-1),Ke=["onClick"],Xe={class:"icon"},Ze={class:"meta"},et=M({emits:["view","edit","remove","permissions"],setup(T,{emit:f}){return(m,p)=>{const h=re("VueIconify"),c=Ce;return v(),E(c,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:n(({close:u})=>[o("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:C(()=>{f("view"),u()},["prevent"])},[Me,o("div",Le,[o("span",null,g(m.$t("View")),1)])],8,Pe),o("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:C(()=>{f("edit"),u()},["prevent"])},[o("div",We,[t(h,{icon:"feather:edit-2"})]),o("div",Qe,[o("span",null,g(m.$t("Edit")),1)])],8,qe),o("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:C(()=>{f("permissions"),u()},["prevent"])},[o("div",He,[t(h,{icon:"feather:shield"})]),o("div",Ye,[o("span",null,g(m.$t("Role_permissions")),1)])],8,Ge),Je,o("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:C(()=>{f("remove"),u()},["prevent"])},[o("div",Xe,[t(h,{icon:"feather:trash"})]),o("div",Ze,[o("span",null,g(m.$t("Remove")),1)])],8,Ke)]),_:1})}}}),tt={class:"applicant-list-wrapper"},ot=["textContent"],nt={key:0,class:"flex-list-inner"},$t=M({async setup(T){let f,m;const p=ue(),h=de(),{t:c,locale:u}=q(),_=Se(),i=D({pagination:{current_page:1,per_page:10,total:10},result:[]}),I=k(!1),R=k([]);O(()=>i.result.length===R.value.length&&R.value.length!==0);const $=k();O({get(){return""},async set(s){await x(s)}});const U=k(""),r=O({get:()=>U.value,async set(s){U.value=s??"",await w(s)}}),a=O(()=>({orderNumber:{format:(s,l,P)=>`${P+1}`,cellClass:"is-flex-grow-0"},name:{label:c("Name"),searchable:!0},description:{label:c("Description")},actions:{label:c("Actions"),align:"center"}}));Re().setPageTitle(c("Roles_List")),ce({title:c("Roles")+" - Nefrit"}),[f,m]=me(()=>A()),await f,m();function b(s){I.value=!0,$.value=s}async function y(s){$.value=s,_.$patch({confirmModalState:!0})}function S(s){h.push(`/app/roles/${s}/permissions`)}async function F(){await ye($.value),await A(),d()}async function A(s=1){const l=await Ve(s);Object.assign(i,l)}async function x(s){const l=await ge(s);Object.assign(i,l)}async function w(s){const l=await $e(s);Object.assign(i,l)}function d(){p.success(c("Success"))}return(s,l)=>{const P=Q,G=Ie,H=Ne,Y=et,J=we,K=ke,X=ze,Z=xe,ee=oe;return v(),N("div",tt,[t(G,{"justify-content":"end",class:"mb-4"},{default:n(()=>[t(P,{outlined:"",rounded:"",color:"info",icon:"feather:plus",onClick:l[0]||(l[0]=C(z=>b(void 0),["prevent"]))},{default:n(()=>[W(g(s.$t("Add")),1)]),_:1})]),_:1}),t(X,{columns:e(a),data:e(i).result,limit:e(i).pagination.per_page,total:e(i).pagination.total,sort:e(r),"onUpdate:sort":l[2]||(l[2]=z=>pe(r)?r.value=z:null)},{default:n(z=>[t(J,{rounded:""},{"header-column":n(({column:V})=>[V.key==="orderNumber"?(v(),N("span",{key:0,class:"is-flex-grow-0",textContent:g("#")},null,8,ot)):j("",!0)]),body:n(()=>[e(i).result.length===0?(v(),N("div",nt,[t(H,{title:s.$t("No_matches"),subtitle:s.$t("There_is_no_data_that_match_your_query"),class:"my-6"},null,8,["title","subtitle"])])):j("",!0)]),"body-cell":n(({row:V,column:te,value:st,index:at})=>[te.key==="actions"?(v(),E(Y,{key:0,onEdit:L=>b(V.id),onRemove:L=>y(V.id),onPermissions:L=>S(V.id)},null,8,["onEdit","onRemove","onPermissions"])):j("",!0)]),_:1}),e(i).result.length?(v(),E(K,{key:0,"current-page":e(i).pagination.current_page,"onUpdate:current-page":l[1]||(l[1]=V=>e(i).pagination.current_page=V),class:"mt-6","item-per-page":e(i).pagination.per_page,"total-items":e(i).pagination.total},null,8,["current-page","item-per-page","total-items"])):j("",!0)]),_:1},8,["columns","data","limit","total","sort"]),t(Z,{modelValue:I.value,"onUpdate:modelValue":l[3]||(l[3]=z=>I.value=z),"role-id":$.value,"onUpdate:list":l[4]||(l[4]=()=>{A(),d(),$.value=void 0}),onClose:l[5]||(l[5]=z=>$.value=void 0)},null,8,["modelValue","role-id"]),t(ee,{onConfirmAction:F})])}}});export{$t as default};

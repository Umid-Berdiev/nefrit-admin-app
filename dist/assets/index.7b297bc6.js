import{_ as ne}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang.3390d561.js";import{_ as oe}from"./VModal.vue_vue_type_style_index_0_lang.61065232.js";import{z as P,N as q,A as k,r as x,D as se,o as v,f as D,w as o,j as n,q as t,i as N,E as e,t as b,l as j,v as C,m as W,a3 as ae,a1 as le,a2 as ie,P as Q,b as re,$ as ue,e as B,O as de,bx as ce,G as me}from"./index.54471211.js";import{_ as pe}from"./VTabs.vue_vue_type_script_setup_true_lang.95c44c77.js";import{_ as _e}from"./VTextarea.53745417.js";import{a as fe,u as ve,c as he,s as be,b as ge,r as $e,d as ye}from"./index.a041404a.js";import{_ as Ve,a as we}from"./VFlexTable.vue_vue_type_style_index_0_lang.cc32d678.js";import{_ as ze}from"./VFlexPagination.2909dff1.js";import{_ as ke}from"./VDropdown.vue_vue_type_style_index_0_lang.f096a086.js";import{_ as Ce}from"./VPlaceholderSection.vue_vue_type_style_index_0_lang.696c973e.js";import{_ as Ne}from"./VFlex.vue_vue_type_style_index_0_lang.96c8d1f7.js";import{u as Re}from"./viewWrapper.ff650e59.js";import{u as Se}from"./index.97d140ea.js";import"./VIcon.vue_vue_type_script_setup_true_lang.8ffe0265.js";const Ae=["onSubmit"],Ie={key:0,class:"columns is-multiline pt-5"},je={class:"column is-12"},Oe={class:"help has-text-danger"},Te={class:"help has-text-danger"},Ue={key:1,class:"columns is-multiline pt-5"},Be={class:"column is-12"},xe={key:2,class:"columns is-multiline pt-5"},De={class:"column is-12"},Ee=P({props:{modelValue:Boolean,roleId:{type:Number,default:null}},emits:["update:modelValue","update:list"],setup(O,{emit:f}){const c=O,{t:m}=q(),y=k(m("Add")),u=k(!1),_=x({uz:"",ru:"",en:""}),p=x({uz:"",ru:"",en:""}),i=x({"name.uz":[],"name.en":[],"name.ru":[],"description.uz":[],"description.en":[],"description.ru":[]});se(()=>c.roleId,async r=>{if(r){y.value=m("Edit");const a=await fe(Number(c.roleId));Object.assign(_,a.name),Object.assign(p,a.description)}},{deep:!0,immediate:!0});async function R(r){try{u.value=!0,c.roleId?await ve(c.roleId,{name:_,description:p}):await he({name:_,description:p}),f("update:list"),S()}catch(a){Object.assign(i,a.response?.data?.errors)}finally{u.value=!1}}function S(){y.value=m("Add"),g(),T(),f("update:modelValue",!1)}function g(){Object.assign(_,{uz:"",ru:"",en:""}),Object.assign(p,{uz:"",ru:"",en:""})}function T(){Object.assign(i,{"name.uz":[],"name.en":[],"name.ru":[],"description.uz":[],"description.en":[],"description.ru":[]})}return(r,a)=>{const U=ae,h=le,$=ie,A=_e,E=pe,I=Q,F=oe;return v(),D(F,{open:O.modelValue,size:"large",title:y.value,actions:"right",onClose:S},{content:o(()=>[n("form",{id:"role-form",class:"modal-form",onSubmit:C(R,["prevent"])},[t(E,{type:"boxed",selected:"uz",tabs:[{label:r.$t("Uzbek"),value:"uz"},{label:r.$t("Russian"),value:"ru"},{label:r.$t("English"),value:"en"}]},{tab:o(({activeValue:w})=>[w==="uz"?(v(),N("div",Ie,[n("div",je,[t($,{label:r.$t("Name_uz"),required:""},{default:o(()=>[t(h,null,{default:o(()=>[t(U,{name:"name_uz",type:"text",placeholder:e(m)("Type_name_uz"),modelValue:e(_).uz,"onUpdate:modelValue":a[0]||(a[0]=d=>e(_).uz=d)},null,8,["placeholder","modelValue"]),n("p",Oe,b(e(i)["name.uz"][0]),1)]),_:1})]),_:1},8,["label"]),t($,{label:r.$t("Description_uz"),required:""},{default:o(()=>[t(h,null,{default:o(()=>[t(A,{name:"description_uz",placeholder:e(m)("Add_description_uz"),modelValue:e(p).uz,"onUpdate:modelValue":a[1]||(a[1]=d=>e(p).uz=d)},null,8,["placeholder","modelValue"]),n("p",Te,b(e(i)["description.uz"][0]),1)]),_:1})]),_:1},8,["label"])])])):w==="ru"?(v(),N("div",Ue,[n("div",Be,[t($,{label:r.$t("Name_ru")},{default:o(()=>[t(h,null,{default:o(()=>[t(U,{name:"name_ru",type:"text",placeholder:e(m)("Type_name_ru"),modelValue:e(_).ru,"onUpdate:modelValue":a[2]||(a[2]=d=>e(_).ru=d)},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"]),t($,{label:r.$t("Description_ru")},{default:o(()=>[t(h,null,{default:o(()=>[t(A,{name:"description_ru",placeholder:e(m)("Add_description_ru"),modelValue:e(p).ru,"onUpdate:modelValue":a[3]||(a[3]=d=>e(p).ru=d)},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"])])])):w==="en"?(v(),N("div",xe,[n("div",De,[t($,{label:r.$t("Name_en")},{default:o(()=>[t(h,null,{default:o(()=>[t(U,{name:"name_en",type:"text",placeholder:e(m)("Type_name_en"),modelValue:e(_).en,"onUpdate:modelValue":a[4]||(a[4]=d=>e(_).en=d)},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"]),t($,{label:r.$t("Description_en")},{default:o(()=>[t(h,null,{default:o(()=>[t(A,{name:"description_en",placeholder:e(m)("Add_description_en"),modelValue:e(p).en,"onUpdate:modelValue":a[5]||(a[5]=d=>e(p).en=d)},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"])])])):j("",!0)]),_:1},8,["tabs"])],40,Ae)]),action:o(({close:w})=>[t(I,{loading:u.value,color:"primary",outlined:"",type:"submit",form:"role-form",disabled:u.value},{default:o(()=>[W(b(r.$t("Save")),1)]),_:1},8,["loading","disabled"])]),_:1},8,["open","title"])}}}),Fe=["onClick"],Me=n("div",{class:"icon"},[n("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),Pe={class:"meta"},Le=["onClick"],qe=n("div",{class:"icon"},[n("i",{"aria-hidden":"true",class:"lnil lnil-briefcase"})],-1),We={class:"meta"},Qe=["onClick"],Ge=n("div",{class:"icon"},[n("i",{"aria-hidden":"true",class:"lnil lnil-briefcase"})],-1),He={class:"meta"},Je=n("hr",{class:"dropdown-divider"},null,-1),Ke=["onClick"],Xe=n("div",{class:"icon"},[n("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),Ye={class:"meta"},Ze=P({emits:["view","edit","remove","permissions"],setup(O,{emit:f}){return(c,m)=>{const y=ke;return v(),D(y,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:o(({close:u})=>[n("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:C(()=>{f("view"),u()},["prevent"])},[Me,n("div",Pe,[n("span",null,b(c.$t("View")),1)])],8,Fe),n("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:C(()=>{f("edit"),u()},["prevent"])},[qe,n("div",We,[n("span",null,b(c.$t("Edit")),1)])],8,Le),n("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:C(()=>{f("permissions"),u()},["prevent"])},[Ge,n("div",He,[n("span",null,b(c.$t("Role_permissions")),1)])],8,Qe),Je,n("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:C(()=>{f("remove"),u()},["prevent"])},[Xe,n("div",Ye,[n("span",null,b(c.$t("Remove")),1)])],8,Ke)]),_:1})}}}),et={class:"applicant-list-wrapper"},tt=["textContent"],nt={key:0,class:"flex-list-inner"},gt=P({async setup(O){let f,c;const m=re(),y=ue(),{t:u,locale:_}=q(),p=Se(),i=x({pagination:{current_page:1,per_page:10,total:10},result:[]}),R=k(!1),S=k([]);B(()=>i.result.length===S.value.length&&S.value.length!==0);const g=k();B({get(){return""},async set(s){await F(s)}});const T=k(""),r=B({get:()=>T.value,async set(s){T.value=s??"",await w(s)}}),a=B(()=>({orderNumber:{format:(s,l,M)=>`${M+1}`,cellClass:"is-flex-grow-0"},name:{label:u("Name"),searchable:!0},description:{label:u("Description")},actions:{label:u("Actions"),align:"center"}}));Re().setPageTitle(u("Roles_List")),de({title:u("Roles")+" - Nefrit"}),[f,c]=ce(()=>I()),await f,c();function h(s){R.value=!0,g.value=s}async function $(s){g.value=s,p.$patch({confirmModalState:!0})}function A(s){y.push(`/app/roles/${s}/permissions`)}async function E(){await $e(g.value),await I(),d()}async function I(s=1){const l=await ye(s);Object.assign(i,l)}async function F(s){const l=await be(s);Object.assign(i,l)}async function w(s){const l=await ge(s);Object.assign(i,l)}function d(){m.success(u("Success"))}return(s,l)=>{const M=Q,G=Ne,H=Ce,J=Ze,K=Ve,X=ze,Y=we,Z=Ee,ee=ne;return v(),N("div",et,[t(G,{"justify-content":"end",class:"mb-4"},{default:o(()=>[t(M,{outlined:"",rounded:"",color:"info",icon:"feather:plus",onClick:l[0]||(l[0]=C(z=>h(void 0),["prevent"]))},{default:o(()=>[W(b(s.$t("Add")),1)]),_:1})]),_:1}),t(Y,{columns:e(a),data:e(i).result,limit:e(i).pagination.per_page,total:e(i).pagination.total,sort:e(r),"onUpdate:sort":l[2]||(l[2]=z=>me(r)?r.value=z:null)},{default:o(z=>[t(K,{rounded:""},{"header-column":o(({column:V})=>[V.key==="orderNumber"?(v(),N("span",{key:0,class:"is-flex-grow-0",textContent:b("#")},null,8,tt)):j("",!0)]),body:o(()=>[e(i).result.length===0?(v(),N("div",nt,[t(H,{title:s.$t("No_matches"),subtitle:s.$t("There_is_no_data_that_match_your_query"),class:"my-6"},null,8,["title","subtitle"])])):j("",!0)]),"body-cell":o(({row:V,column:te,value:ot,index:st})=>[te.key==="actions"?(v(),D(J,{key:0,onEdit:L=>h(V.id),onRemove:L=>$(V.id),onPermissions:L=>A(V.id)},null,8,["onEdit","onRemove","onPermissions"])):j("",!0)]),_:1}),e(i).result.length?(v(),D(X,{key:0,"current-page":e(i).pagination.current_page,"onUpdate:current-page":l[1]||(l[1]=V=>e(i).pagination.current_page=V),class:"mt-6","item-per-page":e(i).pagination.per_page,"total-items":e(i).pagination.total},null,8,["current-page","item-per-page","total-items"])):j("",!0)]),_:1},8,["columns","data","limit","total","sort"]),t(Z,{modelValue:R.value,"onUpdate:modelValue":l[3]||(l[3]=z=>R.value=z),"role-id":g.value,"onUpdate:list":l[4]||(l[4]=()=>{I(),d(),g.value=void 0}),onClose:l[5]||(l[5]=z=>g.value=void 0)},null,8,["modelValue","role-id"]),t(ee,{onConfirmAction:E})])}}});export{gt as default};

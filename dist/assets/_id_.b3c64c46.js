import{A as O,O as P,b as B,N as I,P as S,f as R,B as $,r as z,bv as L,q as W,o as f,j as h,k as o,s as l,w as s,G as t,t as d,m as H,y as K,bn as G,p as Q,x as J,a5 as X,a3 as Z,a4 as ee,Q as te}from"./index.bb4908f5.js";import{_ as le}from"./VFlex.vue_vue_type_style_index_0_lang.2810b5dd.js";import{_ as ae}from"./VFlexItem.vue_vue_type_style_index_0_lang.1fb4a212.js";import{_ as se}from"./VTabs.vue_vue_type_script_setup_true_lang.9d31ef9c.js";import{C as oe,a as C,e as U}from"./editor-data.4856b60b.js";import{u as ne}from"./viewWrapper.337e6d03.js";import{h as ie,i as ue}from"./index.38c9150c.js";import"./VIcon.vue_vue_type_script_setup_true_lang.654e5aba.js";import"./vue.runtime.esm-bundler.137ab17a.js";const de=["onSubmit"],re={class:"container is-fluid"},ce={class:"columns"},pe={class:"column is-8"},me={key:0,class:"columns is-multiline pt-5"},_e={class:"column is-12"},fe={class:"help has-text-danger"},he={class:"help has-text-danger"},ge={key:1,class:"columns is-multiline pt-5"},be={class:"column is-12"},Ve={class:"help has-text-danger"},ve={class:"help has-text-danger"},xe={key:2,class:"columns is-multiline pt-5"},ye={class:"column is-12"},$e={class:"help has-text-danger"},ze={class:"help has-text-danger"},Ce={class:"help has-text-danger"},Ue={class:"help has-text-danger"},ke={class:"column is-4"},we={class:"file"},De={class:"file-label"},Te={class:"file-cta"},qe=o("span",{class:"file-icon"},[o("i",{class:"fas fa-cloud-upload-alt"})],-1),Ye={class:"file-label"},Ae=["src"],We=O({async setup(Ee){let k,w;const{t:g}=P(),D=B(),T=I().params?.id??null;ne().setPageTitle(g("Articles")),S({title:R(()=>g("Articles"))});const b=oe.component,_=$(!1),a=z({author:"",date:"",image:"",text:{uz:"",ru:"",en:""},title:{uz:"",ru:"",en:""}}),u=z({author:[],date:[],image:[],["title.uz"]:[],["title.ru"]:[],["title.en"]:[],["text.uz"]:[],["text.ru"]:[],["text.en"]:[]}),V=$([]),v=$(""),q=z({type:"string",mask:"YYYY-MM-DD"});[k,w]=L(()=>A()),await k,w();function Y(){Object.assign(u,{author:[],date:[],image:[],["title.uz"]:[],["title.ru"]:[],["title.en"]:[],["text.uz"]:[],["text.ru"]:[],["text.en"]:[]})}async function A(){const e=await ue(T);await Object.assign(a,e),v.value=e.image}async function E(){try{_.value=!0,Y();const e=new FormData;e.append("author",a.author),e.append("date",a.date),e.append("image",V.value.length?V.value[0]:""),e.append("title[uz]",a.title.uz),e.append("title[ru]",a.title.ru),e.append("title[en]",a.title.en),e.append("text[uz]",a.text.uz),e.append("text[ru]",a.text.ru),e.append("text[en]",a.text.en);const n=await ie(T,e);Object.assign(a,n),D.success(`${g("Updated_successfully")}!`)}catch(e){Object.assign(u,e.response?.data?.errors),D.error(`Error while updating data: ${e.message}`)}finally{_.value=!1}}function j(e){const n=e.target;n.files?.length&&(v.value=URL.createObjectURL(n.files[0]),V.value=[n.files[0]])}return(e,n)=>{const m=X,p=Z,r=ee,F=se,x=ae,M=W("VDatePicker"),y=le,N=te;return f(),h("form",{id:"article-edit-form",class:"modal-form",onSubmit:J(E,["prevent"])},[o("div",re,[o("div",ce,[o("div",pe,[l(F,{type:"boxed",selected:"uz",tabs:[{label:e.$t("Uzbek"),value:"uz"},{label:e.$t("Russian"),value:"ru"},{label:e.$t("English"),value:"en"}]},{tab:s(({activeValue:c})=>[c==="uz"?(f(),h("div",me,[o("div",_e,[l(r,{class:"mb-5",label:e.$t("Title"),required:""},{default:s(()=>[l(p,null,{default:s(()=>[l(m,{type:"text",placeholder:e.$t("Type_title_uz"),modelValue:t(a).title.uz,"onUpdate:modelValue":n[0]||(n[0]=i=>t(a).title.uz=i)},null,8,["placeholder","modelValue"]),o("p",fe,d(t(u)["title.uz"][0]),1)]),_:1})]),_:1},8,["label"]),l(r,{class:"mb-5",label:e.$t("Text"),required:""},{default:s(()=>[l(t(b),{modelValue:t(a).text.uz,"onUpdate:modelValue":n[1]||(n[1]=i=>t(a).text.uz=i),editor:t(C),config:t(U)},null,8,["modelValue","editor","config"]),o("p",he,d(t(u)["text.uz"][0]),1)]),_:1},8,["label"])])])):c==="ru"?(f(),h("div",ge,[o("div",be,[l(r,{class:"mb-5",label:e.$t("Title"),required:""},{default:s(()=>[l(p,null,{default:s(()=>[l(m,{type:"text",placeholder:e.$t("Type_title_ru"),modelValue:t(a).title.ru,"onUpdate:modelValue":n[2]||(n[2]=i=>t(a).title.ru=i)},null,8,["placeholder","modelValue"]),o("p",Ve,d(t(u)["title.ru"][0]),1)]),_:1})]),_:1},8,["label"]),l(r,{class:"mb-5",label:e.$t("Text"),required:""},{default:s(()=>[l(t(b),{modelValue:t(a).text.ru,"onUpdate:modelValue":n[3]||(n[3]=i=>t(a).text.ru=i),editor:t(C),config:t(U)},null,8,["modelValue","editor","config"]),o("p",ve,d(t(u)["text.ru"][0]),1)]),_:1},8,["label"])])])):c==="en"?(f(),h("div",xe,[o("div",ye,[l(r,{class:"mb-5",label:e.$t("Title"),required:""},{default:s(()=>[l(p,null,{default:s(()=>[l(m,{type:"text",placeholder:e.$t("Type_title_en"),modelValue:t(a).title.en,"onUpdate:modelValue":n[4]||(n[4]=i=>t(a).title.en=i)},null,8,["placeholder","modelValue"]),o("p",$e,d(t(u)["title.en"][0]),1)]),_:1})]),_:1},8,["label"]),l(r,{class:"mb-5",label:e.$t("Text"),required:""},{default:s(()=>[l(t(b),{modelValue:t(a).text.en,"onUpdate:modelValue":n[5]||(n[5]=i=>t(a).text.en=i),editor:t(C),config:t(U)},null,8,["modelValue","editor","config"]),o("p",ze,d(t(u)["text.en"][0]),1)]),_:1},8,["label"])])])):H("",!0)]),_:1},8,["tabs"]),l(y,{"column-gap":"1rem"},{default:s(()=>[l(x,null,{default:s(()=>[l(r,{label:e.$t("Author"),required:""},{default:s(()=>[l(p,null,{default:s(()=>[l(m,{type:"text",placeholder:e.$t("Type_author"),modelValue:t(a).author,"onUpdate:modelValue":n[6]||(n[6]=c=>t(a).author=c)},null,8,["placeholder","modelValue"]),o("p",Ce,d(t(u).author[0]),1)]),_:1})]),_:1},8,["label"])]),_:1}),l(x,null,{default:s(()=>[l(M,{modelValue:t(a).date,"onUpdate:modelValue":n[7]||(n[7]=c=>t(a).date=c),mode:"date","model-config":t(q),masks:{input:["DD.MM.YYYY"]}},{default:s(({inputValue:c,inputEvents:i})=>[l(r,{label:e.$t("Date")},{default:s(()=>[l(p,{icon:"feather:calendar"},{default:s(()=>[l(m,K({value:c},G(i)),null,16,["value"]),o("p",Ue,d(t(u).date[0]),1)]),_:2},1024)]),_:2},1032,["label"])]),_:1},8,["modelValue","model-config","masks"])]),_:1})]),_:1})]),o("div",ke,[l(y,{"flex-direction":"column"},{default:s(()=>[l(x,{"align-self":"center"},{default:s(()=>[l(r,{grouped:""},{default:s(()=>[l(p,null,{default:s(()=>[o("div",we,[o("label",De,[o("input",{class:"file-input",type:"file",name:"image",onChange:j},null,32),o("span",Te,[qe,o("span",Ye,d(e.$t("Choose_an_image")),1)])])])]),_:1})]),_:1}),o("img",{src:v.value,alt:""},null,8,Ae)]),_:1})]),_:1})])]),l(y,null,{default:s(()=>[l(N,{type:"submit",class:"ml-auto",color:"primary",outlined:"",loading:_.value,disabled:_.value},{default:s(()=>[Q(d(e.$t("Save")),1)]),_:1},8,["loading","disabled"])]),_:1})])],40,de)}}});export{We as default};

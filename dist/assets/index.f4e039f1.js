import{a as Fe,_ as De}from"./ConclusionFormModal.vue_vue_type_script_setup_true_lang.aed7a329.js";import{_ as Me,a as xe}from"./VFlexTable.vue_vue_type_style_index_0_lang.693307de.js";import{_ as Ne}from"./VFlexPagination.a7000a1a.js";import{_ as Ue}from"./VDropdown.vue_vue_type_style_index_0_lang.b0678cf8.js";import{z as W,p as te,o as r,f as V,w as l,j as n,t as _,v as C,q as e,N as oe,A as b,e as ne,B as ae,m as B,E as o,i as Y,l as L,G as se,s as Pe,F as Te,bT as Le,a2 as le,a3 as ie,a as Be,O as Oe,b as Re,r as I,bP as T,Z as je,bv as Ee,X as Ae,bM as Ie,x as J,bn as K,a4 as We,P as qe}from"./index.7188baae.js";import{_ as He}from"./VTag.vue_vue_type_script_setup_true_lang.05f401b8.js";import{_ as ze}from"./StatusTag.vue_vue_type_script_setup_true_lang.5fd0b8a1.js";import{_ as Ge}from"./VPlaceholderSection.vue_vue_type_style_index_0_lang.034c427f.js";import{_ as Qe}from"./VCard.vue_vue_type_script_setup_true_lang.51676f24.js";import{_ as Xe}from"./VFlex.vue_vue_type_style_index_0_lang.da5ac0a5.js";import{_ as Ze}from"./VFlexItem.vue_vue_type_style_index_0_lang.f1da905e.js";import{_ as Je}from"./CountrySelect.vue_vue_type_style_index_0_lang.f7a7acd1.js";import{_ as Ke,a as et}from"./VOption.vue_vue_type_style_index_0_lang.32be4a5d.js";import{a as tt}from"./index.70b4727c.js";import{_ as ot}from"./StatusSelect.vue_vue_type_script_setup_true_lang.f0353805.js";import{_ as nt}from"./TableActionsBlock.vue_vue_type_style_index_0_lang.7f9adb37.js";import{u as at}from"./viewWrapper.4dd36d96.js";import{O as st,P as ee,Q as lt}from"./index.2062f2c3.js";import"./VModal.vue_vue_type_style_index_0_lang.d48b6f13.js";import"./VTextarea.4eb48972.js";import"./VFileInput.vue_vue_type_script_setup_true_lang.efda603d.js";import"./VIcon.vue_vue_type_script_setup_true_lang.1d813936.js";import"./lodash.526594df.js";import"./VButtons.vue_vue_type_script_setup_true_lang.bdc7c62b.js";const it=["onClick"],dt=n("div",{class:"icon"},[n("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),ct={class:"meta"},rt=["onClick"],ut={class:"icon"},mt={class:"meta"},_t=["onClick"],pt={class:"icon"},ft={class:"meta"},vt=["onClick"],gt={class:"icon"},bt={class:"meta"},Vt=["onClick"],$t={class:"icon"},yt={class:"meta"},ht=W({emits:["view","conclusion:add","conclusion:list","notice:add","notice:list"],setup(D,{emit:f}){return(v,d)=>{const g=te("VueIconify"),$=Ue;return r(),V($,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:l(({close:u})=>[n("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:C(()=>{f("view"),u()},["prevent"])},[dt,n("div",ct,[n("span",null,_(v.$t("View")),1)])],8,it),n("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:C(()=>{f("conclusion:add"),u()},["prevent"])},[n("div",ut,[e(g,{icon:"feather:edit-2"})]),n("div",mt,[n("span",null,_(v.$t("Leave_feedback")),1)])],8,rt),n("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:C(()=>{f("notice:add"),u()},["prevent"])},[n("div",pt,[e(g,{icon:"feather:edit-2"})]),n("div",ft,[n("span",null,_(v.$t("Make_notice")),1)])],8,_t),n("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:C(()=>{f("conclusion:list"),u()},["prevent"])},[n("div",gt,[e(g,{icon:"feather:arrow-right"})]),n("div",bt,[n("span",null,_(v.$t("Go_to_conclusions")),1)])],8,vt),n("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:C(()=>{f("notice:list"),u()},["prevent"])},[n("div",$t,[e(g,{icon:"feather:arrow-right"})]),n("div",yt,[n("span",null,_(v.$t("Go_to_notices_list")),1)])],8,Vt)]),_:1})}}}),kt={key:0,class:"has-text-danger"},wt=W({props:{modelValue:{default:""},isRequired:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(D,{emit:f}){const v=D,{t:d}=oe(),g=b([]),$=ne({get:()=>v.modelValue,set:async u=>{f("update:modelValue",u)}});return ae(async()=>{const u=await tt();g.value=u}),(u,O)=>{const m=Le,i=Ke,M=et,x=le,S=ie;return r(),V(S,null,{default:l(()=>[e(m,null,{default:l(()=>[B(_(o(d)("Stage"))+" ",1),D.isRequired?(r(),Y("span",kt,"*")):L("",!0)]),_:1}),e(x,null,{default:l(()=>[e(M,{modelValue:o($),"onUpdate:modelValue":O[0]||(O[0]=c=>se($)?$.value=c:null)},{default:l(()=>[e(i,{disabled:"",hidden:"",value:""},{default:l(()=>[B(_(o(d)("Select"))+" ...",1)]),_:1}),(r(!0),Y(Te,null,Pe(g.value,c=>(r(),V(i,{key:c.id,value:c.id,textContent:_(c.name)},null,8,["value","textContent"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),Ct={class:"applicant-list-wrapper"},Yt={class:"mb-5"},St={class:"title is-5 mb-2"},Ft=["onSubmit"],Dt={class:"columns is-desktop"},Mt={class:"column"},xt={class:"column"},Nt={class:"column"},Ut={class:"column"},Pt={class:"column"},Tt={class:"column"},Lt={class:"column"},Bt={key:0,class:"flex-list-inner"},Ot={key:0},Rt={key:1},mo=W({async setup(D){let f,v;const{t:d,locale:g}=oe(),{userRoleID:$}=Be();Oe({title:d("Statements")+" - Nefrit"});const u=Re();at().setPageTitle(d("Statements"));const m=I({pagination:{current_page:1,per_page:10,total:10},result:[]}),i=I({uuid:"",applicant:"",status_id:"",stage_id:"",country_id:"",drug_name:"",date_start:T().subtract(1,"month").format("YYYY-MM-DD"),date_end:T().format("YYYY-MM-DD")}),M=I({type:"string",mask:"YYYY-MM-DD"}),x={input:"DD.MM.YYYY"},S=je(),c=b(!1);b(!1);const R=b(!1),j=b(!1),E=b(!1),h=b(),A=ne({get:()=>m.pagination.current_page,set:async a=>{await F(a)}}),q=b([]),de={uuid:{label:d("statement_code")},drug:{label:d("drug_name")},status:{label:d("Status"),grow:!0},stage:{label:d("Stage"),grow:!0},is_paid:{label:d("Payment_status")},date:{label:d("applied_at")},actions:{label:d("Actions"),align:"center"}};[f,v]=Ee(()=>F()),await f,v(),ae(async()=>{const a=await st();q.value=a});function ce(a){const t=$==5?`/app/statements/${a}#docs`:`/app/statements/${a}`;S.push(t)}function re(a){S.push(`/app/statements/${a}#conclusions`)}function ue(a){S.push(`/app/statements/${a}#notices`)}async function F(a=1){const t=await ee({page:a,...i});Object.assign(m,t)}function H(){u.success(d("Success"))}async function me(){try{c.value=!0;const a=await ee({page:1,...i});Object.assign(m,a)}catch(a){u.error("Error while fetching filtered data: ",a.message)}finally{c.value=!1}}async function _e(){c.value=!0,Object.assign(i,{uuid:"",applicant:"",status_id:"",stage_id:"",country_id:"",drug_name:"",date_start:T().subtract(1,"month").format("YYYY-MM-DD"),date_end:T().format("YYYY-MM-DD")}),await F(),c.value=!1}async function pe(){try{c.value=!0;const a=await lt(i),t=URL.createObjectURL(new Blob([a],{type:"application/vnd.ms-excel"})),k=document.createElement("a");k.href=t,k.setAttribute("download",`Worksheet_${Date.now()}.xlsx`),document.body.appendChild(k),k.click()}catch(a){console.log({error:a})}finally{c.value=!1}}return(a,t)=>{const k=nt,N=We,U=le,P=ie,fe=ot,ve=wt,ge=Je,z=te("VDatePicker"),G=qe,Q=Ze,be=Xe,Ve=Qe,$e=Ge,ye=ze,X=He,he=ht,ke=Me,we=Ne,Ce=xe,Ye=Fe,Se=De;return r(),Y("div",Ct,[e(k,{center:"",title:"",onFilter:t[0]||(t[0]=s=>E.value=!E.value),"remove-disabled":"","add-disabled":"",onExport:pe,"export-disabled":!o(m).result.length},null,8,["export-disabled"]),Ae(n("div",Yt,[e(Ve,{radius:"small"},{default:l(()=>[n("h3",St,_(o(d)("Filter_form")),1),n("form",{onSubmit:C(me,["prevent"])},[n("div",Dt,[n("div",Mt,[e(P,{label:a.$t("statement_code")},{default:l(()=>[e(U,null,{default:l(()=>[e(N,{modelValue:o(i).uuid,"onUpdate:modelValue":t[1]||(t[1]=s=>o(i).uuid=s),type:"text"},null,8,["modelValue"])]),_:1})]),_:1},8,["label"])]),n("div",xt,[e(P,{label:a.$t("applied_legal_entity")},{default:l(()=>[e(U,null,{default:l(()=>[e(N,{modelValue:o(i).applicant,"onUpdate:modelValue":t[2]||(t[2]=s=>o(i).applicant=s),type:"text"},null,8,["modelValue"])]),_:1})]),_:1},8,["label"])]),n("div",Nt,[e(fe,{modelValue:o(i).status_id,"onUpdate:modelValue":t[3]||(t[3]=s=>o(i).status_id=s),list:q.value},null,8,["modelValue","list"])]),n("div",Ut,[e(ve,{modelValue:o(i).stage_id,"onUpdate:modelValue":t[4]||(t[4]=s=>o(i).stage_id=s)},null,8,["modelValue"])]),n("div",Pt,[e(ge,{modelValue:o(i).country_id,"onUpdate:modelValue":t[5]||(t[5]=s=>o(i).country_id=s)},null,8,["modelValue"])]),n("div",Tt,[e(z,{locale:o(g),modelValue:o(i).date_start,"onUpdate:modelValue":t[6]||(t[6]=s=>o(i).date_start=s),color:"green","trim-weeks":"",masks:x,"model-config":o(M)},{default:l(({inputValue:s,inputEvents:p})=>[e(P,{label:a.$t("From")},{default:l(()=>[e(U,{icon:"feather:calendar"},{default:l(()=>[e(N,J({value:s},K(p)),null,16,["value"])]),_:2},1024)]),_:2},1032,["label"])]),_:1},8,["locale","modelValue","model-config"])]),n("div",Lt,[e(z,{locale:o(g),modelValue:o(i).date_end,"onUpdate:modelValue":t[7]||(t[7]=s=>o(i).date_end=s),color:"green","trim-weeks":"",masks:x,"model-config":o(M)},{default:l(({inputValue:s,inputEvents:p})=>[e(P,{label:a.$t("To")},{default:l(()=>[e(U,{icon:"feather:calendar"},{default:l(()=>[e(N,J({value:s},K(p)),null,16,["value"])]),_:2},1024)]),_:2},1032,["label"])]),_:1},8,["locale","modelValue","model-config"])])]),e(be,{"justify-content":"end","column-gap":"1rem"},{default:l(()=>[e(Q,null,{default:l(()=>[e(G,{type:"button",disabled:c.value,outlined:"",color:"warning",icon:"feather:x",onClick:_e},{default:l(()=>[B(_(o(d)("Clear")),1)]),_:1},8,["disabled"])]),_:1}),e(Q,null,{default:l(()=>[e(G,{type:"submit",disabled:c.value,outlined:"",color:"success",icon:"feather:filter"},{default:l(()=>[B(_(o(d)("Filter")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})],40,Ft)]),_:1})],512),[[Ie,E.value]]),e(Ce,{columns:o(de),data:o(m).result,limit:o(m).pagination.per_page,total:o(m).pagination.total},{default:l(s=>[e(ke,{rounded:""},{body:l(()=>[o(m).result.length===0?(r(),Y("div",Bt,[e($e,{title:a.$t("No_data"),subtitle:a.$t("There_is_no_data_that_match_your_query"),class:"my-6"},null,8,["title","subtitle"])])):L("",!0)]),"body-cell":l(({row:p,column:w,value:y,index:jt})=>[w.key==="drug"?(r(),Y("span",Ot,_(y?.name),1)):w.key==="date"&&y?(r(),Y("span",Rt,_(a.$h.formatDate(y,"HH:mm DD.MM.YYYY")),1)):w.key==="status"?(r(),V(ye,{key:2,status:y},null,8,["status"])):w.key==="stage"?(r(),V(X,{key:3,class:"is-size-6 px-5",color:"info",rounded:"",label:y.name,style:{"white-space":"break-spaces",height:"fit-content"}},null,8,["label"])):w.key==="is_paid"?(r(),V(X,{key:4,class:"is-size-6",color:y?"primary":"warning",rounded:"",label:y?a.$t("Paid"):a.$t("Not_Paid")},null,8,["color","label"])):w.key==="actions"?(r(),V(he,{key:5,onView:Z=>ce(p.id),"onConclusion:add":()=>{R.value=!0,h.value=p.id},"onNotice:add":()=>{j.value=!0,h.value=p.id},"onConclusion:list":Z=>re(p.id),"onNotice:list":Z=>ue(p.id)},null,8,["onView","onConclusion:add","onNotice:add","onConclusion:list","onNotice:list"])):L("",!0)]),_:1}),o(m).result.length?(r(),V(we,{key:0,class:"mt-6","current-page":o(A),"onUpdate:current-page":t[8]||(t[8]=p=>se(A)?A.value=p:null),"item-per-page":o(m).pagination.per_page,"total-items":o(m).pagination.total},null,8,["current-page","item-per-page","total-items"])):L("",!0)]),_:1},8,["columns","data","limit","total"]),e(Ye,{modelValue:R.value,"onUpdate:modelValue":t[9]||(t[9]=s=>R.value=s),"item-id":void 0,"parent-id":Number(h.value),"onUpdate:list":t[10]||(t[10]=()=>{F(),H()}),onClose:t[11]||(t[11]=s=>h.value=void 0)},null,8,["modelValue","parent-id"]),e(Se,{modelValue:j.value,"onUpdate:modelValue":t[12]||(t[12]=s=>j.value=s),"item-id":void 0,"parent-id":Number(h.value),"onUpdate:list":t[13]||(t[13]=()=>{F(),H()}),onClose:t[14]||(t[14]=s=>h.value=void 0)},null,8,["modelValue","parent-id"])])}}});export{mo as default};

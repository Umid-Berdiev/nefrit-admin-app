import{_ as Z}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang.b3f31ee4.js";import{_ as ee}from"./ContractFormModal.vue_vue_type_script_setup_true_lang.b1ade9e7.js";import{_ as te,a as oe}from"./VFlexTable.vue_vue_type_style_index_0_lang.0f26989c.js";import{_ as ne}from"./VFlexPagination.7b4bd42d.js";import{_ as ae}from"./VDropdown.vue_vue_type_style_index_0_lang.ad213037.js";import{z as T,o,f as y,w as m,j as s,t as p,v as S,$ as se,N as re,b as ie,r as le,A,e as M,O as ce,bx as _e,i as l,q as i,E as n,G as me,l as c,F as pe,s as ue,a3 as de,a1 as fe,a2 as ge}from"./index.0f3537e1.js";import{_ as he}from"./VTag.vue_vue_type_style_index_0_lang.b86a845b.js";import{_ as ye}from"./VPlaceholderSection.vue_vue_type_style_index_0_lang.577ee70b.js";import{_ as ve}from"./VFlexTableToolbar.e5ad8643.js";import{_ as be}from"./TableActionsBlock.vue_vue_type_style_index_0_lang.e28c2709.js";import{u as $e}from"./viewWrapper.5fb3218a.js";import{u as we}from"./VModal.vue_vue_type_style_index_0_lang.17605a18.js";import{r as ke,n as Ce}from"./index.1d906979.js";import"./VFileInput.vue_vue_type_script_setup_true_lang.d1666f63.js";import"./index.181d7264.js";import"./VFlex.vue_vue_type_style_index_0_lang.6878b7e1.js";import"./VIcon.vue_vue_type_script_setup_true_lang.96db9b4f.js";import"./VButtons.vue_vue_type_script_setup_true_lang.737a1e1b.js";const Ve=["onClick"],Ne=s("div",{class:"icon"},[s("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),xe={class:"meta"},Fe=s("hr",{class:"dropdown-divider"},null,-1),Se=["onClick"],Ae=s("div",{class:"icon"},[s("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),Me={class:"meta"},Te=T({emits:["view","remove"],setup(D,{emit:f}){return(g,N)=>{const t=ae;return o(),y(t,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:m(({close:v})=>[s("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:S(()=>{f("view"),v()},["prevent"])},[Ne,s("div",xe,[s("span",null,p(g.$t("View")),1)])],8,Ve),Fe,s("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:S(()=>{f("remove"),v()},["prevent"])},[Ae,s("div",Me,[s("span",null,p(g.$t("Remove")),1)])],8,Se)]),_:1})}}}),De={class:"applicant-list-wrapper"},Re=["textContent"],Be={key:0,class:"flex-list-inner"},Pe={key:0},Ue={key:1},Ie={key:2},We={key:4},rt=T({async setup(D){let f,g;const N=se(),{t,locale:v}=re(),R=we(),b=ie(),r=le({pagination:{current_page:1,per_page:10,total:10},result:[]}),$=A(!1),h=A(),w=M({get(){return""},async set(e){}}),B=M(()=>({orderNumber:{format:(e,a,C)=>`${C+1}`,cellClass:"is-flex-grow-0"},name:{label:t("Name"),searchable:!0,grow:!0},legal_entity:{label:t("Applicant"),grow:!0},applications:{label:t("Statements")},payment_amount:{label:t("Contract_amount")},verified_at:{label:t("Payment_status"),grow:!0},created_at:{label:t("Date")},actions:{label:t("Actions"),align:"center"}}));$e().setPageTitle(t("Contracts_List")),ce({title:t("Contracts")+" - Nefrit"}),[f,g]=_e(()=>k()),await f,g();function P(){$.value=!0}function U(e){h.value=e,N.push(`/app/contracts/${e}`)}async function I(e){h.value=e,R.$patch({confirmModalState:!0})}async function W(){try{await ke(Number(h.value)),k(),b.success(t("Removed_successfully"))}catch(e){b.error(t(e.response?.data.error.message))}}async function k(e=1){const a=await Ce(e);Object.assign(r,a)}function x(){h.value=void 0}function Y(){b.success(t("Updated_successfully"))}return(e,a)=>{const C=be,E=de,L=fe,O=ge,j=ve,q=ye,z=he,G=Te,H=te,J=ne,K=oe,Q=ee,X=Z;return o(),l("div",De,[i(C,{center:"",title:"",onAdd:P,"filter-disabled":!0,"print-disabled":!0,"remove-disabled":!0}),i(K,{columns:n(B),data:n(r).result,limit:n(r).pagination.per_page,total:n(r).pagination.total},{default:m(F=>[i(j,null,{left:m(()=>[i(O,null,{default:m(()=>[i(L,{icon:"feather:search"},{default:m(()=>[i(E,{modelValue:n(w),"onUpdate:modelValue":a[0]||(a[0]=_=>me(w)?w.value=_:null),class:"is-rounded",placeholder:n(t)("Search")+"..."},null,8,["modelValue","placeholder"])]),_:1})]),_:1})]),_:1}),i(H,{rounded:""},{"header-column":m(({column:_})=>[_.key==="orderNumber"?(o(),l("span",{key:0,class:"is-flex-grow-0",textContent:p("#")},null,8,Re)):c("",!0)]),body:m(()=>[n(r).result.length===0?(o(),l("div",Be,[i(q,{title:e.$t("No_data"),subtitle:e.$t("There_is_no_data_that_match_your_query"),class:"my-6"},null,8,["title","subtitle"])])):c("",!0)]),"body-cell":m(({row:_,column:u,value:d,index:Ee})=>[u.key==="legal_entity"?(o(),l("span",Pe,p(d.name),1)):c("",!0),u.key==="applications"?(o(),l("ul",Ue,[(o(!0),l(pe,null,ue(d,V=>(o(),l("li",null,p(V.code),1))),256))])):c("",!0),u.key==="payment_amount"?(o(),l("span",Ie,p(Number(d).toLocaleString()),1)):c("",!0),u.key==="verified_at"?(o(),y(z,{key:3,class:"is-size-6",color:d?"primary":"warning",rounded:"",label:d?e.$t("Paid"):e.$t("Not_Paid")},null,8,["color","label"])):c("",!0),u.key==="created_at"?(o(),l("span",We,p(e.$h.formatDate(d,"DD.MM.YYYY")),1)):c("",!0),u.key==="actions"?(o(),y(G,{key:5,onView:V=>U(_.id),onRemove:V=>I(_.id)},null,8,["onView","onRemove"])):c("",!0)]),_:1}),n(r).result.length?(o(),y(J,{key:0,"current-page":n(r).pagination.current_page,"onUpdate:current-page":a[1]||(a[1]=_=>n(r).pagination.current_page=_),class:"mt-6","item-per-page":n(r).pagination.per_page,"total-items":n(r).pagination.total},null,8,["current-page","item-per-page","total-items"])):c("",!0)]),_:1},8,["columns","data","limit","total"]),i(Q,{modelValue:$.value,"onUpdate:modelValue":a[2]||(a[2]=F=>$.value=F),"item-id":h.value,"onUpdate:list":a[3]||(a[3]=()=>{k(),Y(),x()}),onClose:x},null,8,["modelValue","item-id"]),i(X,{onConfirmAction:W})])}}});export{rt as default};

import{d as o,a as u,b as n,S as c}from"./index.765c1121.js";const h=o(({router:a,api:f,pinia:i})=>{a.beforeEach(async(e,t)=>{const r=u(i),s=n();if(t===c&&r.isLoggedIn)try{r.fetchProfile()}catch{if(r.logoutUser(),s.error("Your session is invalid"),e.meta.requiresAuth)return{name:"auth",query:{redirect:e.fullPath}}}else if(e.meta.requiresAuth&&!r.isLoggedIn)return s.error({message:"Sorry, you should loggin to access this section",duration:5e3}),{name:"auth",query:{redirect:e.fullPath}}})});export{h as default};

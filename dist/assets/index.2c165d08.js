import{_ as ce}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang.b3f31ee4.js";import{_ as de,u as me}from"./VModal.vue_vue_type_style_index_0_lang.17605a18.js";import{z as E,N as G,A as S,r as j,D as pe,B as _e,p as fe,o as f,f as N,w as o,j as r,q as a,E as l,t as b,v as D,m as H,a3 as J,a1 as K,a2 as Q,P as X,O as ve,b as ge,e as W,bx as he,i as O,l as k,G as be,bT as Ve}from"./index.0f3537e1.js";import{f as ye,a as $e,u as Ce,c as we,b as ke,r as Ne}from"./index.80de3bbe.js";import{_ as Se,a as Ie}from"./VFlexTable.vue_vue_type_style_index_0_lang.0f26989c.js";import{_ as ze}from"./VFlexPagination.7b4bd42d.js";import{_ as Fe}from"./VDropdown.vue_vue_type_style_index_0_lang.ad213037.js";import{_ as Le}from"./VPlaceholderSection.vue_vue_type_style_index_0_lang.577ee70b.js";import{_ as Be}from"./VFlexTableToolbar.e5ad8643.js";import{_ as xe}from"./VFlex.vue_vue_type_style_index_0_lang.6878b7e1.js";import{u as Ae}from"./viewWrapper.5fb3218a.js";import"./VIcon.vue_vue_type_script_setup_true_lang.96db9b4f.js";const De=["onSubmit"],Me={class:"columns is-multiline"},Te={class:"column is-12"},Ue={class:"help has-text-danger"},Oe={class:"column is-12"},je={class:"help has-text-danger"},Ee=E({props:{modelValue:Boolean,departmentId:{type:Number,default:null}},emits:["update:modelValue","update:list"],setup(F,{emit:v}){const m=F,{t:c}=G(),V=S(c("Add")),_=S(!1),L=S([]),I=j({"name.uz":[],"name.en":[],"name.ru":[],stages:[]}),e=j({name:{uz:"",ru:"",en:""},stages:[]});pe(()=>m.departmentId,async s=>{if(s){V.value=c("Edit");const i=await ye(Number(m.departmentId));Object.assign(e,i),Object.assign(e.stages,i.stages.map(({id:h})=>h))}},{deep:!0,immediate:!0}),_e(async()=>{const s=await $e();L.value=s});async function z(s){try{_.value=!0,m.departmentId?await Ce(m.departmentId,e):await we(e),v("update:list"),u()}catch(i){Object.assign(I,i.response?.data?.errors)}finally{_.value=!1}}function u(){V.value=c("Add"),B(),g(),v("update:modelValue",!1)}function B(){Object.assign(e,{name:{uz:"",ru:"",en:""},stages:[]})}function g(){Object.assign(I,{"name.uz":[],"name.en":[],"name.ru":[],stages:[]})}return(s,i)=>{const h=J,y=K,$=Q,M=fe("Multiselect"),x=X,T=de;return f(),N(T,{open:F.modelValue,size:"large",actions:"right",title:V.value,onClose:i[4]||(i[4]=d=>u())},{content:o(()=>[r("form",{id:"department-form",class:"modal-form",onSubmit:D(z,["prevent"])},[r("div",Me,[r("div",Te,[a($,{label:s.$t("Name_uz"),required:""},{default:o(()=>[a(y,null,{default:o(()=>[a(h,{name:"name_uz",placeholder:s.$t("Type_name_uz"),modelValue:l(e).name.uz,"onUpdate:modelValue":i[0]||(i[0]=d=>l(e).name.uz=d)},null,8,["placeholder","modelValue"]),r("p",Ue,b(l(I)["name.uz"][0]),1)]),_:1})]),_:1},8,["label"]),a($,{label:s.$t("Name_ru")},{default:o(()=>[a(y,null,{default:o(()=>[a(h,{name:"name_ru",placeholder:s.$t("Type_name_ru"),modelValue:l(e).name.ru,"onUpdate:modelValue":i[1]||(i[1]=d=>l(e).name.ru=d)},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"]),a($,{label:s.$t("Name_en")},{default:o(()=>[a(y,null,{default:o(()=>[a(h,{name:"name_en",placeholder:s.$t("Type_name_en"),modelValue:l(e).name.en,"onUpdate:modelValue":i[2]||(i[2]=d=>l(e).name.en=d)},null,8,["placeholder","modelValue"])]),_:1})]),_:1},8,["label"])]),r("div",Oe,[a($,{label:s.$t("Stages"),required:""},{default:o(()=>[a(y,null,{default:o(()=>[a(M,{modelValue:l(e).stages,"onUpdate:modelValue":i[3]||(i[3]=d=>l(e).stages=d),searchable:!1,options:L.value,placeholder:s.$t("Select_stages"),valueProp:"id",label:"name",mode:"tags","close-on-select":!1},null,8,["modelValue","options","placeholder"]),r("p",je,b(l(I).stages[0]),1)]),_:1})]),_:1},8,["label"])])])],40,De)]),action:o(({close:d})=>[a(x,{loading:_.value,color:"primary",outlined:"",type:"submit",form:"department-form",disabled:_.value},{default:o(()=>[H(b(s.$t("Save")),1)]),_:1},8,["loading","disabled"])]),_:1},8,["open","title"])}}}),Re=["onClick"],Pe=r("div",{class:"icon"},[r("i",{class:"iconify","aria-hidden":"true","data-icon":"feather:edit"})],-1),qe={class:"meta"},We=r("hr",{class:"dropdown-divider"},null,-1),Ge=["onClick"],He=r("div",{class:"icon"},[r("i",{class:"iconify","aria-hidden":"true","data-icon":"feather:trash"})],-1),Je={class:"meta"},Ke=E({emits:["edit","remove"],setup(F,{emit:v}){return(m,c)=>{const V=Fe;return f(),N(V,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:o(({close:_})=>[r("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:D(()=>{v("edit"),_()},["prevent"])},[Pe,r("div",qe,[r("span",null,b(m.$t("Edit")),1)])],8,Re),We,r("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:D(()=>{v("remove"),_()},["prevent"])},[He,r("div",Je,[r("span",null,b(m.$t("Remove")),1)])],8,Ge)]),_:1})}}}),Qe={class:"applicant-list-wrapper"},Xe=["textContent"],Ye={key:0,class:"flex-list-inner"},pt=E({async setup(F){let v,m;const{t:c,locale:V}=G();ve({title:c("Departments")+" - Nefrit"});const _=ge(),L=me();Ae().setPageTitle(c("Departments_List"));const e=j({pagination:{current_page:1,per_page:10,total:10},result:[]}),z=S(!1),u=S([]),B=W(()=>e.result.length===u.value.length),g=S(),s=W({get:()=>e.pagination.current_page,set:async t=>{await A(t)}}),i=({order:t,a:n,b:C})=>t==="asc"?n.location.localeCompare(C.location):t==="desc"?C.location.localeCompare(n.location):0,h=({searchTerm:t,row:n})=>t?n.name.toLocaleLowerCase().includes(t.toLocaleLowerCase())||n.bio.toLocaleLowerCase().includes(t.toLocaleLowerCase()):!0,y={select:{label:"",cellClass:"is-flex-grow-0"},orderNumber:{format:(t,n,C)=>`${C+1}`,cellClass:"is-flex-grow-0"},name:{label:c("Name"),searchable:!0,sortable:!0,sort:i,filter:h},actions:{label:c("Actions"),align:"center"}};[v,m]=he(()=>A()),await v,m();function $(){B.value?u.value=[]:u.value=e.map(t=>t.id)}function M(t){u.value.includes(t.id)?u.value=u.value.filter(n=>n!==t.id):u.value=[...u.value,t.id]}function x(t){z.value=!0,g.value=t}async function T(t){g.value=t,L.$patch({confirmModalState:!0})}async function d(){await Ne(g.value),await A(),R()}async function A(t=1){const n=await ke(t);Object.assign(e,n)}function R(){_.success(c("Success"))}return(t,n)=>{const C=X,Y=xe,Z=J,ee=K,te=Q,ae=Be,P=Ve,ne=Le,oe=Ke,le=Se,se=ze,ie=Ie,re=Ee,ue=ce;return f(),O("div",Qe,[a(Y,{"justify-content":"end",class:"mb-4"},{default:o(()=>[a(C,{outlined:"",rounded:"",color:"info",icon:"feather:plus",onClick:n[0]||(n[0]=D(w=>x(void 0),["prevent"]))},{default:o(()=>[H(b(t.$t("Add")),1)]),_:1})]),_:1}),a(ie,{columns:l(y),data:l(e).result,limit:l(e).pagination.per_page,total:l(e).pagination.total},{default:o(w=>[a(ae,null,{left:o(()=>[a(te,null,{default:o(()=>[a(ee,{icon:"feather:search"},{default:o(()=>[a(Z,{modelValue:w.searchInput,"onUpdate:modelValue":p=>w.searchInput=p,class:"is-rounded",placeholder:l(c)("Search")+"..."},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024)]),_:2},1024)]),_:2},1024),a(le,{rounded:""},{"header-column":o(({column:p})=>[p.key==="select"?(f(),N(P,{key:0,class:"ml-2 mr-3",checked:l(B),name:"all_selected",color:"primary",onClick:$},null,8,["checked"])):k("",!0),p.key==="orderNumber"?(f(),O("span",{key:1,class:"is-flex-grow-0",textContent:b("#")},null,8,Xe)):k("",!0)]),body:o(()=>[l(e).result.length===0?(f(),O("div",Ye,[a(ne,{title:t.$t("No_data"),subtitle:t.$t("There_is_no_data_that_match_your_query"),class:"my-6"},null,8,["title","subtitle"])])):k("",!0)]),"body-cell":o(({row:p,column:q,value:Ze,index:et})=>[q.key==="select"?(f(),N(P,{key:0,modelValue:u.value,"onUpdate:modelValue":n[1]||(n[1]=U=>u.value=U),value:p.id,name:"selection",onChange:M},null,8,["modelValue","value"])):k("",!0),q.key==="actions"?(f(),N(oe,{key:1,onEdit:U=>x(p.id),onRemove:U=>T(p.id)},null,8,["onEdit","onRemove"])):k("",!0)]),_:1}),l(e).result.length?(f(),N(se,{key:0,"current-page":l(s),"onUpdate:current-page":n[2]||(n[2]=p=>be(s)?s.value=p:null),class:"mt-6","item-per-page":l(e).pagination.per_page,"total-items":l(e).pagination.total},null,8,["current-page","item-per-page","total-items"])):k("",!0)]),_:1},8,["columns","data","limit","total"]),a(re,{modelValue:z.value,"onUpdate:modelValue":n[3]||(n[3]=w=>z.value=w),"department-id":g.value,"onUpdate:list":n[4]||(n[4]=()=>{A(),R(),g.value=void 0}),onClose:n[5]||(n[5]=w=>g.value=void 0)},null,8,["modelValue","department-id"]),a(ue,{onConfirmAction:d})])}}});export{pt as default};

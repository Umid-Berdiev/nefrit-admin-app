import{a as De,_ as Me}from"./ConclusionFormModal.vue_vue_type_script_setup_true_lang.5adbff37.js";import{_ as Ne,a as xe}from"./VFlexTable.vue_vue_type_style_index_0_lang.e91991ed.js";import{_ as Ue}from"./VFlexPagination.6f519b0d.js";import{_ as Pe}from"./VDropdown.vue_vue_type_style_index_0_lang.c6874a9c.js";import{A as W,q as ne,o as c,g as V,w as l,k as n,t as u,x as Y,s as e,O as ae,B as y,f as H,C as se,p as B,G as o,j as k,m as D,H as le,v as Te,F as Le,bT as Be,a3 as ie,a4 as de,a as Oe,P as Re,b as je,r as E,bQ as L,$ as Ie,bv as Ae,Y as Ee,bM as He,y as ee,bn as te,bP as We,a5 as qe,Q as Ge}from"./index.bb4908f5.js";import{_ as ze}from"./VTag.vue_vue_type_script_setup_true_lang.eb71c5fe.js";import{_ as Qe}from"./StatusTag.vue_vue_type_script_setup_true_lang.412edb66.js";import{_ as Je}from"./VPlaceholderSection.vue_vue_type_style_index_0_lang.fc527a37.js";import{_ as Ke}from"./VCard.vue_vue_type_script_setup_true_lang.c77be0ea.js";import{_ as Xe}from"./VFlex.vue_vue_type_style_index_0_lang.2810b5dd.js";import{_ as Ze}from"./VFlexItem.vue_vue_type_style_index_0_lang.1fb4a212.js";import{_ as et}from"./CountrySelect.vue_vue_type_style_index_0_lang.40d94ebb.js";import{_ as tt,a as ot}from"./VOption.vue_vue_type_style_index_0_lang.98659e9a.js";import{a as nt}from"./index.51d39f00.js";import{_ as at}from"./StatusSelect.vue_vue_type_script_setup_true_lang.4441b2a0.js";import{_ as st}from"./TableActionsBlock.vue_vue_type_style_index_0_lang.7b0bb852.js";import{u as lt}from"./viewWrapper.337e6d03.js";import{N as it,O as oe,P as dt}from"./index.1a4077bb.js";import"./VModal.vue_vue_type_style_index_0_lang.61b38c15.js";import"./VTextarea.a25adf21.js";import"./VFileInput.vue_vue_type_script_setup_true_lang.c63c47c0.js";import"./VIcon.vue_vue_type_script_setup_true_lang.654e5aba.js";import"./lodash.e3ec61d9.js";import"./VButtons.vue_vue_type_script_setup_true_lang.e577f000.js";const ct=["onClick"],rt=n("div",{class:"icon"},[n("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),ut={class:"meta"},mt=["onClick"],_t={class:"icon"},pt={class:"meta"},ft=["onClick"],gt={class:"icon"},vt={class:"meta"},bt=["onClick"],yt={class:"icon"},Vt={class:"meta"},ht=["onClick"],$t={class:"icon"},kt={class:"meta"},wt=W({emits:["view","conclusion:add","conclusion:list","notice:add","notice:list"],setup(M,{emit:f}){return(g,d)=>{const v=ne("VueIconify"),b=Pe;return c(),V(b,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:l(({close:m})=>[n("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:Y(()=>{f("view"),m()},["prevent"])},[rt,n("div",ut,[n("span",null,u(g.$t("View")),1)])],8,ct),n("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:Y(()=>{f("conclusion:add"),m()},["prevent"])},[n("div",_t,[e(v,{icon:"feather:edit-2"})]),n("div",pt,[n("span",null,u(g.$t("Leave_feedback")),1)])],8,mt),n("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:Y(()=>{f("notice:add"),m()},["prevent"])},[n("div",gt,[e(v,{icon:"feather:edit-2"})]),n("div",vt,[n("span",null,u(g.$t("Make_notice")),1)])],8,ft),n("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:Y(()=>{f("conclusion:list"),m()},["prevent"])},[n("div",yt,[e(v,{icon:"feather:arrow-right"})]),n("div",Vt,[n("span",null,u(g.$t("Go_to_conclusions")),1)])],8,bt),n("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:Y(()=>{f("notice:list"),m()},["prevent"])},[n("div",$t,[e(v,{icon:"feather:arrow-right"})]),n("div",kt,[n("span",null,u(g.$t("Go_to_notices_list")),1)])],8,ht)]),_:1})}}}),Ct={key:0,class:"has-text-danger"},Yt=W({props:{modelValue:{default:""},isRequired:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(M,{emit:f}){const g=M,{t:d}=ae(),v=y([]),b=H({get:()=>g.modelValue,set:async m=>{f("update:modelValue",m)}});return se(async()=>{const m=await nt();v.value=m}),(m,O)=>{const _=Be,i=tt,N=ot,x=ie,S=de;return c(),V(S,null,{default:l(()=>[e(_,null,{default:l(()=>[B(u(o(d)("Stage"))+" ",1),M.isRequired?(c(),k("span",Ct,"*")):D("",!0)]),_:1}),e(x,null,{default:l(()=>[e(N,{modelValue:o(b),"onUpdate:modelValue":O[0]||(O[0]=r=>le(b)?b.value=r:null)},{default:l(()=>[e(i,{disabled:"",hidden:"",value:""},{default:l(()=>[B(u(o(d)("Select"))+" ...",1)]),_:1}),(c(!0),k(Le,null,Te(v.value,r=>(c(),V(i,{key:r.id,value:r.id,textContent:u(r.name)},null,8,["value","textContent"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),St={class:"applicant-list-wrapper"},Ft={class:"mb-5"},Dt={class:"title is-5 mb-2"},Mt=["onSubmit"],Nt={class:"columns is-desktop"},xt={class:"column"},Ut={class:"column"},Pt={class:"column"},Tt={class:"column"},Lt={class:"column"},Bt={class:"column"},Ot={class:"column"},Rt={key:0,class:"flex-list-inner"},jt={key:0},It={key:1},At={key:2},po=W({async setup(M){let f,g;const{t:d,locale:v}=ae(),{userRoleID:b}=Oe();console.log({userRoleID:b}),Re({title:d("Statements")+" - Nefrit"});const m=je();lt().setPageTitle(d("Statements"));const _=E({pagination:{current_page:1,per_page:10,total:10},result:[]}),i=E({uuid:"",applicant:"",status_id:"",stage_id:"",country_id:"",drug_name:"",date_start:L().subtract(1,"month").format("YYYY-MM-DD"),date_end:L().format("YYYY-MM-DD")}),N=E({type:"string",mask:"YYYY-MM-DD"}),x={input:"DD.MM.YYYY"},S=Ie(),r=y(!1);y(!1);const R=y(!1),j=y(!1),I=y(!1),w=y(),A=H({get:()=>_.pagination.current_page,set:async a=>{await F(a)}}),q=y([]),G={uuid:{label:d("statement_code")},legal_entity:{label:d("applied_legal_entity")},drug:{label:d("drug_name")},status:{label:d("Status"),grow:!0},stage:{label:d("Stage"),grow:!0},is_paid:{label:d("Payment_status")},date:{label:d("applied_at")},actions:{label:d("Actions"),align:"center"}},ce=H(()=>(b!=7&&delete G.legal_entity,G));[f,g]=Ae(()=>F()),await f,g(),se(async()=>{const a=await it();q.value=a});function re(a){const t=We.gotoStatementPage(a,b);S.push(t)}function ue(a){S.push(`/app/statements/${a}#conclusions`)}function me(a){S.push(`/app/statements/${a}#notices`)}async function F(a=1){const t=await oe({page:a,...i});Object.assign(_,t)}function z(){m.success(d("Success"))}async function _e(){try{r.value=!0;const a=await oe({page:1,...i});Object.assign(_,a)}catch(a){m.error("Error while fetching filtered data: ",a.message)}finally{r.value=!1}}async function pe(){r.value=!0,Object.assign(i,{uuid:"",applicant:"",status_id:"",stage_id:"",country_id:"",drug_name:"",date_start:L().subtract(1,"month").format("YYYY-MM-DD"),date_end:L().format("YYYY-MM-DD")}),await F(),r.value=!1}async function fe(){try{r.value=!0;const a=await dt(i),t=URL.createObjectURL(new Blob([a],{type:"application/vnd.ms-excel"})),C=document.createElement("a");C.href=t,C.setAttribute("download",`Worksheet_${Date.now()}.xlsx`),document.body.appendChild(C),C.click()}catch(a){console.log({error:a})}finally{r.value=!1}}return(a,t)=>{const C=st,U=qe,P=ie,T=de,ge=at,ve=Yt,be=et,Q=ne("VDatePicker"),J=Ge,K=Ze,ye=Xe,Ve=Ke,he=Je,$e=Qe,X=ze,ke=wt,we=Ne,Ce=Ue,Ye=xe,Se=De,Fe=Me;return c(),k("div",St,[e(C,{center:"",title:"","remove-disabled":"","add-disabled":"","export-disabled":!o(_).result.length,onFilter:t[0]||(t[0]=s=>I.value=!I.value),onExport:fe},null,8,["export-disabled"]),Ee(n("div",Ft,[e(Ve,{radius:"small"},{default:l(()=>[n("h3",Dt,u(o(d)("Filter_form")),1),n("form",{onSubmit:Y(_e,["prevent"])},[n("div",Nt,[n("div",xt,[e(T,{label:a.$t("statement_code")},{default:l(()=>[e(P,null,{default:l(()=>[e(U,{modelValue:o(i).uuid,"onUpdate:modelValue":t[1]||(t[1]=s=>o(i).uuid=s),type:"text"},null,8,["modelValue"])]),_:1})]),_:1},8,["label"])]),n("div",Ut,[e(T,{label:a.$t("applied_legal_entity")},{default:l(()=>[e(P,null,{default:l(()=>[e(U,{modelValue:o(i).applicant,"onUpdate:modelValue":t[2]||(t[2]=s=>o(i).applicant=s),type:"text"},null,8,["modelValue"])]),_:1})]),_:1},8,["label"])]),n("div",Pt,[e(ge,{modelValue:o(i).status_id,"onUpdate:modelValue":t[3]||(t[3]=s=>o(i).status_id=s),list:q.value},null,8,["modelValue","list"])]),n("div",Tt,[e(ve,{modelValue:o(i).stage_id,"onUpdate:modelValue":t[4]||(t[4]=s=>o(i).stage_id=s)},null,8,["modelValue"])]),n("div",Lt,[e(be,{modelValue:o(i).country_id,"onUpdate:modelValue":t[5]||(t[5]=s=>o(i).country_id=s)},null,8,["modelValue"])]),n("div",Bt,[e(Q,{modelValue:o(i).date_start,"onUpdate:modelValue":t[6]||(t[6]=s=>o(i).date_start=s),locale:o(v),color:"green","trim-weeks":"",masks:x,"model-config":o(N)},{default:l(({inputValue:s,inputEvents:p})=>[e(T,{label:a.$t("From")},{default:l(()=>[e(P,{icon:"feather:calendar"},{default:l(()=>[e(U,ee({value:s},te(p)),null,16,["value"])]),_:2},1024)]),_:2},1032,["label"])]),_:1},8,["modelValue","locale","model-config"])]),n("div",Ot,[e(Q,{modelValue:o(i).date_end,"onUpdate:modelValue":t[7]||(t[7]=s=>o(i).date_end=s),locale:o(v),color:"green","trim-weeks":"",masks:x,"model-config":o(N)},{default:l(({inputValue:s,inputEvents:p})=>[e(T,{label:a.$t("To")},{default:l(()=>[e(P,{icon:"feather:calendar"},{default:l(()=>[e(U,ee({value:s},te(p)),null,16,["value"])]),_:2},1024)]),_:2},1032,["label"])]),_:1},8,["modelValue","locale","model-config"])])]),e(ye,{"justify-content":"end","column-gap":"1rem"},{default:l(()=>[e(K,null,{default:l(()=>[e(J,{type:"button",disabled:r.value,outlined:"",color:"warning",icon:"feather:x",onClick:pe},{default:l(()=>[B(u(o(d)("Clear")),1)]),_:1},8,["disabled"])]),_:1}),e(K,null,{default:l(()=>[e(J,{type:"submit",disabled:r.value,outlined:"",color:"success",icon:"feather:filter"},{default:l(()=>[B(u(o(d)("Filter")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})],40,Mt)]),_:1})],512),[[He,I.value]]),e(Ye,{columns:o(ce),data:o(_).result,limit:o(_).pagination.per_page,total:o(_).pagination.total},{default:l(s=>[e(we,{rounded:""},{body:l(()=>[o(_).result.length===0?(c(),k("div",Rt,[e(he,{title:a.$t("No_data"),subtitle:a.$t("There_is_no_data_that_match_your_query"),class:"my-6"},null,8,["title","subtitle"])])):D("",!0)]),"body-cell":l(({row:p,column:h,value:$})=>[h.key==="legal_entity"?(c(),k("span",jt,u(p.applicant),1)):D("",!0),h.key==="drug"?(c(),k("span",It,u($?.name),1)):h.key==="date"&&$?(c(),k("span",At,u(a.$h.formatDate($,"HH:mm DD.MM.YYYY")),1)):h.key==="status"?(c(),V($e,{key:3,status:$},null,8,["status"])):h.key==="stage"?(c(),V(X,{key:4,class:"is-size-6 px-5",color:"info",rounded:"",label:$.name,style:{"white-space":"break-spaces",height:"fit-content"}},null,8,["label"])):h.key==="is_paid"?(c(),V(X,{key:5,class:"is-size-6",color:$?"primary":"warning",rounded:"",label:$?a.$t("Paid"):a.$t("Not_Paid")},null,8,["color","label"])):h.key==="actions"?(c(),V(ke,{key:6,onView:Z=>re(p.id),"onConclusion:add":()=>{R.value=!0,w.value=p.id},"onNotice:add":()=>{j.value=!0,w.value=p.id},"onConclusion:list":Z=>ue(p.id),"onNotice:list":Z=>me(p.id)},null,8,["onView","onConclusion:add","onNotice:add","onConclusion:list","onNotice:list"])):D("",!0)]),_:1}),o(_).result.length?(c(),V(Ce,{key:0,"current-page":o(A),"onUpdate:current-page":t[8]||(t[8]=p=>le(A)?A.value=p:null),class:"mt-6","item-per-page":o(_).pagination.per_page,"total-items":o(_).pagination.total},null,8,["current-page","item-per-page","total-items"])):D("",!0)]),_:1},8,["columns","data","limit","total"]),e(Se,{modelValue:R.value,"onUpdate:modelValue":t[9]||(t[9]=s=>R.value=s),"item-id":void 0,"parent-id":Number(w.value),"onUpdate:list":t[10]||(t[10]=()=>{F(),z()}),onClose:t[11]||(t[11]=s=>w.value=void 0)},null,8,["modelValue","parent-id"]),e(Fe,{modelValue:j.value,"onUpdate:modelValue":t[12]||(t[12]=s=>j.value=s),"item-id":void 0,"parent-id":Number(w.value),"onUpdate:list":t[13]||(t[13]=()=>{F(),z()}),onClose:t[14]||(t[14]=s=>w.value=void 0)},null,8,["modelValue","parent-id"])])}}});export{po as default};

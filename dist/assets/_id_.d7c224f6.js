import{_ as ie}from"./VTabs.1ed90380.js";import{_ as ce,a as de}from"./VFlexTable.b930b631.js";import{_ as re}from"./VFlexPagination.2d40fe99.js";import{_ as H}from"./VTag.30f95b80.js";import{_ as ue}from"./StatusTag.15aac924.js";import{u as J,_ as me}from"./VPlaceholderSection.fb86af70.js";import{z as D,O as K,Y as _e,V as Y,r as T,e as Q,bv as pe,p as X,o as i,i as f,q as s,w as o,E as t,l as v,t as l,f as y,m as w,G as fe,A as F,j as e,v as L,$ as Z,a0 as ee,P as te,b as be,B as he,a1 as ve,bT as ye,bP as ge}from"./index.f3c4af7c.js";import{a as ke,b as Ve,c as $e,u as G,v as we,d as xe}from"./index.df6c175f.js";import{_ as Ce}from"./ConfirmActionModal.586a357b.js";import{_ as ae}from"./VTextarea.27c42114.js";import{_ as Se}from"./VBlock.833cd21b.js";import{_ as Ae}from"./CountrySelect.62a003c3.js";import{_ as Be}from"./VModal.4ff983a6.js";import{u as Ue}from"./viewWrapper.af3ae620.js";import"./VIcon.f4e820fd.js";import"./VOption.1b4c80f8.js";const qe={key:0,class:"flex-list-inner"},Fe={key:0},Me={key:1},je={key:2},Ie=["onClick"],Ne=D({props:{data:{type:Object,default:()=>({pagination:{},result:[]})}},emits:["update:data"],async setup(I,{emit:b}){let N,x;const C=I,h=K(),a=_e();J();const{t:u,locale:_}=Y(),d=T(C.data),r=Q({get:()=>d.pagination.current_page,set:async g=>{await S(g)}}),p={code:{label:u("statement_code")},legal_entity:{label:u("applied_legal_entity")},drug:{label:u("drug_name")},date:{label:u("applied_at")},status:u("Status"),stage:{label:u("Stage"),grow:!0},actions:{label:u("Actions"),align:"center"}},M=h.params?.id??null;[N,x]=pe(()=>S()),await N,x();async function S(g=1){const A=await ke(M,g);Object.assign(d,A)}function j(g){a.push(`/app/statements/${g}`)}return(g,A)=>{const O=me,z=ue,E=H,P=X("VueIconify"),W=ce,R=re,c=de;return i(),f("div",null,[s(c,{columns:t(p),data:t(d).result,limit:t(d).pagination.per_page,total:t(d).pagination.total},{default:o(n=>[s(W,{rounded:""},{body:o(()=>[t(d).result.length===0?(i(),f("div",qe,[s(O,{title:g.$t("No_data"),subtitle:g.$t("There_is_no_data_that_match_your_query"),class:"my-6"},null,8,["title","subtitle"])])):v("",!0)]),"body-cell":o(({row:$,column:B,value:k,index:U})=>[B.key==="legal_entity"?(i(),f("span",Fe,l(k.name),1)):B.key==="drug"?(i(),f("span",Me,l(k.name),1)):B.key==="date"?(i(),f("span",je,l(k),1)):B.key==="status"?(i(),y(z,{key:3,status:k},null,8,["status"])):B.key==="stage"?(i(),y(E,{key:4,class:"is-size-6",rounded:"",color:"info"},{default:o(()=>[w(l(k.name),1)]),_:2},1024)):B.key==="actions"?(i(),f("a",{key:5,href:"javascript:;",onClick:V=>j($.id)},[s(P,{icon:"feather:eye",class:"has-text-primary",height:"1.5rem"})],8,Ie)):v("",!0)]),_:1}),t(d).result?.length?(i(),y(R,{key:0,class:"mt-6","current-page":t(r),"onUpdate:current-page":A[0]||(A[0]=$=>fe(r)?r.value=$:null),"item-per-page":t(d).pagination.per_page,"total-items":t(d).pagination.total},null,8,["current-page","item-per-page","total-items"])):v("",!0)]),_:1},8,["columns","data","limit","total"])])}}}),Oe=["onSubmit"],Te={class:"columns is-multiline"},De={class:"column is-12"},Ye={class:"help has-text-danger"},ze=D({props:{modelValue:Boolean,itemId:{type:Number,default:null}},emits:["update:modelValue","update:list"],setup(I,{emit:b}){const N=I,{t:x}=Y();let C=F(x("Block_applicant"));const h=F(""),a=T({block_reason:""});async function u(r){try{await Ve(N.itemId,{block_reason:h.value}),b("update:list"),_()}catch(p){Object.assign(a,p.response?.data?.errors)}}function _(){h.value="",Object.assign(a,{block_reason:""}),b("update:modelValue",!1)}function d(r){a[r.target.name]=""}return(r,p)=>{const M=ae,S=Z,j=ee,g=te,A=Be;return i(),y(A,{open:I.modelValue,size:"large",title:t(C),actions:"right",onClose:_},{content:o(()=>[e("form",{id:"block-applicant-form",class:"modal-form",onSubmit:L(u,["prevent"])},[e("div",Te,[e("div",De,[s(j,{label:r.$t("block_reason"),required:""},{default:o(()=>[s(S,{"has-error":t(a).block_reason[0]},{default:o(()=>[s(M,{name:"block_reason",placeholder:r.$t("Add_text"),modelValue:h.value,"onUpdate:modelValue":p[0]||(p[0]=O=>h.value=O),onInput:d},null,8,["placeholder","modelValue"]),e("p",Ye,l(t(a).block_reason[0]),1)]),_:1},8,["has-error"])]),_:1},8,["label"])])])],40,Oe)]),action:o(({close:O})=>[s(g,{color:"danger",outlined:"",type:"submit",form:"block-applicant-form"},{default:o(()=>[w(l(r.$t("Block")),1)]),_:1})]),_:1},8,["open","title"])}}});const Ee={class:"form-layout is-separate"},Pe={class:"form-outer"},We={class:"form-body"},Re=["onSubmit"],Le={class:"form-section-inner has-padding-bottom"},Ge={class:"has-text-centered"},He={class:"columns is-multiline"},Je={class:"column is-12 mb-3"},Ke={class:"help has-text-danger"},Qe={class:"column is-12 mb-3"},Xe={class:"help has-text-danger"},Ze={class:"column is-12 mb-3"},et={class:"help has-text-danger"},tt={class:"column is-12 mb-3"},at={class:"help has-text-danger"},st={class:"column is-12 is-flex"},ot=["onSubmit"],nt={class:"form-section-inner has-padding-bottom"},lt={class:"has-text-centered"},it={class:"columns is-multiline"},ct={class:"column is-12 mb-3"},dt={class:"help has-text-danger"},rt={class:"column is-6 mb-3"},ut={class:"help has-text-danger"},mt={class:"column is-6 mb-3"},_t={class:"column is-6 mb-3"},pt={class:"column is-12 mb-3"},ft={class:"help has-text-danger"},bt={class:"column is-12"},ht={class:"column is-12 is-flex"},vt={class:"form-section"},yt={class:"form-section-inner has-padding-bottom"},gt={class:"has-text-centered"},kt={class:"columns is-multiline"},Vt={class:"column is-12 mb-3"},$t={class:"table is-hoverable is-bordered is-fullwidth"},wt={key:0},xt={class:"has-text-weight-bold"},Ct={class:"name dark-inverted"},St={key:1},At={class:"has-text-weight-bold"},Bt={class:"name dark-inverted"},Ut=["textContent"],qt={key:2},Ft={class:"has-text-weight-bold"},Mt={class:"name dark-inverted"},jt=["textContent"],It={key:3},Nt={class:"has-text-weight-bold"},Ot={class:"name dark-inverted"},Tt=["textContent"],Dt=D({setup(I){const{t:b,locale:N}=Y(),x=K(),C=J(),h=x.params?.id??"",a=T({}),u=F(!1),_=F(!1),d=T({boss_name:"",phone:"",fax:"",website:"",email:"",name:"",country:"",address:"",is_national:""}),r=F(!1),p=be(),M=F(!1),S=F(Function);he(async()=>{await j()});async function j(){const c=await $e(Number(h));Object.assign(a,c)}async function g(c){try{r.value=!0;const n=await G(Number(h),a);Object.assign(a,n),u.value=!1,p.dismissAll(),p.success(b("Updated_successfully"))}catch(n){Object.assign(d,n.response?.data?.errors)}finally{r.value=!1}}async function A(c){try{r.value=!0;const n=await G(Number(h),a);Object.assign(a,n),_.value=!1,p.dismissAll(),p.success(b("Updated_successfully"))}catch(n){Object.assign(d,n.response?.data?.errors)}finally{r.value=!1}}async function O(){await S.value(Number(h)),await j()}async function z(){S.value=we,C.$patch({confirmModalState:!0,confirmModalOkButtonColor:"success"})}function E(){u.value=!u.value}function P(){_.value=!_.value}function W(){M.value=!0}async function R(){S.value=xe,C.$patch({confirmModalState:!0,confirmModalOkButtonColor:"success"})}return(c,n)=>{const $=te,B=Se,k=X("VueIconify"),U=ve,V=Z,q=ee,se=ae,oe=ye,ne=H,le=Ce;return i(),f("div",null,[e("div",Ee,[s(B,{title:"",center:""},{action:o(()=>[t(a).blocked_at?v("",!0):(i(),y($,{key:0,type:"button",class:"mr-3",outlined:"",color:"danger",icon:"fas fa-ban",onClick:W},{default:o(()=>[w(l(c.$t("Block")),1)]),_:1})),t(a).blocked_at?(i(),y($,{key:1,type:"button",class:"mr-3",outlined:"",color:"warning",icon:"fas fa-ban",onClick:R},{default:o(()=>[w(l(c.$t("Unblock")),1)]),_:1})):v("",!0),t(a).verified_at?v("",!0):(i(),y($,{key:2,type:"button",class:"mr-3",outlined:"",color:"primary",icon:"fas fa-check-double",onClick:z},{default:o(()=>[w(l(c.$t("Verify")),1)]),_:1}))]),_:1}),e("div",Pe,[e("div",We,[e("form",{id:"first-block-form",class:"form-section",onSubmit:L(g,["prevent"])},[e("div",Le,[e("h3",Ge,[w(l(t(b)("Applicant_details"))+" ",1),e("a",{href:"javascript:;",onClick:E,class:"edit-btn ml-5"},[u.value?(i(),y(k,{key:1,icon:"feather:x"})):(i(),y(k,{key:0,icon:"feather:edit-2"}))])]),e("div",He,[e("div",Je,[s(q,{required:"",label:c.$t("Boss_name")},{default:o(()=>[s(V,{icon:"feather:user"},{default:o(()=>[s(U,{disabled:!u.value,type:"text",name:"boss_name",modelValue:t(a).boss_name,"onUpdate:modelValue":n[0]||(n[0]=m=>t(a).boss_name=m),placeholder:"",autocomplete:"boss-name"},null,8,["disabled","modelValue"]),e("p",Ke,l(t(d).boss_name[0]),1)]),_:1})]),_:1},8,["label"])]),e("div",Qe,[s(q,{required:"",label:c.$t("Applicant_phone_number")},{default:o(()=>[s(V,{icon:"feather:phone",required:""},{default:o(()=>[s(U,{disabled:!u.value,type:"tel",name:"phone",modelValue:t(a).phone,"onUpdate:modelValue":n[1]||(n[1]=m=>t(a).phone=m),autocomplete:"applicant-name"},null,8,["disabled","modelValue"]),e("p",Xe,l(t(d).phone[0]),1)]),_:1})]),_:1},8,["label"])]),e("div",Ze,[s(q,{required:"",label:c.$t("Website")},{default:o(()=>[s(V,{icon:"feather:globe",required:""},{default:o(()=>[s(U,{disabled:!u.value,type:"text",name:"website",modelValue:t(a).website,"onUpdate:modelValue":n[2]||(n[2]=m=>t(a).website=m),autocomplete:"website-name"},null,8,["disabled","modelValue"]),e("p",et,l(t(d).website[0]),1)]),_:1})]),_:1},8,["label"])]),e("div",tt,[s(q,{required:"",label:c.$t("Email_address")},{default:o(()=>[s(V,{icon:"feather:mail",required:""},{default:o(()=>[s(U,{disabled:!u.value,type:"email",name:"email",modelValue:t(a).email,"onUpdate:modelValue":n[3]||(n[3]=m=>t(a).email=m),autocomplete:"email",inputmode:"email"},null,8,["disabled","modelValue"]),e("p",at,l(t(d).email[0]),1)]),_:1})]),_:1},8,["label"])]),e("div",st,[u.value?(i(),y($,{key:0,loading:r.value,class:"ml-auto",outlined:"",color:"success",icon:"fas fa-save",type:"submit",form:"first-block-form",disabled:r.value},{default:o(()=>[w(l(c.$t("Save")),1)]),_:1},8,["loading","disabled"])):v("",!0)])])])],40,Re),e("form",{id:"second-block-form",class:"form-section",onSubmit:L(A,["prevent"])},[e("div",nt,[e("h3",lt,[w(l(t(b)("Company_information"))+" ",1),e("a",{href:"javascript:;",onClick:P,class:"edit-btn ml-5"},[_.value?(i(),y(k,{key:1,icon:"feather:x"})):(i(),y(k,{key:0,icon:"feather:edit-2"}))])]),e("div",it,[e("div",ct,[s(q,{required:"",label:c.$t("Company_name")},{default:o(()=>[s(V,{icon:"feather:briefcase",required:""},{default:o(()=>[s(U,{disabled:!_.value,modelValue:t(a).name,"onUpdate:modelValue":n[4]||(n[4]=m=>t(a).name=m),autocomplete:"company_name"},null,8,["disabled","modelValue"]),e("p",dt,l(t(d).name[0]),1)]),_:1})]),_:1},8,["label"])]),e("div",rt,[s(q,{label:c.$t("Company_fax")},{default:o(()=>[s(V,{icon:"feather:printer",required:""},{default:o(()=>[s(U,{disabled:!_.value,modelValue:t(a).fax,"onUpdate:modelValue":n[5]||(n[5]=m=>t(a).fax=m),autocomplete:"tel",inputmode:"tel"},null,8,["disabled","modelValue"]),e("p",ut,l(t(d).fax[0]),1)]),_:1})]),_:1},8,["label"])]),e("div",mt,[s(Ae,{disabled:!_.value,modelValue:t(a).country,"onUpdate:modelValue":n[6]||(n[6]=m=>t(a).country=m),required:""},null,8,["disabled","modelValue"])]),e("div",_t,[s(q,{label:c.$t("stir")},{default:o(()=>[s(V,{icon:"fas fa-hashtag"},{default:o(()=>[s(U,{disabled:"",value:t(a).inn},null,8,["value"])]),_:1})]),_:1},8,["label"])]),e("div",pt,[s(q,{required:"",label:c.$t("Address")},{default:o(()=>[s(V,null,{default:o(()=>[s(se,{modelValue:t(a).address,"onUpdate:modelValue":n[7]||(n[7]=m=>t(a).address=m),rows:2},null,8,["modelValue"]),e("p",ft,l(t(d).address[0]),1)]),_:1})]),_:1},8,["label"])]),e("div",bt,[s(V,{raw:"",subcontrol:""},{default:o(()=>[s(oe,{class:"pl-1",modelValue:t(a).is_national,"onUpdate:modelValue":n[8]||(n[8]=m=>t(a).is_national=m),label:c.$t("isNational"),color:"primary","true-value":1,"false-value":0,disabled:!_.value},null,8,["modelValue","label","disabled"])]),_:1})]),e("div",ht,[_.value?(i(),y($,{key:0,loading:r.value,class:"ml-auto",outlined:"",color:"success",icon:"fas fa-save",type:"submit",form:"second-block-form",disabled:r.value},{default:o(()=>[w(l(c.$t("Save")),1)]),_:1},8,["loading","disabled"])):v("",!0)])])])],40,ot),e("div",vt,[e("div",yt,[e("h3",gt,l(t(b)("Applicant_status")),1),e("div",kt,[e("div",Vt,[e("table",$t,[e("tbody",null,[t(a).status?(i(),f("tr",wt,[e("td",xt,[e("div",Ct,l(c.$t("Status")),1)]),e("td",null,[s(ne,{color:t(a).status.color,rounded:"",textContent:l(t(a).status?.name)},null,8,["color","textContent"])])])):v("",!0),t(a).verified_at?(i(),f("tr",St,[e("td",At,[e("div",Bt,l(c.$t("verified_at")),1)]),e("td",null,[e("span",{class:"has-text-primary is-size-6",textContent:l(c.$h.formatDate(t(a).verified_at,"DD.MM.YYYY"))},null,8,Ut)])])):v("",!0),t(a).block_reason?(i(),f("tr",qt,[e("td",Ft,[e("div",Mt,l(c.$t("block_reason")),1)]),e("td",null,[e("span",{color:"danger is-size-6",textContent:l(t(a).block_reason)},null,8,jt)])])):v("",!0),t(a).blocked_at?(i(),f("tr",It,[e("td",Nt,[e("div",Ot,l(c.$t("blocked_at")),1)]),e("td",null,[e("span",{class:"has-text-danger is-size-6",textContent:l(c.$h.formatDate(t(a).blocked_at,"DD.MM.YYYY"))},null,8,Tt)])])):v("",!0)])])])])])])])])]),s(le,{onConfirmAction:O}),s(ze,{modelValue:M.value,"onUpdate:modelValue":n[9]||(n[9]=m=>M.value=m),"item-id":Number(t(h)),"onUpdate:list":j},null,8,["modelValue","item-id"])])}}}),Yt={class:"applicant-detail-wrapper"},zt={key:0,class:"mt-5"},Et={key:1,class:"mt-5"},na=D({setup(I){const{t:b,locale:N}=Y(),x=F(),C=T([{label:b("Applicant_details"),value:"details",icon:"feather:info"},{label:b("Statements"),value:"statements",icon:"feather:file-text"}]);return Ue().setPageTitle(b("Applicant_Info")),ge({title:Q(()=>x.value?.title??"Loading applicant...")}),(a,u)=>{const _=Dt,d=Ne,r=ie;return i(),f("div",Yt,[s(r,{selected:"details",tabs:t(C)},{tab:o(({activeValue:p})=>[p==="details"?(i(),f("div",zt,[s(_)])):p==="statements"?(i(),f("div",Et,[s(d)])):v("",!0)]),_:1},8,["tabs"])])}}});export{na as default};

import{ad as x,z as B,V as L,b as H,bP as I,e as W,A as m,r as E,bv as K,o as h,i as b,j as l,q as s,w as n,E as a,t as u,l as M,m as G,v as J,a1 as Q,$ as X,a0 as Y,P as Z}from"./index.da6b4d71.js";import{_ as ee}from"./VTabs.vue_vue_type_script_setup_true_lang.14f3874b.js";import{u as ae}from"./viewWrapper.3f71f0f4.js";import{C as se,a as C,e as A}from"./editor-data.f3ae8f20.js";import{_ as le}from"./VFlex.vue_vue_type_style_index_0_lang.30a6d0f9.js";import{_ as F}from"./VFlexItem.vue_vue_type_style_index_0_lang.67ecd9c5.js";import"./VIcon.vue_vue_type_script_setup_true_lang.a86e10a8.js";import"./vue.runtime.esm-bundler.1698c9fb.js";const N=x();async function te(){try{const{data:_}=await N({url:"/api/admin/about"});return _.data}catch(_){throw _}}async function oe(_){try{const{data:f}=await N({url:"/api/admin/about",method:"POST",data:_});return f.data}catch(f){throw f}}const ne=["onSubmit"],de={class:"container is-fluid"},ie={class:"columns"},re={class:"column is-8"},ue={key:0,class:"columns is-multiline pt-5"},pe={class:"column is-12"},ce={class:"help has-text-danger"},me={class:"help has-text-danger"},_e={class:"help has-text-danger"},fe={key:1,class:"columns is-multiline pt-5"},ge={class:"column is-12"},he={class:"help has-text-danger"},be={class:"help has-text-danger"},ve={class:"help has-text-danger"},ye={key:2,class:"columns is-multiline pt-5"},Ve={class:"column is-12"},ze={class:"help has-text-danger"},$e={class:"help has-text-danger"},we={class:"help has-text-danger"},Ue={class:"column is-4"},Ce={class:"file"},Ae={class:"file-label"},De={class:"file-cta"},Te=l("span",{class:"file-icon"},[l("i",{class:"fas fa-cloud-upload-alt"})],-1),ke={class:"file-label"},Ee=["src"],Fe=l("div",{class:"is-divider my-5"},null,-1),Ne={class:"file"},Se={class:"file-label"},Pe={class:"file-cta"},je=l("span",{class:"file-icon"},[l("i",{class:"fas fa-cloud-upload-alt"})],-1),Oe={class:"file-label"},Re=["src"],Ge=B({async setup(_){let f,D;const{t:v}=L(),T=H();ae().setPageTitle(v("Handbook_page")),I({title:W(()=>v("Handbook_page"))});const y=se.component,g=m(!1),t=E({name:{uz:"",ru:"",en:""},description:{uz:"",ru:"",en:""},address:{uz:"",ru:"",en:""},logo:null,image:null,point_x:41.2543754,point_y:69.1679692}),p=E({["name.uz"]:[],["description.uz"]:[],["address.uz"]:[],["name.ru"]:[],["description.ru"]:[],["address.ru"]:[],["name.en"]:[],["description.en"]:[],["address.en"]:[],logo:[],image:[],point_x:[],point_y:[]}),V=m([]),z=m([]);m([]);const $=m(""),w=m("");m([]),m([]),[f,D]=K(()=>P()),await f,D();function S(){Object.assign(p,{["name.uz"]:[],["description.uz"]:[],["address.uz"]:[],["name.ru"]:[],["description.ru"]:[],["address.ru"]:[],["name.en"]:[],["description.en"]:[],["address.en"]:[],logo:[],image:[],point_x:[],point_y:[]})}async function P(){const e=await te();await Object.assign(t,e),$.value=e.logo,w.value=e.image}async function k(){try{g.value=!0,S();const e=new FormData;e.append("name[uz]",t.name.uz),e.append("name[ru]",t.name.ru),e.append("name[en]",t.name.en),e.append("description[uz]",t.description.uz),e.append("description[ru]",t.description.ru),e.append("description[en]",t.description.en),e.append("address[uz]",t.address.uz),e.append("address[ru]",t.address.ru),e.append("address[en]",t.address.en),e.append("logo",V.value.length?V.value[0]:""),e.append("image",z.value.length?z.value[0]:"");const o=await oe(e);Object.assign(t,o),T.success(`${v("Updated_successfully")}`)}catch(e){Object.assign(p,e.response?.data?.errors),T.error(`Error while updating data: ${e.message}`)}finally{g.value=!1}}function j(e){const o=e.target;if(o.files?.length){const i=new FileReader;i.readAsDataURL(o.files[0]),i.onload=()=>{$.value=i.result?.toString()||""},i.onerror=r=>console.log(r),V.value?.push(o.files[0])}}function O(e){const o=e.target;if(o.files?.length){const i=new FileReader;i.readAsDataURL(o.files[0]),i.onload=()=>{w.value=i.result?.toString()||""},i.onerror=r=>console.log(r),z.value?.push(o.files[0])}}return(e,o)=>{const i=Q,r=X,c=Y,R=ee,q=Z;return h(),b("form",{id:"role-form",class:"modal-form",onSubmit:J(k,["prevent"])},[l("div",de,[l("div",ie,[l("div",re,[s(R,{type:"boxed",selected:"uz",tabs:[{label:e.$t("Uzbek"),value:"uz"},{label:e.$t("Russian"),value:"ru"},{label:e.$t("English"),value:"en"}]},{tab:n(({activeValue:U})=>[U==="uz"?(h(),b("div",ue,[l("div",pe,[s(c,{label:e.$t("Name"),required:""},{default:n(()=>[s(r,null,{default:n(()=>[s(i,{type:"text",placeholder:e.$t("Type_name_uz"),modelValue:a(t).name.uz,"onUpdate:modelValue":o[0]||(o[0]=d=>a(t).name.uz=d)},null,8,["placeholder","modelValue"]),l("p",ce,u(a(p)["name.uz"][0]),1)]),_:1})]),_:1},8,["label"]),s(c,{label:e.$t("Address"),required:""},{default:n(()=>[s(r,null,{default:n(()=>[s(i,{type:"text",placeholder:e.$t("Type_address"),modelValue:a(t).address.uz,"onUpdate:modelValue":o[1]||(o[1]=d=>a(t).address.uz=d)},null,8,["placeholder","modelValue"]),l("p",me,u(a(p)["address.uz"][0]),1)]),_:1})]),_:1},8,["label"]),s(c,{label:e.$t("Description"),required:""},{default:n(()=>[s(a(y),{modelValue:a(t).description.uz,"onUpdate:modelValue":o[2]||(o[2]=d=>a(t).description.uz=d),editor:a(C),config:a(A)},null,8,["modelValue","editor","config"]),l("p",_e,u(a(p)["description.uz"][0]),1)]),_:1},8,["label"])])])):U==="ru"?(h(),b("div",fe,[l("div",ge,[s(c,{label:e.$t("Name")},{default:n(()=>[s(r,null,{default:n(()=>[s(i,{type:"text",placeholder:e.$t("Type_name"),modelValue:a(t).name.ru,"onUpdate:modelValue":o[3]||(o[3]=d=>a(t).name.ru=d)},null,8,["placeholder","modelValue"]),l("p",he,u(a(p)["name.ru"][0]),1)]),_:1})]),_:1},8,["label"]),s(c,{label:e.$t("Address")},{default:n(()=>[s(r,null,{default:n(()=>[s(i,{type:"text",placeholder:e.$t("Type_address"),modelValue:a(t).address.ru,"onUpdate:modelValue":o[4]||(o[4]=d=>a(t).address.ru=d)},null,8,["placeholder","modelValue"]),l("p",be,u(a(p)["address.ru"][0]),1)]),_:1})]),_:1},8,["label"]),s(c,{label:e.$t("Description")},{default:n(()=>[s(a(y),{modelValue:a(t).description.ru,"onUpdate:modelValue":o[5]||(o[5]=d=>a(t).description.ru=d),editor:a(C),config:a(A)},null,8,["modelValue","editor","config"]),l("p",ve,u(a(p)["description.ru"][0]),1)]),_:1},8,["label"])])])):U==="en"?(h(),b("div",ye,[l("div",Ve,[s(c,{label:e.$t("Name")},{default:n(()=>[s(r,null,{default:n(()=>[s(i,{type:"text",placeholder:e.$t("Type_name"),modelValue:a(t).name.en,"onUpdate:modelValue":o[6]||(o[6]=d=>a(t).name.en=d)},null,8,["placeholder","modelValue"]),l("p",ze,u(a(p)["name.en"][0]),1)]),_:1})]),_:1},8,["label"]),s(c,{label:e.$t("Address")},{default:n(()=>[s(r,null,{default:n(()=>[s(i,{type:"text",placeholder:e.$t("Type_address"),modelValue:a(t).address.en,"onUpdate:modelValue":o[7]||(o[7]=d=>a(t).address.en=d)},null,8,["placeholder","modelValue"]),l("p",$e,u(a(p)["address.en"][0]),1)]),_:1})]),_:1},8,["label"]),s(c,{label:e.$t("Description")},{default:n(()=>[s(a(y),{modelValue:a(t).description.en,"onUpdate:modelValue":o[8]||(o[8]=d=>a(t).description.en=d),editor:a(C),config:a(A)},null,8,["modelValue","editor","config"]),l("p",we,u(a(p)["description.en"][0]),1)]),_:1},8,["label"])])])):M("",!0)]),_:1},8,["tabs"])]),l("div",Ue,[s(le,{"flex-direction":"column"},{default:n(()=>[s(F,{"align-self":"center"},{default:n(()=>[s(c,{grouped:""},{default:n(()=>[s(r,null,{default:n(()=>[l("div",Ce,[l("label",Ae,[l("input",{class:"file-input",type:"file",name:"resume",onChange:j},null,32),l("span",De,[Te,l("span",ke,u(e.$t("Choose_a_logo")),1)])])])]),_:1})]),_:1}),l("img",{src:$.value,alt:"",width:"150"},null,8,Ee)]),_:1}),Fe,s(F,{"align-self":"center"},{default:n(()=>[s(c,{grouped:""},{default:n(()=>[s(r,null,{default:n(()=>[l("div",Ne,[l("label",Se,[l("input",{class:"file-input",type:"file",name:"resume",onChange:O},null,32),l("span",Pe,[je,l("span",Oe,u(e.$t("Choose_a_image")),1)])])])]),_:1})]),_:1}),l("img",{src:w.value,alt:""},null,8,Re)]),_:1})]),_:1})])]),s(q,{loading:g.value,color:"primary",outlined:"",type:"submit",disabled:g.value,onClick:k},{default:n(()=>[G(u(e.$t("Save")),1)]),_:1},8,["loading","disabled"])])],40,ne)}}});export{Ge as default};

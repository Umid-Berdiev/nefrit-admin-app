import{_ as X}from"./ConfirmActionModal.13d479f4.js";import{_ as ee}from"./ContractFormModal.1dc2dcc6.js";import{_ as te,a as oe}from"./VFlexTable.1438e9d1.js";import{_ as ne}from"./VFlexPagination.6accec6d.js";import{z as T,o as n,f as v,w as p,j as s,t as m,v as A,Z as ae,Y as se,V as re,b as ie,r as le,A as M,e as S,bP as ce,bw as _e,i as c,q as i,E as o,G as pe,l as _,F as me,s as ue,a3 as de,a1 as fe,a2 as ge}from"./index.7d56daf3.js";import{_ as he}from"./VTag.b5945bcc.js";import{u as ve,_ as ye}from"./VPlaceholderSection.5c15bef1.js";import{_ as be,a as we}from"./TableActionsBlock.3b4fe815.js";import{u as $e}from"./viewWrapper.780c4a53.js";import{r as Ve,g as Ce}from"./index.61560d82.js";import"./VModal.d53d6d9f.js";import"./VFileInput.24b07aa9.js";import"./index.d3468edf.js";import"./VButtons.2dc19305.js";const ke=["onClick"],Ne=s("div",{class:"icon"},[s("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),Fe={class:"meta"},xe=s("hr",{class:"dropdown-divider"},null,-1),Ae=["onClick"],Me=s("div",{class:"icon"},[s("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),Se={class:"meta"},Te=T({emits:["view","remove"],setup(D,{emit:u}){return(d,N)=>{const t=ae;return n(),v(t,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:p(({close:y})=>[s("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:A(()=>{u("view"),y()},["prevent"])},[Ne,s("div",Fe,[s("span",null,m(d.$t("View")),1)])],8,ke),xe,s("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:A(()=>{u("remove"),y()},["prevent"])},[Me,s("div",Se,[s("span",null,m(d.$t("Remove")),1)])],8,Ae)]),_:1})}}}),De={class:"applicant-list-wrapper"},Re=["textContent"],Pe={key:0,class:"flex-list-inner"},Be={key:0},Ue={key:1},Ye={key:3},tt=T({async setup(D){let u,d;const N=se(),{t,locale:y}=re(),R=ve(),b=ie(),r=le({pagination:{current_page:1,per_page:10,total:10},result:[]}),w=M(!1),f=M(),$=S({get(){return""},async set(e){}}),P=S(()=>({orderNumber:{format:(e,a,C)=>`${C+1}`,cellClass:"is-flex-grow-0"},name:{label:t("Name"),searchable:!0,grow:!0},legal_entity:{label:t("Applicant"),grow:!0},applications:{label:t("Statements")},payment_amount:{label:t("Contract_amount")},verified_at:{label:t("Payment_status"),grow:!0},created_at:{label:t("Date")},actions:{label:t("Actions"),align:"center"}}));$e().setPageTitle(t("Contracts_List")),ce({title:t("Contracts")+" - Nefrit"}),[u,d]=_e(()=>V()),await u,d();function B(){w.value=!0}function U(e){f.value=e,N.push(`/app/contracts/${e}`)}async function Y(e){f.value=e,R.$patch({confirmModalState:!0})}async function I(){try{await Ve(Number(f.value)),V(),b.success(t("Removed_successfully"))}catch(e){b.error(t(e.response?.data.error.message))}}async function V(e=1){const a=await Ce(e);Object.assign(r,a)}function F(){f.value=void 0}function W(){b.success(t("Updated_successfully"))}return(e,a)=>{const C=be,E=de,j=fe,q=ge,z=we,L=ye,O=he,G=Te,H=te,Z=ne,J=oe,K=ee,Q=X;return n(),c("div",De,[i(C,{center:"",title:"",onAdd:B,"filter-disabled":!0,"print-disabled":!0,"remove-disabled":!0}),i(J,{columns:o(P),data:o(r).result,limit:o(r).pagination.per_page,total:o(r).pagination.total},{default:p(x=>[i(z,null,{left:p(()=>[i(q,null,{default:p(()=>[i(j,{icon:"feather:search"},{default:p(()=>[i(E,{modelValue:o($),"onUpdate:modelValue":a[0]||(a[0]=l=>pe($)?$.value=l:null),class:"is-rounded",placeholder:o(t)("Search")+"..."},null,8,["modelValue","placeholder"])]),_:1})]),_:1})]),_:1}),i(H,{rounded:""},{"header-column":p(({column:l})=>[l.key==="orderNumber"?(n(),c("span",{key:0,class:"is-flex-grow-0",textContent:m("#")},null,8,Re)):_("",!0)]),body:p(()=>[o(r).result.length===0?(n(),c("div",Pe,[i(L,{title:e.$t("No_data"),subtitle:e.$t("There_is_no_data_that_match_your_query"),class:"my-6"},null,8,["title","subtitle"])])):_("",!0)]),"body-cell":p(({row:l,column:g,value:h,index:We})=>[g.key==="legal_entity"?(n(),c("span",Be,m(h.name),1)):_("",!0),g.key==="applications"?(n(),c("ul",Ue,[(n(!0),c(me,null,ue(h,k=>(n(),c("li",null,m(k.code),1))),256))])):_("",!0),g.key==="verified_at"?(n(),v(O,{key:2,class:"is-size-6",color:h?"primary":"warning",rounded:"",label:h?e.$t("Paid"):e.$t("Not_Paid")},null,8,["color","label"])):_("",!0),g.key==="created_at"?(n(),c("span",Ye,m(e.$h.formatDate(h,"DD.MM.YYYY")),1)):_("",!0),g.key==="actions"?(n(),v(G,{key:4,onView:k=>U(l.id),onRemove:k=>Y(l.id)},null,8,["onView","onRemove"])):_("",!0)]),_:1}),o(r).result.length?(n(),v(Z,{key:0,"current-page":o(r).pagination.current_page,"onUpdate:current-page":a[1]||(a[1]=l=>o(r).pagination.current_page=l),class:"mt-6","item-per-page":o(r).pagination.per_page,"total-items":o(r).pagination.total},null,8,["current-page","item-per-page","total-items"])):_("",!0)]),_:1},8,["columns","data","limit","total"]),i(K,{modelValue:w.value,"onUpdate:modelValue":a[2]||(a[2]=x=>w.value=x),"item-id":f.value,"onUpdate:list":a[3]||(a[3]=()=>{V(),W(),F()}),onClose:F},null,8,["modelValue","item-id"]),i(Q,{onConfirmAction:I})])}}});export{tt as default};
